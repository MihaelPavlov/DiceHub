<div class="container">
  <div class="buttons">
    <div class="btn-container" (click)="toggleAddChallenge()">
      <span>Add Challenge</span>
      <span *ngIf="!showAddChallenge" class="material-symbols-outlined wrapper_add"> add </span>
      <span *ngIf="showAddChallenge" class="material-symbols-outlined wrapper_add"> close </span>
    </div>

    <div class="btn-container">
      <span>Total: 30</span>
    </div>
  </div>
  <div class="buttons">
    <div class="btn-container" (click)="toggleFilter()">
      <span>Filter By Game</span>
      <span *ngIf="!showFilter" class="material-symbols-outlined wrapper_filter"> filter_alt </span>
      <span *ngIf="showFilter" class="material-symbols-outlined wrapper_filter"> close </span>
    </div>
  </div>
  <div class="input-field" *ngIf="showFilter">
    <ng-select
      [items]="gameList"
      bindLabel="name"
      placeholder="Select Game"
      [searchable]="true"
      formControlName="selectedGame"
      class="app-select-long"
      [multiple]="true"
      [closeOnSelect]="false"
    >
    </ng-select>
  </div>

  <form [formGroup]="form" *ngIf="showAddChallenge">
    <div class="reward-container">
      <div class="close-container">
        <span
          class="material-symbols-outlined input-remove"
          (click)="onHideChallenge()"
        >
          close
        </span>
      </div>
      <div class="wrapper">
        <div class="inputs">
          <div class="input-group">
            <div class="input-field">
              <label for="game" class="required">Choose Game</label>

              <ng-select
                [items]="gameList"
                bindLabel="name"
                placeholder="Select Game"
                [searchable]="true"
                formControlName="selectedGame"
                class="app-select"
              >
              </ng-select>
            </div>

            <div class="input-field">
              <label for="rewardPoints" class="required">Points</label>
              <input
                name="rewardPoints"
                placeholder="..."
                type="number"
                formControlName="rewardPoints"
              />
            </div>
          </div>

          <div class="input-group">
            <div class="input-field">
              <label for="attempts" class="required">Attempts</label>
              <input
                name="attempts"
                placeholder="..."
                type="number"
                formControlName="attempts"
              />
            </div>

            <div class="input-field">
              <label for="type" class="required">Type</label>

              <ng-select
                [items]="gameList"
                bindLabel="name"
                placeholder="Type"
                [searchable]="true"
                formControlName="type"
                class="app-select"
              >
              </ng-select>
            </div>
          </div>

          <div class="input-field">
            <label for="description" class="required">Description</label>
            <input
              name="description"
              placeholder="description"
              type="text"
              formControlName="description"
            />
          </div>
        </div>
      </div>
      <button
        [disabled]="this.form.invalid"
        type="button"
        class="btn btn-gray create-btn"
        (click)="onAddChallenge()"
        [ngClass]="{
          'btn-border-green': this.form.valid,
          'btn-font-green': this.form.valid,
          'btn-border-red': this.form.invalid,
          'btn-font-red': this.form.invalid
        }"
      >
        Create
      </button>
    </div>
  </form>
</div>

<section class="wrapper_library">
  <div *ngFor="let game of games" class="wrapper_library__item">
    <div class="wrapper_image">
      <img [src]="game.imageId | gameImage" alt="Game Image" />
    </div>
    <div class="wrapper_info">
      <div class="wrapper_title">
        {{ game.name }}

        <div class="wrapper_description">Attempts: 2</div>
        <div class="wrapper_description">Reward: 2</div>
        <div class="wrapper_description">
          {{ game.description }}
        </div>
      </div>
      <div class="wrapper_right">
        <span class="material-symbols-outlined icon"> edit </span>
        <span class="material-symbols-outlined icon"> delete </span>
      </div>
    </div>
  </div>
</section>
