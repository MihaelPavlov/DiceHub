<app-header header="Club Space" [withBottomLine]="true"> </app-header>

<div class="wrapper_tabs" *ngIf="spaceActivityStats">
  <div class="wrapper_tabs__tab">
    <span class="wrapper_tabs__tab-header">People In Club</span>
    <div class="info">
      <svg class="icon" viewBox="0 -960 960 960">
        <path
          d="M44.85-154.38v-96.85q0-34.85 16.61-59.24t44.57-38.67q56.05-27.78 113.62-44.01 57.58-16.23 136.2-16.23 78.27 0 135.52 16.23 57.25 16.23 113.29 44.01 27.97 14.28 44.58 38.67t16.61 59.24v96.85h-621Zm706 0v-102.7q0-32.77-12.58-73.14-12.57-40.37-42.42-68.47 41.46 6 79.27 18.65 37.8 12.66 72.5 30.96 31.83 16.85 49.68 41.86 17.85 25.01 17.85 50.14v102.7h-164.3Zm-396-357.24q-61.05 0-104.53-43.47-43.47-43.48-43.47-104.53 0-61.05 43.47-104.52 43.48-43.48 104.53-43.48 61.05 0 104.52 43.48 43.48 43.47 43.48 104.52t-43.48 104.53q-43.47 43.47-104.52 43.47Zm375.77-148q0 61.05-43.48 104.53-43.47 43.47-104.52 43.47-6.54 0-19.47-1.57-12.92-1.58-19.46-4.27 22.33-30.9 33.24-67.09 10.92-36.19 10.92-75.16t-11.43-74.59q-11.42-35.62-32.73-67.47 9.23-3.15 19.46-4.5t19.47-1.35q61.05 0 104.52 43.48 43.48 43.47 43.48 104.52ZM110.85-220.38h489v-30.85q0-14.08-5.04-22.62-5.04-8.53-20.27-16.15-45.77-23.92-100.39-38.65-54.61-14.73-118.8-14.73-64.2 0-118.81 14.73-54.62 14.73-100.39 38.65-15.23 7.62-20.27 16.15-5.03 8.54-5.03 22.62v30.85Zm244.12-357.24q33.88 0 57.88-24.12t24-58q0-33.88-24.13-57.88-24.12-24-58-24-33.87 0-57.87 24.13-24 24.12-24 58 0 33.87 24.12 57.87t58 24Zm.88 357.24Zm-1-439.24Z"
        />
      </svg>
      <span class="info__count">{{
        spaceActivityStats.totalPeopleInSpace
      }}</span>
    </div>
  </div>
  <div class="wrapper_tabs__tab">
    <span class="wrapper_tabs__tab-header">Online tables</span>
    <div class="info">
      <svg class="icon" viewBox="0 -960 960 960">
        <path
          d="M236-128.77q-63.31 0-107.27-43.96Q84.77-216.69 84.77-280q0-63.31 43.96-107.27 43.96-43.96 107.27-43.96 63.31 0 107.27 43.96 43.96 43.96 43.96 107.27 0 63.31-43.96 107.27-43.96 43.96-107.27 43.96Zm488 0q-63.31 0-107.27-43.96-43.96-43.96-43.96-107.27 0-63.31 43.96-107.27 43.96-43.96 107.27-43.96 63.31 0 107.27 43.96 43.96 43.96 43.96 107.27 0 63.31-43.96 107.27-43.96 43.96-107.27 43.96Zm-487.97-66q35.82 0 60.51-24.72 24.69-24.72 24.69-60.54t-24.72-60.51q-24.72-24.69-60.54-24.69t-60.51 24.72q-24.69 24.72-24.69 60.54t24.72 60.51q24.72 24.69 60.54 24.69Zm488 0q35.82 0 60.51-24.72 24.69-24.72 24.69-60.54t-24.72-60.51q-24.72-24.69-60.54-24.69t-60.51 24.72q-24.69 24.72-24.69 60.54t24.72 60.51q24.72 24.69 60.54 24.69ZM480-536.77q-63.31 0-107.27-43.96-43.96-43.96-43.96-107.27 0-63.31 43.96-107.27 43.96-43.96 107.27-43.96 63.31 0 107.27 43.96 43.96 43.96 43.96 107.27 0 63.31-43.96 107.27-43.96 43.96-107.27 43.96Zm.03-66q35.82 0 60.51-24.72 24.69-24.72 24.69-60.54t-24.72-60.51q-24.72-24.69-60.54-24.69t-60.51 24.72q-24.69 24.72-24.69 60.54t24.72 60.51q24.72 24.69 60.54 24.69ZM480-688Zm244 408Zm-488 0Z"
        />
      </svg>
      <span class="info__count">{{
        spaceActivityStats.totalActiveTables
      }}</span>
    </div>
  </div>
</div>

<ng-container *ngIf="userActiveTableInfo as info">
  <div
    *ngIf="info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable"
    class="wrapper_active_table"
  >
    <p *ngIf="info.isPlayerHaveActiveTable" class="wrapper_active_table--text">
      {{ randomHostMessage }}
    </p>
    <p
      *ngIf="info.isPlayerParticipateInTable"
      class="wrapper_active_table--text"
    >
      {{ randomParticipantMessage }}
    </p>

    <p class="wrapper_active_table--text">{{ info.activeTableName }}</p>
    <button
      (click)="navigateToSpaceClubDetails(info.activeTableId)"
      class="btn btn__small btn-gray btn-font-blue btn-border-blue"
    >
      View Table
    </button>
  </div>

  <div class="wrapper_btns">
    <div class="btn_container">
      <div class="info">
        <span>Create Table</span>
        <span class="description"
          >Begin your adventure. Create a table if you're free and you are in
          the club!
        </span>
      </div>
      <div class="button">
        <button
          (click)="navigateToCreateTable()"
          [disabled]="
            info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
          "
          class="btn btn__small btn-gray"
          [ngClass]="{
            'btn-font-green btn-border-green': !(
              info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
            ),
            'btn-font-red btn-border-red':
              info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
          }"
        >
          Create
        </button>
      </div>
    </div>

    <div class="btn_container">
      <div class="info">
        <span>Join Table</span>
        <span class="description"
          >Jump into an ongoing game! Join a table if you're free and ready to
          play.</span
        >
      </div>
      <div class="button">
        <button
          (click)="navigateSpaceTableList()"
          [disabled]="
            info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
          "
          class="btn btn__small btn-gray"
          [ngClass]="{
            'btn-font-yellow btn-border-yellow': !(
              info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
            ),
            'btn-font-red btn-border-red':
              info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
          }"
        >
          Join
        </button>
      </div>
    </div>

    <div class="btn_container" *ngIf="!activeBookedTableModel">
      <div class="info">
        <span>Book Table</span>
        <span class="description"
          >Reserve your spot for a future game! Book a table and prepare for the
          fun.
        </span>
      </div>
      <div class="button">
        <button
          (click)="navigateSpaceTableBooking()"
          class="btn btn__small btn-gray"
          [disabled]="
            info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
          "
          [ngClass]="{
            'btn-font-blue btn-border-blue': !(
              info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
            ),
            'btn-font-red btn-border-red':
              info.isPlayerHaveActiveTable || info.isPlayerParticipateInTable
          }"
        >
          Book
        </button>
      </div>
    </div>

    <div class="btn_container-center" *ngIf="activeBookedTableModel">
      <div class="booked-info">
        <span
          >Your Reservation -

          <strong
            class="waiting"
            *ngIf="activeBookedTableModel.status === ReservationStatus.Pending"
            >Waiting</strong
          >
          <strong
            class="approved"
            *ngIf="activeBookedTableModel.status === ReservationStatus.Approved"
            >Approved</strong
          >
          <strong
            class="declined"
            *ngIf="activeBookedTableModel.status === ReservationStatus.Declined"
            >Declined</strong
          >
        </span>
        <strong
          class="description"
          *ngIf="activeBookedTableModel.status === ReservationStatus.Pending"
          >Waiting for confirmation — hang tight while we process your
          request.</strong
        >
        <strong
          class="description"
          *ngIf="activeBookedTableModel.status === ReservationStatus.Approved"
          >Your spot for a future game! Be prepared for the fun.</strong
        >
        <strong
          class="description"
          *ngIf="activeBookedTableModel.status === ReservationStatus.Declined"
        >
          Reservation declined — please try booking a different time.</strong
        >

        <span class="description-field" *ngFor="let item of getKeyValuePair()">
          {{ item.key }}: {{ item.value }}
        </span>
      </div>
      <div class="qr-info">
        <a
          class="wrapper_qrCode"
          *ngIf="
            this.activeBookedTableModel.status === ReservationStatus.Approved
          "
          (click)="openDialog()"
        >
          <img src="/shared/assets/images/qr-code.png" alt="" />
        </a>
        <p
          class="description-public-message"
          *ngIf="activeBookedTableModel.publicNote !== ''"
        >
          Message from Club: {{ activeBookedTableModel.publicNote }}
        </p>
      </div>
    </div>
  </div>
</ng-container>
