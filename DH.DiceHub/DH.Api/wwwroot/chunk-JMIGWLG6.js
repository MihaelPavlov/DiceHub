import{a as ie}from"./chunk-GCHHXTRN.js";import{a as ye,b as xt}from"./chunk-OR6DQMCE.js";import{b as be,c as Ot}from"./chunk-AF5TXU3F.js";import{a as yt,b as bt}from"./chunk-UV2HFFUQ.js";import{a as Mt}from"./chunk-IGE7THSU.js";import{a as ke}from"./chunk-ZNCIGRRM.js";import{a as he,b as fe,c as ue,d as Ce,e as ve}from"./chunk-257RNC4W.js";import{a as Pt,b as Et}from"./chunk-N5AFSSXM.js";import{a as Re}from"./chunk-B6POORFO.js";import{a as W,b as L,c as we}from"./chunk-4XCZJEOQ.js";import{a as j}from"./chunk-PQJ34A2R.js";import{a as V}from"./chunk-ELPMLOTJ.js";import{c as ne,d as St}from"./chunk-S4L6UGIL.js";import{$a as ct,Aa as q,Bc as ft,Ca as w,Ea as h,Ec as N,Fa as p,Gb as se,Gc as ut,Hb as O,Ib as le,Ja as Ae,Jb as ce,Jc as Ct,Kb as P,Kc as te,L as z,La as Se,Lb as gt,M as Ie,Ma as xe,Mb as me,Na as Oe,Nb as Fe,Nc as Ue,O as Y,Oc as _e,Pa as m,Pb as de,Pc as Q,Qa as J,Qb as _t,Qc as Z,Ra as S,Rb as pe,S as b,Sa as ot,Sc as vt,T as Le,Ua as at,Va as st,Vb as ge,Vc as wt,W as f,Wa as lt,Wb as ht,X as u,Y as v,Z as T,Za as qe,_a as U,a as He,ab as oe,bb as ae,cb as x,db as D,eb as R,fa as k,ia as l,j as nt,ja as g,kb as mt,la as rt,mb as Te,na as re,oa as C,ob as K,pb as G,qa as c,qb as X,rb as dt,s as Ee,tb as ee,u as it,ub as pt,wa as a,xa as o,y as Be,ya as d,yc as I,za as B}from"./chunk-JJGLVIRE.js";var Qe=function(e){return e[e.InProgress=0]="InProgress",e[e.Completed=1]="Completed",e[e.Locked=2]="Locked",e}(Qe||{});var Me=(()=>{let n=class n{constructor(t){this.api=t}getList(t=[]){return this.api.post(`/${N.CHALLENGES.CORE}/${N.CHALLENGES.LIST}`,{gameIds:t})}getById(t){return this.api.get(`/${N.CHALLENGES.CORE}/${t}`)}getUserChallengeList(){return this.api.get(`/${N.CHALLENGES.CORE}/${N.CHALLENGES.GET_USER_CHALLENGES}`)}getUserChallengePeriodPerformance(){return this.api.get(`/${N.CHALLENGES.CORE}/${N.CHALLENGES.GET_USER_CHALLENGE_PERIOD_PERFORMANCE}`)}add(t){return this.api.post(`/${N.CHALLENGES.CORE}`,He({},t))}update(t){return this.api.put(`/${N.CHALLENGES.CORE}`,He({},t))}delete(t){return this.api.delete(`/${N.CHALLENGES.CORE}/${t}`)}};n.\u0275fac=function(i){return new(i||n)(Y(ut))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var Zt=["rewardsScroller"],Wt=["pointsScroller"],$t=["progressContainer"],zt=["circleContainer"],Ne=(e,n,r)=>({opacity:e,minWidth:n,width:r}),Yt=e=>({"completed-img":e}),Jt=e=>({activated:e}),Kt=(e,n,r)=>({"in-progress":e,completed:n,locked:r});function Xt(e,n){e&1&&(B(0),a(1,"span",7),m(2," Your challenges are being generated."),d(3,"br"),m(4," Please check back in a few minutes! "),o(),q())}function en(e,n){if(e&1&&(a(0,"p",28),m(1),o()),e&2){let r=p(2);l(),S(" Score: ",r.periodPerformance.points," ")}}function tn(e,n){if(e&1&&(a(0,"div",29),d(1,"img",30),x(2,"entityImage"),x(3,"async"),o()),e&2){let r=n.$implicit,t=p(2);c("ngClass",U(7,Yt,r.isCompleted)),l(),c("src",D(3,5,R(2,2,t.ImageEntityType.Rewards,r.rewardImageId)),k)}}function nn(e,n){if(e&1&&(a(0,"div",31,3)(2,"div",32),m(3),o()()),e&2){let r=n.$implicit;l(2),c("ngClass",U(2,Jt,r.isCompleted)),l(),S(" ",r.rewardRequiredPoints," ")}}function rn(e,n){if(e&1&&(a(0,"div",33)(1,"div",34)(2,"div",35),d(3,"img",30),x(4,"entityImage"),x(5,"async"),o(),a(6,"div",36)(7,"span",37),m(8," Play "),a(9,"strong"),m(10),o(),m(11),o(),a(12,"div",38)(13,"span",39),m(14),o(),d(15,"div",40),a(16,"span",41),m(17),o()()()(),a(18,"div",42),d(19,"img",30),o()()),e&2){let r=n.$implicit,t=n.index,i=p(2);c("ngClass",oe(15,Kt,r.status===i.ChallengeStatus.InProgress,r.status===i.ChallengeStatus.Completed,r.status===i.ChallengeStatus.Locked)),l(3),c("src",D(5,13,R(4,10,i.ImageEntityType.Games,r.gameImageId)),k),l(7),J(r.gameName),l(),S(" ",r.maxAttempts," times "),l(3),ot("",r.currentAttempts," / ",r.maxAttempts,""),l(),Ae("id","progress-bar-",t,""),l(2),J(r.rewardPoints),l(2),c("src",r.status===i.ChallengeStatus.InProgress?"/shared/assets/images/challenge-inprogress.png":r.status===i.ChallengeStatus.Completed?"/shared/assets/images/challenge-complete.png":"/shared/assets/images/locked.png",k)}}function on(e,n){if(e&1){let r=w();B(0),a(1,"div",8)(2,"div",9),C(3,en,2,1,"p",10),a(4,"p",11)(5,"span"),m(6),x(7,"date"),o(),v(),a(8,"svg",12),d(9,"path",13),o(),T(),a(10,"span"),m(11),x(12,"date"),o()()(),a(13,"div",14),v(),a(14,"svg",15),h("click",function(){f(r);let i=p();return u(i.rewardsScrollLeft())}),d(15,"path",16),o(),T(),a(16,"div",17,0)(18,"div",18),C(19,tn,4,9,"div",19),o()(),v(),a(20,"svg",20),h("click",function(){f(r);let i=p();return u(i.rewardsScrollRight())}),d(21,"path",16),o()(),T(),a(22,"div",21)(23,"div",22),v(),a(24,"svg",15),h("click",function(){f(r);let i=p();return u(i.pointsScrollLeft())}),d(25,"path",16),o(),T(),a(26,"div",17,1)(28,"div",23,2),d(30,"div",24),C(31,nn,4,4,"div",25),o()(),v(),a(32,"svg",20),h("click",function(){f(r);let i=p();return u(i.pointsScrollRight())}),d(33,"path",16),o()()()(),T(),a(34,"div",26),C(35,rn,20,19,"div",27),o(),q()}if(e&2){let r=p();l(3),c("ngIf",r.periodPerformance),l(3),J(R(7,10,r.periodPerformance.startDate,r.DATE_FORMAT)),l(5),J(R(12,13,r.periodPerformance.endDate,r.DATE_FORMAT)),l(3),c("ngStyle",oe(16,Ne,r.rewardScrollArrowsOpacity,r.rewardScrollArrowsWidth+"rem",r.rewardScrollArrowsWidth+"rem")),l(5),c("ngForOf",r.userChallengePeriodRewardList),l(),c("ngStyle",oe(20,Ne,r.rewardScrollArrowsOpacity,r.rewardScrollArrowsWidth+"rem",r.rewardScrollArrowsWidth+"rem")),l(4),c("ngStyle",oe(24,Ne,r.pointsScrollArrowsOpacity,r.pointsScrollArrowsWidth+"rem",r.pointsScrollArrowsWidth+"rem")),l(7),c("ngForOf",r.userChallengePeriodRewardList),l(),c("ngStyle",oe(28,Ne,r.pointsScrollArrowsOpacity,r.pointsScrollArrowsWidth+"rem",r.pointsScrollArrowsWidth+"rem")),l(3),c("ngForOf",r.userChallengeList)}}var Lt=(()=>{let n=class n{constructor(t,i,s,_){this.rewardsService=t,this.challengeService=i,this.cd=s,this.renderer=_,this.scrollArrowWidth=2.5,this.rewardScrollArrowsOpacity=1,this.rewardScrollArrowsWidth=this.scrollArrowWidth,this.pointsScrollArrowsOpacity=1,this.pointsScrollArrowsWidth=this.scrollArrowWidth,this.userChallengeList=[],this.ChallengeStatus=Qe,this.ImageEntityType=Q,this.DATE_FORMAT=vt.DATE_FORMAT,this.columns=[{name:"Weekly",link:L.CHALLENGES.CHALLENGES_HOME,isActive:!0},{name:"Rewards",link:L.CHALLENGES.CHALLENGES_REWARDS,isActive:!1}],this.rewardsScrolling=!1,this.pointsScrolling=!1}ngOnDestroy(){this.rewardsListener&&this.rewardsListener(),this.pointsListener&&this.pointsListener()}initProgressContainerWidth(){console.log("progressContainer",this.progressContainer);let t=this.circles.length;if(console.log("numberOfCircles",t),t>0){let i=4*t;console.log("circle width -> ",i),this.progressContainer.nativeElement.style.width=`${i}rem`}}ngOnInit(){this.challengeService.getUserChallengePeriodPerformance().subscribe({next:t=>{this.periodPerformance=t,this.periodPerformance&&it([this.challengeService.getUserChallengeList(),this.rewardsService.getUserChallengePeriodRewardList(this.periodPerformance.id)]).subscribe({next:([i,s])=>{this.userChallengeList=i,this.userChallengePeriodRewardList=s,this.cd.detectChanges(),this.updateChallengesProgressBar(),this.updateRewardProgressBar(),this.initProgressContainerWidth(),this.resetRewardsInactivityTimer(),this.resetPointsInactivityTimer(),this.rewardsScroller&&(this.rewardsListener=this.renderer.listen(this.rewardsScroller.nativeElement,"scroll",()=>{this.rewardsScrolling||(this.rewardsScrolling=!0,this.resetRewardsInactivityTimer())})),this.pointsScroller&&(this.pointsListener=this.renderer.listen(this.pointsScroller.nativeElement,"scroll",()=>{this.pointsScrolling||(this.pointsScrolling=!0,this.resetPointsInactivityTimer())}))}})}})}resetRewardsInactivityTimer(){this.inactivityRewardsTimer?.unsubscribe(),this.rewardScrollArrowsOpacity=1,this.rewardScrollArrowsWidth=this.scrollArrowWidth,this.inactivityRewardsTimer=Be(3e3).subscribe(()=>{this.rewardScrollArrowsOpacity=.5,this.rewardScrollArrowsWidth=1,this.rewardsScrolling=!1})}resetPointsInactivityTimer(){this.inactivityPointsTimer?.unsubscribe(),this.pointsScrollArrowsOpacity=1,this.pointsScrollArrowsWidth=this.scrollArrowWidth,this.inactivityPointsTimer=Be(3e3).subscribe(()=>{this.pointsScrollArrowsOpacity=.5,this.pointsScrollArrowsWidth=1,this.pointsScrolling=!1})}rewardsScrollLeft(){this.resetRewardsInactivityTimer(),this.rewardsScroller.nativeElement.scrollBy({left:-150,behavior:"smooth"})}rewardsScrollRight(){this.resetRewardsInactivityTimer(),this.rewardsScroller.nativeElement.scrollBy({left:150,behavior:"smooth"})}pointsScrollLeft(){this.resetPointsInactivityTimer(),this.pointsScroller.nativeElement.scrollBy({left:-150,behavior:"smooth"})}pointsScrollRight(){this.resetPointsInactivityTimer(),this.pointsScroller.nativeElement.scrollBy({left:150,behavior:"smooth"})}updateChallengesProgressBar(){this.userChallengeList.forEach((t,i)=>{let s=t.currentAttempts/t.maxAttempts*100,_=document.getElementById(`progress-bar-${i}`),M=document.createElement("style");M.textContent=`
        @keyframes custom-load-${i} {
          0% {
            width: 0%;
          }
          100% {
            width: ${s}%;
          }
        }
      `,document.head.appendChild(M),_.style.animation=`custom-load-${i} 3s normal forwards`})}updateRewardProgressBar(){let t=document.getElementById("progress"),i=document.querySelectorAll(".circle"),s=this.userChallengePeriodRewardList.filter(M=>M.isCompleted).length;i.forEach((M,H)=>{H<s?(M.classList.add("activated"),M.innerHTML=`
          <img class="_img"
          src="/shared/assets/images/challenge-complete.png"
          alt=""
          />`,M.classList.add("_img")):M.classList.remove("activated")});let _=document.querySelectorAll(".activated");console.log("activated circles --- >",_),t&&i.length>1&&(console.log((_.length-1)/(i.length-1)*100+"%"),t.style.width=(_.length-1)/(i.length-1)*100+"%")}};n.\u0275fac=function(i){return new(i||n)(g(ie),g(Me),g(mt),g(rt))},n.\u0275cmp=b({type:n,selectors:[["app-challenges-management"]],viewQuery:function(i,s){if(i&1&&(Se(Zt,5),Se(Wt,5),Se($t,5),Se(zt,5)),i&2){let _;xe(_=Oe())&&(s.rewardsScroller=_.first),xe(_=Oe())&&(s.pointsScroller=_.first),xe(_=Oe())&&(s.progressContainer=_.first),xe(_=Oe())&&(s.circles=_)}},decls:4,vars:4,consts:[["rewardsScroller",""],["pointsScroller",""],["progressContainer",""],["circleContainer",""],["header","Challenges",3,"withQRcode"],[3,"columns"],[4,"ngIf"],[1,"no-period"],[1,"wrapper_stats"],[1,"wrapper_score"],["class","score",4,"ngIf"],[1,"dates"],["viewBox","0 -960 960 960",1,"icon"],["d","M280-280 80-480l200-200 56 56-103 104h494L624-624l56-56 200 200-200 200-56-56 103-104H233l103 104-56 56Z"],[1,"wrapper_scroller"],["viewBox","0 -960 960 960",1,"arrow","left",3,"click","ngStyle"],["d","M332-234.31v-491.38L720.15-480 332-234.31ZM398-480Zm0 124 197.54-124L398-604v248Z"],[1,"scroller"],[1,"wrapper_stats__items"],["class","item",3,"ngClass",4,"ngFor","ngForOf"],["viewBox","0 -960 960 960",1,"arrow",3,"click","ngStyle"],[1,"wrapper_stats__bar"],[1,"wrapper_progress_scroller"],[1,"progress-container"],["id","progress",1,"progress"],["class","circle_container",4,"ngFor","ngForOf"],[1,"wrapper_challenges"],["class","wrapper_challenges__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"score"],[1,"item",3,"ngClass"],["alt","",3,"src"],[1,"circle_container"],[1,"circle",3,"ngClass"],[1,"wrapper_challenges__item",3,"ngClass"],[1,"image_info_container"],[1,"image"],[1,"info"],[1,"header"],[1,"bar-2"],[1,"bar-2-span"],[1,"bar-2-value",3,"id"],[1,"points"],[1,"status-image"]],template:function(i,s){i&1&&(a(0,"app-header",4),d(1,"app-nav-bar",5),o(),C(2,Xt,5,0,"ng-container",6)(3,on,36,32,"ng-container",6)),i&2&&(c("withQRcode",!0),l(),c("columns",s.columns),l(),c("ngIf",!s.periodPerformance),l(),c("ngIf",s.periodPerformance&&s.userChallengePeriodRewardList))},dependencies:[K,G,X,dt,ne,ye,ee,pt,Z],styles:['.no-period[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:1.2rem;text-align:center;margin:0 auto;margin-top:6rem;width:80%}.wrapper_score[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{display:flex;font-size:1rem;justify-content:center}.wrapper_score[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;color:#75a0ff;align-items:center}.wrapper_score[_ngcontent-%COMP%]   .dates[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:2rem;fill:#9b9b9b}.wrapper_stats[_ngcontent-%COMP%]{background-color:#31313b;margin:1rem 0;display:flex;justify-content:center;flex-direction:column;padding:.5rem}.wrapper_stats[_ngcontent-%COMP%]   .wrapper_scroller[_ngcontent-%COMP%]{display:flex;justify-content:center}.wrapper_stats[_ngcontent-%COMP%]   .wrapper_progress_scroller[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}.wrapper_stats[_ngcontent-%COMP%]   .scroller[_ngcontent-%COMP%]{overflow-x:auto;display:flex;justify-content:space-around}.wrapper_stats[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{transform:rotate(180deg)}.wrapper_stats[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{min-width:2.5rem;width:2.5rem;fill:#fff;display:flex;align-items:center;transition:opacity .3s ease-in-out,width .3s ease-in-out,min-width .3s ease-in-out;will-change:opacity,width}.wrapper_stats[_ngcontent-%COMP%]   .scroller[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.wrapper_stats__items[_ngcontent-%COMP%]{display:flex}.wrapper_stats__items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#31313b;border:.1rem solid #ffffff;border-radius:.5rem;width:3rem;height:3rem;display:flex;justify-content:center;flex-direction:column;align-items:center;margin:.5rem}.wrapper_stats__items[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:fill;width:2.5rem;height:2.5rem}.wrapper_stats__items[_ngcontent-%COMP%]   .completed-img[_ngcontent-%COMP%]{opacity:.5}.wrapper_stats__bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;--line-border-fill: #3498db;--line-border-empty: black}.wrapper_stats__bar[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]:before{content:"";background-color:#20232a;position:absolute;top:50%;left:0;transform:translateY(-50%);height:.5rem;width:100%;z-index:1;border:.1rem solid white}.wrapper_stats__bar[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;position:relative;width:17rem}.wrapper_stats__bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background-color:var(--line-border-fill);position:absolute;top:50%;left:0;transform:translateY(-50%);height:.5rem;width:0%;z-index:1;transition:2s ease;border:.1rem solid white}.wrapper_stats__bar[_ngcontent-%COMP%]   .circle_container[_ngcontent-%COMP%]{z-index:3;margin:0 1rem;align-items:center;display:flex}.wrapper_stats__bar[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background:#20232a;color:#fff;font-size:.7rem;border-radius:50%;height:1.5rem;width:1.5rem;display:flex;align-items:center;justify-content:center;border:.1rem solid white;transition:.4s ease;z-index:3}.wrapper_stats__bar[_ngcontent-%COMP%]   .circle.activated[_ngcontent-%COMP%]{border:.2rem solid white}.wrapper_challenges[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10rem}.wrapper_challenges[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]{opacity:.5}.wrapper_challenges__item[_ngcontent-%COMP%]{display:flex;margin:.5rem 1rem;border-radius:1rem;background-color:#31313b}.wrapper_challenges__item[_ngcontent-%COMP%]   .image_info_container[_ngcontent-%COMP%]{display:flex;width:80%}.wrapper_challenges__item[_ngcontent-%COMP%]   .status-image[_ngcontent-%COMP%]{display:flex;width:20%;justify-content:center;position:relative;align-items:center}.wrapper_challenges__item[_ngcontent-%COMP%]   .status-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem;object-fit:cover;border-radius:5rem}.wrapper_challenges__item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;justify-content:start;margin:.5rem .75rem .5rem 1rem;text-align:center;align-items:center}.wrapper_challenges__item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;object-fit:cover;border-radius:5rem;border:.1rem solid #20232a}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;position:relative;width:110%}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-top:.75rem;word-break:break-all;width:100%}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .bar-2[_ngcontent-%COMP%]{margin-top:.25rem;background:#ffffff1a;justify-content:flex-start;border-radius:5rem;align-items:center;position:relative;display:flex;height:1rem;width:11rem;margin-bottom:.7rem;width:100%}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .bar-2-span[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .bar-2-value[_ngcontent-%COMP%]{animation:load 3s normal forwards;box-shadow:0 10px 40px -10px #75a0ff;border-radius:5rem;background:#75a0ff;height:1rem;width:0%}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{background:#20232a;color:#fff;font-size:.7rem;border-radius:50%;height:1.5rem;width:1.5rem;display:flex;align-items:center;justify-content:center;border:.1rem solid white;transition:.4s ease;z-index:3;position:absolute;left:100%;top:50%;transform:translate(-50%,-50%)}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .points.active[_ngcontent-%COMP%]{border:.2rem solid white}[_nghost-%COMP%]     ._img{object-fit:fill;width:1.5rem;height:1.5rem}']});let e=n;return e})();var Ye=function(e){return e[e.Used=0]="Used",e[e.Expired=1]="Expired",e[e.NotExpired=2]="NotExpired",e}(Ye||{});var At=(()=>{let n=class n{constructor(t,i){this.data=t,this.dialogRef=i}serializeData(){return JSON.stringify(this.data)}};n.\u0275fac=function(i){return new(i||n)(g(fe),g(he))},n.\u0275cmp=b({type:n,selectors:[["user-reward-qr-code-dialog"]],decls:8,vars:5,consts:[[1,"dialog-container"],["mat-dialog-close","","viewBox","0 -960 960 960",1,"close-icon"],["d","m334-287.69 146-146 146 146L672.31-334l-146-146 146-146L626-672.31l-146 146-146-146L287.69-626l146 146-146 146L334-287.69ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],[1,"dialog-container__header","m-4"],[1,"qrcodeImage"],[1,"demoBorderRadius",3,"qrdata","width","margin","scale","errorCorrectionLevel"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"mat-dialog-actions"),v(),a(2,"svg",1),d(3,"path",2),o()(),T(),a(4,"h3",3),m(5,"Reward"),o(),a(6,"div",4),d(7,"qrcode",5),o()()),i&2&&(l(7),c("qrdata",s.serializeData())("width",200)("margin",4)("scale",128)("errorCorrectionLevel","M"))},dependencies:[yt,ve,Ce],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b;position:relative}.dialog-container__header[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;text-align:center}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end;position:absolute;right:0}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{fill:#fff;width:2rem;height:2rem}.qrcodeImage[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.demoBorderRadius[_ngcontent-%COMP%]{border-radius:1.2rem;margin-bottom:1rem;overflow:hidden}"]});let e=n;return e})();var an=()=>({name:"Weekly",link:"challenges/home",isActive:!1}),sn=()=>({name:"Rewards",link:"challenges/rewards",isActive:!0}),ln=(e,n)=>[e,n],cn=e=>({completed:e});function mn(e,n){if(e&1){let r=w();a(0,"div",6),m(1," No rewards yet!"),d(2,"br"),m(3," Visit the club and start completing "),a(4,"strong",7),h("click",function(){f(r);let i=p(2);return u(i.navigateToChallenges())}),m(5,"challenges"),o(),m(6," to earn them. "),o()}}function dn(e,n){if(e&1){let r=w();a(0,"div",15)(1,"button",16),h("click",function(){f(r);let i=p().$implicit,s=p(2);return u(s.openDialog(i.id))}),m(2," Use "),o()()}}function pn(e,n){e&1&&(a(0,"div",15)(1,"button",17),m(2,"Used"),o()())}function gn(e,n){e&1&&(a(0,"div",15)(1,"button",18),m(2,"Expired"),o()())}function _n(e,n){if(e&1&&(a(0,"div",8)(1,"div",9),d(2,"img",10),x(3,"entityImage"),x(4,"async"),o(),a(5,"div",11)(6,"span",12),m(7),o(),a(8,"span"),m(9),o(),a(10,"span",12),m(11,"Available more: "),d(12,"app-chip",13),o()(),C(13,dn,3,0,"div",14)(14,pn,3,0,"div",14)(15,gn,3,0,"div",14),o()),e&2){let r=n.$implicit,t=p(2);c("ngClass",U(16,cn,r.status!==t.UserRewardStatus.NotExpired)),l(2),c("src",D(4,14,R(3,11,t.ImageEntityType.Rewards,r.rewardImageId)),k),l(5),J(r.rewardName),l(2),J(r.rewardDescription),l(3),Ae("text","",r.availableMoreForDays," DAYS"),c("size","small")("color","blue"),l(),c("ngIf",r.status===t.UserRewardStatus.NotExpired),l(),c("ngIf",r.status===t.UserRewardStatus.Used),l(),c("ngIf",r.status===t.UserRewardStatus.Expired)}}function hn(e,n){if(e&1&&(a(0,"div",3),C(1,mn,7,0,"div",4)(2,_n,16,18,"div",5),o()),e&2){let r=n.ngIf;l(),c("ngIf",r.length===0),l(),c("ngForOf",r)}}var Ft=(()=>{let n=class n{constructor(t,i,s,_){this.rewardsService=t,this.authService=i,this.dialog=s,this.router=_,this.UserRewardStatus=Ye,this.ImageEntityType=Q}ngOnInit(){this.userRewards$=this.rewardsService.getUserRewardList()}navigateToChallenges(){this.router.navigateByUrl("challenges/home")}openDialog(t){this.dialog.open(At,{width:"17rem",data:{Id:t,Name:"UserReward",Type:Mt.Reward,AdditionalData:{userId:this.authService.getUser?.id}}})}};n.\u0275fac=function(i){return new(i||n)(g(ie),g(_e),g(ue),g(te))},n.\u0275cmp=b({type:n,selectors:[["app-challenges-rewards"]],decls:4,vars:10,consts:[["header","Challenges",3,"withQRcode"],[3,"columns"],["class","wrapper_challenges",4,"ngIf"],[1,"wrapper_challenges"],["class","no-records",4,"ngIf"],["class","wrapper_challenges__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"no-records"],[1,"blue",3,"click"],[1,"wrapper_challenges__item",3,"ngClass"],[1,"image"],["alt","",3,"src"],[1,"info"],[1,"header"],[3,"size","text","color"],["class","btn-container",4,"ngIf"],[1,"btn-container"],[1,"btn","btn__small","btn-blue",3,"click"],[1,"btn","btn__extra-small","btn-green"],[1,"btn","btn__extra-small","btn-red"]],template:function(i,s){i&1&&(a(0,"app-header",0),d(1,"app-nav-bar",1),o(),C(2,hn,3,2,"div",2),x(3,"async")),i&2&&(c("withQRcode",!0),l(),c("columns",ct(7,ln,qe(5,an),qe(6,sn))),l(),c("ngIf",D(3,3,s.userRewards$)))},dependencies:[K,G,X,ne,ye,Pt,ee,Z],styles:[".no-records[_ngcontent-%COMP%]{font-size:1.2rem;text-align:center;margin:0 auto;margin-top:6rem;width:80%}.blue[_ngcontent-%COMP%]{color:#75a0ff}.wrapper_challenges[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:.5rem;margin-bottom:10rem;align-items:center;width:100%}.wrapper_challenges[_ngcontent-%COMP%]   .completed[_ngcontent-%COMP%]{opacity:.5}.wrapper_challenges__item[_ngcontent-%COMP%]{display:flex;margin:.5rem 1rem;border-radius:1rem;background-color:#31313b;width:90%}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:column;justify-content:center;margin:.5rem 0}.wrapper_challenges__item[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:.1rem 0}.wrapper_challenges__item[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:end;align-items:center;margin:0 .5rem}.wrapper_challenges__item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;justify-content:start;margin:.5rem .75rem .5rem 1rem;text-align:center;align-items:center}.wrapper_challenges__item[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;object-fit:cover;border-radius:5rem}"]});let e=n;return e})();var kt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-history-log"]],decls:2,vars:0,template:function(i,s){i&1&&(a(0,"span"),m(1,"history-log"),o())}});let e=n;return e})();var Rt=(()=>{let n=class n{constructor(t,i,s,_){this.data=t,this.dialogRef=i,this.challengesService=s,this.toastService=_}delete(){this.challengesService.delete(this.data.id).subscribe(t=>{this.toastService.success({message:"Deleted",type:I.Success}),this.dialogRef.close(!0)})}};n.\u0275fac=function(i){return new(i||n)(g(fe),g(he),g(Me),g(V))},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-confirm-delete-dialog"]],decls:8,vars:0,consts:[[1,"dialog-container"],[1,"dialog-container__header","m-4"],["mat-dialog-close","",1,"btn","btn__small","btn-blue"],[1,"btn","btn__small","btn-red","btn-border-red",3,"click"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"h3",1),m(2,"Are you Sure?"),o(),a(3,"mat-dialog-actions")(4,"button",2),m(5,"Cancel"),o(),a(6,"button",3),h("click",function(){return s.delete()}),m(7," Delete "),o()()())},dependencies:[ve,Ce],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container__header[_ngcontent-%COMP%]{margin:1rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let e=n;return e})();var Ke=function(e){return e[e.Daily=0]="Daily",e[e.Weekly=1]="Weekly",e[e.Monthly=2]="Monthly",e}(Ke||{});var Xe=function(e){return e[e.Five=5]="Five",e[e.Ten=10]="Ten",e[e.Fifteen=15]="Fifteen",e[e.Twenty=20]="Twenty",e}(Xe||{});var Ve=(()=>{let n=class n{scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};n.\u0275fac=function(i){return new(i||n)},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var un=(e,n,r,t)=>({"btn-border-green":e,"btn-font-green":n,"btn-border-red":r,"btn-font-red":t}),Cn=(e,n,r,t)=>({"btn-border-yellow":e,"btn-font-yellow":n,"btn-border-red":r,"btn-font-red":t}),vn=e=>({"wrapper_library__item-active":e});function wn(e,n){e&1&&(v(),a(0,"svg",11),d(1,"path",12),o())}function yn(e,n){if(e&1&&(B(0),a(1,"span"),m(2,"Add Challenge"),o(),C(3,wn,2,0,"svg",4),q()),e&2){let r=p();l(3),c("ngIf",!r.showChallengeForm)}}function bn(e,n){e&1&&(B(0),a(1,"span"),m(2,"Update Challenge"),o(),q())}function Mn(e,n){e&1&&(v(),a(0,"svg",11),d(1,"path",13),o())}function Sn(e,n){if(e&1&&(a(0,"span"),m(1),o()),e&2){let r=p();l(),S("Selected Games: ",r.filterGameIds.length,"")}}function xn(e,n){e&1&&(a(0,"span"),m(1,"Filter By Game"),o())}function On(e,n){e&1&&(v(),a(0,"svg",14),d(1,"path",15),o())}function Pn(e,n){e&1&&(v(),a(0,"svg",14),d(1,"path",13),o())}function En(e,n){if(e&1){let r=w();a(0,"div",16)(1,"ng-select",17),lt("ngModelChange",function(i){f(r);let s=p();return st(s.filterGameIds,i)||(s.filterGameIds=i),u(i)}),h("change",function(){f(r);let i=p();return u(i.fetchChallengeList())}),o()()}if(e&2){let r=p();l(),c("items",r.gameList)("searchable",!0)("multiple",!0)("closeOnSelect",!1),at("ngModel",r.filterGameIds)}}function In(e,n){if(e&1&&(a(0,"div",37),m(1),o()),e&2){let r=p(2);l(),S(" ",r.getFirstErrorMessage()," ")}}function Ln(e,n){if(e&1){let r=w();a(0,"button",38),h("click",function(){f(r);let i=p(2);return u(i.onAddChallenge())}),m(1," Create "),o()}if(e&2){let r=p(2);c("disabled",r.form.invalid)("ngClass",ae(2,un,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function An(e,n){if(e&1){let r=w();a(0,"button",38),h("click",function(){f(r);let i=p(2);return u(i.onUpdateChallenge())}),m(1," Update "),o()}if(e&2){let r=p(2);c("disabled",r.form.invalid)("ngClass",ae(2,Cn,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function Tn(e,n){if(e&1){let r=w();a(0,"form",18)(1,"div",19)(2,"div",20),v(),a(3,"svg",21),h("click",function(){f(r);let i=p();return u(i.toggleChallengeForm())}),d(4,"path",13),o()(),T(),a(5,"div",22)(6,"div",23)(7,"div",24)(8,"div",16)(9,"label",25),m(10,"Choose Game"),o(),d(11,"ng-select",26),o(),a(12,"div",16)(13,"label",27),m(14,"Points"),o(),d(15,"ng-select",28),o()(),a(16,"div",24)(17,"div",16)(18,"label",29),m(19,"Attempts"),o(),d(20,"input",30),o(),a(21,"div",16)(22,"label",31),m(23,"Type"),o(),d(24,"ng-select",32),o()(),a(25,"div",16)(26,"label",33),m(27,"Description"),o(),d(28,"input",34),o()()(),C(29,In,2,1,"div",35)(30,Ln,2,7,"button",36)(31,An,2,7,"button",36),o()()}if(e&2){let r=p();c("formGroup",r.form),l(11),c("items",r.gameList)("searchable",!0),l(4),c("items",r.challengeRewardPointList)("searchable",!0),l(9),c("items",r.challengeTypeList)("searchable",!0),l(5),c("ngIf",r.getFirstErrorMessage()),l(),c("ngIf",!r.editChallengeId),l(),c("ngIf",r.editChallengeId)}}function Fn(e,n){if(e&1){let r=w();a(0,"div",39)(1,"div",40),d(2,"img",41),x(3,"entityImage"),x(4,"async"),o(),a(5,"div",42)(6,"div",43),m(7),a(8,"div",44),m(9),o(),a(10,"div",44),m(11),o(),a(12,"div",44),m(13),o()(),a(14,"div",45),v(),a(15,"svg",46),h("click",function(){let i=f(r).$implicit,s=p();return u(s.fillEditChallengeForm(i.id))}),d(16,"path",47),o(),a(17,"svg",46),h("click",function(){let i=f(r).$implicit,s=p();return u(s.openDeleteDialog(i.id))}),d(18,"path",48),o()()()()}if(e&2){let r=n.$implicit,t=p();c("ngClass",U(11,vn,t.editChallengeId===r.id)),l(2),c("src",D(4,9,R(3,6,t.ImageEntityType.Games,r.gameImageId)),k),l(5),S(" ",r.type," "),l(2),S(" Attempts: ",r.attempts," "),l(2),S(" Reward: ",r.rewardPoints," "),l(2),S(" ",r.description," ")}}var Vt=(()=>{let n=class n extends we{constructor(t,i,s,_,M,H,je){super(t),this.toastService=t,this.gameService=i,this.challengesService=s,this.fb=_,this.location=M,this.dialog=H,this.scrollService=je,this.gameList=[],this.games=[],this.showChallengeForm=!1,this.showFilter=!1,this.editChallengeId=null,this.challengeList=[],this.filterGameIds=[],this.challengeTypeList=[],this.challengeRewardPointList=[],this.ImageEntityType=Q,this.fetchGameList(),this.fetchChallengeList(),this.challengeTypeList=Object.entries(Ke).filter(([A,F])=>typeof F=="number").map(([A,F])=>({id:F,name:A})),this.challengeRewardPointList=Object.entries(Xe).filter(([A,F])=>typeof F=="number").map(([A,F])=>({id:F,name:F.toString()})),this.gameService.getList("").subscribe({next:A=>this.games=A??[],error:A=>{console.log(A)}}),this.form=this.initFormGroup()}openDeleteDialog(t){this.dialog.open(Rt,{data:{id:t}}).afterClosed().subscribe(s=>{s&&(this.fetchChallengeList(),this.showChallengeForm&&this.toggleChallengeForm())})}toggleFilter(){this.showFilter=!this.showFilter}toggleChallengeForm(t=!1){this.showChallengeForm=!this.showChallengeForm,t||(this.form.reset(),this.editChallengeId=null)}backNavigateBtn(){this.location.back()}fillEditChallengeForm(t){this.editChallengeId=t,this.challengesService.getById(t).subscribe({next:i=>{this.form.patchValue({description:i.description,selectedGame:i.gameId,attempts:i.attempts,rewardPoints:i.rewardPoints,type:i.type}),this.showChallengeForm=!0,this.scrollService.scrollToTop()},error:i=>{this.editChallengeId=null,Ee(()=>i)}})}onAddChallenge(){this.form.valid&&this.challengesService.add({gameId:this.form.controls.selectedGame.value,rewardPoints:this.form.controls.rewardPoints.value,description:this.form.controls.description.value,attempts:this.form.controls.attempts.value,type:this.form.controls.type.value}).subscribe({next:t=>{this.toastService.success({message:j.ChangesSaved,type:I.Success}),this.fetchChallengeList(),this.toggleChallengeForm()},error:t=>{this.handleServerErrors(t),this.toastService.error({message:j.FailedToSaveChanges,type:I.Error})}})}onUpdateChallenge(){this.form.valid&&this.editChallengeId&&this.challengesService.update({id:this.editChallengeId,gameId:this.form.controls.selectedGame.value,rewardPoints:this.form.controls.rewardPoints.value,description:this.form.controls.description.value,attempts:this.form.controls.attempts.value,type:this.form.controls.type.value}).subscribe({next:t=>{this.toastService.success({message:j.ChangesSaved,type:I.Success}),this.fetchChallengeList(),this.toggleChallengeForm()},error:t=>{this.handleServerErrors(t),this.toastService.error({message:j.FailedToSaveChanges,type:I.Error})}})}fetchChallengeList(){this.challengesService.getList(this.filterGameIds.map(t=>t.id)).subscribe({next:t=>{this.challengeList=t??[]},error:t=>{console.log(t)}})}getControlDisplayName(t){switch(t){case"selectedGame":return"Game";case"description":return"Description";case"attempts":return"Attempts";case"rewardPoints":return"Reward Points";case"type":return"Type";default:return t}}fetchGameList(){this.gameService.getDropdownList().subscribe({next:t=>{this.gameList=t??[]},error:t=>{console.log(t)}})}initFormGroup(){return this.fb.group({selectedGame:new P(null,[O.required]),rewardPoints:new P(0,[O.required]),attempts:new P(0,[O.required]),type:new P(null,[O.required]),description:new P("",[O.required,O.minLength(5),O.maxLength(50)])})}};n.\u0275fac=function(i){return new(i||n)(g(V),g(Re),g(Me),g(ge),g(Te),g(ue),g(Ve))},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-list"]],features:[re],decls:19,vars:11,consts:[[1,"container"],[1,"buttons"],[1,"btn-container",3,"click"],[4,"ngIf"],["class","wrapper_add","viewBox","0 -960 960 960",4,"ngIf"],[1,"btn-container"],["class","wrapper_filter","viewBox","0 -960 960 960",4,"ngIf"],["class","input-field",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"wrapper_library"],["class","wrapper_library__item",3,"ngClass",4,"ngFor","ngForOf"],["viewBox","0 -960 960 960",1,"wrapper_add"],["d","M447-448H208v-66h239v-239h66v239h239v66H513v239h-66v-239Z"],["d","M252-203.69 205.69-252l227-228-227-230L252-758.31l229 230 227-230L754.31-710l-227 230 227 228L708-203.69l-227-230-229 230Z"],["viewBox","0 -960 960 960",1,"wrapper_filter"],["d","M470.77-176q-20.15 0-35.46-14.31Q420-204.62 420-224.77v-221.08L204.15-720.77q-16.07-19.77-5.19-41.5Q209.85-784 234.77-784h490.46q24.92 0 35.81 21.73 10.88 21.73-5.19 41.5L540-445.85v227.08q0 19.15-12.81 30.96Q514.38-176 495.23-176h-24.46ZM480-478l188-240H292l188 240Zm0 0Z"],[1,"input-field"],["bindLabel","name","placeholder","Select Game",1,"app-select-long",3,"ngModelChange","change","items","searchable","multiple","closeOnSelect","ngModel"],[3,"formGroup"],[1,"reward-container"],[1,"close-container"],["viewBox","0 -960 960 960",1,"input-remove",3,"click"],[1,"wrapper"],[1,"inputs"],[1,"input-group"],["for","game",1,"required"],["bindLabel","name","bindValue","id","placeholder","Select Game","formControlName","selectedGame",1,"app-select",3,"items","searchable"],["for","rewardPoints",1,"required"],["bindLabel","name","bindValue","id","placeholder","...","formControlName","rewardPoints",1,"app-select-long",3,"items","searchable"],["for","attempts",1,"required"],["name","attempts","placeholder","...","type","number","formControlName","attempts"],["for","type",1,"required"],["bindValue","id","bindLabel","name","placeholder","Type","formControlName","type",1,"app-select",3,"items","searchable"],["for","description",1,"required"],["name","description","placeholder","description","type","text","formControlName","description"],["class","errors",4,"ngIf"],["type","button","class","btn btn-gray create-btn",3,"disabled","ngClass","click",4,"ngIf"],[1,"errors"],["type","button",1,"btn","btn-gray","create-btn",3,"click","disabled","ngClass"],[1,"wrapper_library__item",3,"ngClass"],[1,"wrapper_image"],["alt","Game Image",3,"src"],[1,"wrapper_info"],[1,"wrapper_title"],[1,"wrapper_description"],[1,"wrapper_right"],["viewBox","0 -960 960 960",1,"icon",3,"click"],["d","M194-194h43.92l407.93-407.92-43.93-42.93L194-236.92V-194Zm-66 66v-136.77l557.23-558.77q5.15-5.48 11.57-6.97 6.43-1.49 12.49-1.49 6.06 0 11.12.54 5.05.54 11.44 6.15l92.69 91.93q5.61 6.38 6.54 12 .92 5.63.92 12.25 0 6.13-1.74 12.06-1.74 5.92-6.72 11.07L264.77-128H128Zm626.77-581.31-45.46-44.46 45.46 44.46ZM624.5-623.5l-22.58-21.35 43.93 42.93-21.35-21.58Z"],["d","M300.62-128q-38.85 0-64.74-25.88Q210-179.77 210-218.62V-724h-40v-66h188v-38.77h246V-790h188v66h-40v505.38q0 38.35-26.14 64.48Q699.73-128 661.38-128H300.62ZM686-724H276v505.38q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92h360.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93V-724ZM371.31-275h66v-368h-66v368Zm153.38 0h66v-368h-66v368ZM276-724v530-530Z"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),h("click",function(){return s.toggleChallengeForm()}),C(3,yn,4,1,"ng-container",3)(4,bn,3,0,"ng-container",3)(5,Mn,2,0,"svg",4),o(),a(6,"div",5)(7,"span"),m(8),o()()(),a(9,"div",1)(10,"div",2),h("click",function(){return s.toggleFilter()}),C(11,Sn,2,1,"span",3)(12,xn,2,0,"span",3)(13,On,2,0,"svg",6)(14,Pn,2,0,"svg",6),o()(),C(15,En,2,5,"div",7)(16,Tn,32,10,"form",8),o(),a(17,"section",9),C(18,Fn,19,13,"div",10),o()),i&2&&(l(3),c("ngIf",!s.editChallengeId),l(),c("ngIf",s.editChallengeId),l(),c("ngIf",s.showChallengeForm),l(3),S("Total: ",s.challengeList.length,""),l(3),c("ngIf",s.filterGameIds.length!==0),l(),c("ngIf",s.filterGameIds.length===0),l(),c("ngIf",!s.showFilter),l(),c("ngIf",s.showFilter),l(),c("ngIf",s.showFilter),l(),c("ngIf",s.showChallengeForm),l(2),c("ngForOf",s.challengeList))},dependencies:[K,G,X,me,se,Fe,le,ce,de,pe,be,gt,ee,Z],styles:[".input-field[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:none}.errors[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;margin:0 auto}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.75rem 0}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .wrapper_add[_ngcontent-%COMP%]{background:#bf3c65;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem;border-radius:50%;margin:0 .2rem;fill:#fff}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .wrapper_filter[_ngcontent-%COMP%]{background:#75a0ff;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem;border-radius:50%;margin:0 .2rem;fill:#fff}.container[_ngcontent-%COMP%]   .reward-container[_ngcontent-%COMP%]{border:.2rem dashed #31313b;border-radius:1rem;padding:.7rem 1rem 0rem}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.6rem}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#9b9b9b}.container[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{display:flex;margin:0 auto;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]{display:flex;justify-content:end}.container[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]   .input-remove[_ngcontent-%COMP%]{font-weight:700;width:1.5rem;height:1.5rem;fill:#fff}.wrapper_library[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;padding-bottom:7rem;margin:0 auto;padding-top:1.5rem;overflow-y:visible}.wrapper_library__item[_ngcontent-%COMP%]{position:relative;display:flex;border:.2rem dashed #31313b;border-radius:1rem;padding:.5rem;margin:.5rem 0}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:space-between}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]{padding-left:1rem;font-size:large;padding-top:.2rem;align-self:baseline;word-break:break-all}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{padding-top:.5rem;width:100%;font-size:.8rem;color:#9b9b9b;word-break:break-all}@media (min-width: 568px){.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{width:85%}}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:#fff;margin-left:1rem}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;min-width:3rem;min-height:3rem;object-fit:contain}.wrapper_library__item-active[_ngcontent-%COMP%]{border:.2rem dashed #75a0ff}"]});let e=n;return e})();function kn(e,n){if(e&1){let r=w();a(0,"div",10)(1,"div",11)(2,"label",12),m(3,"Choose Reward"),o(),d(4,"ng-select",13),o(),a(5,"div",11)(6,"label",14),m(7,"Required Points"),o(),d(8,"input",15),o(),v(),a(9,"svg",16),h("click",function(){let i=f(r).index,s=p();return u(s.removeReward(i))}),d(10,"path",17),o()()}if(e&2){let r=n.$implicit,t=n.index,i=p();c("formGroup",i.getFormGroup(r)),l(4),c("items",i.gameList)("searchable",!0),l(4),c("id",t)}}var jt=(()=>{let n=class n extends we{constructor(t,i,s){super(t),this.toastService=t,this.gameService=i,this.fb=s,this.gameList=[],this.fetchGameList(),this.form=this.initFormGroup()}get rewardArray(){return this.form.controls.rewards}getFormGroup(t){return t}createReward(){return this.fb.group({selectedGame:new P(null,[O.required]),requiredPoints:new P(0,[O.required])})}onSave(){console.log("form",this.form.value)}addReward(){this.rewardArray.push(this.createReward())}removeReward(t){this.rewardArray.removeAt(t)}getControlDisplayName(t){throw new Error("Method not implemented.")}initFormGroup(){return this.fb.group({rewards:this.fb.array([])})}fetchGameList(){this.gameService.getDropdownList().subscribe({next:t=>{this.gameList=t??[]},error:t=>{console.log(t)}})}};n.\u0275fac=function(i){return new(i||n)(g(V),g(Re),g(ge))},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-rewards"]],features:[re],decls:15,vars:2,consts:[[1,"container"],[1,"buttons"],[1,"btn-container",3,"click"],["viewBox","0 -960 960 960",1,"wrapper_add"],["d","M447-448H208v-66h239v-239h66v239h239v66H513v239h-66v-239Z"],["height","24px","viewBox","0 -960 960 960","width","24px","fill","#fafafa"],["d","M832-677.08v458.46q0 38.35-26.14 64.48Q779.73-128 741.38-128H218.62q-38.35 0-64.48-26.14Q128-180.27 128-218.62v-522.76q0-38.35 26.14-64.48Q180.27-832 218.62-832h458.46L832-677.08Zm-66 27.52L649.56-766H218.62q-10.77 0-17.7 6.92-6.92 6.93-6.92 17.7v522.76q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92h522.76q10.77 0 17.7-6.92 6.92-6.93 6.92-17.7v-430.94Zm-285.88 365.1q38.96 0 66.42-27.58T574-378.58q0-38.96-27.58-66.42t-66.54-27.46q-38.96 0-66.42 27.58T386-378.34q0 38.96 27.58 66.42t66.54 27.46ZM256.77-555.23h328.92v-148H256.77v148ZM194-649.56V-194v-572 116.44Z"],[3,"formGroup"],["formArrayName","rewards"],["class","input-group reward-container",3,"formGroup",4,"ngFor","ngForOf"],[1,"input-group","reward-container",3,"formGroup"],[1,"input-field"],["for","reward",1,"required"],["bindLabel","name","placeholder","Select Reward","formControlName","selectedGame",1,"app-select",3,"items","searchable"],["for","requiredPoints",1,"required"],["name","requiredPoints","placeholder","points","type","number","formControlName","requiredPoints",3,"id"],["viewBox","0 -960 960 960",1,"input-remove",3,"click"],["d","M252-203.69 205.69-252l227-228-227-230L252-758.31l229 230 227-230L754.31-710l-227 230 227 228L708-203.69l-227-230-229 230Z"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),h("click",function(){return s.addReward()}),a(3,"span"),m(4,"Add Reward"),o(),v(),a(5,"svg",3),d(6,"path",4),o()(),T(),a(7,"div",2),h("click",function(){return s.onSave()}),a(8,"span"),m(9,"Save"),o(),v(),a(10,"svg",5),d(11,"path",6),o()()(),T(),a(12,"form",7)(13,"div",8),C(14,kn,11,4,"div",9),o()()()),i&2&&(l(12),c("formGroup",s.form),l(2),c("ngForOf",s.rewardArray.controls))},dependencies:[G,me,se,Fe,le,ce,de,pe,_t,be],styles:[".input-field[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:none}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;margin:0 auto;margin-bottom:10rem}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.75rem 0}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .wrapper_add[_ngcontent-%COMP%]{background:#bf3c65;fill:#fff;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem;border-radius:50%;margin:0 .2rem}.container[_ngcontent-%COMP%]   .reward-container[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.6rem}.container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;color:#9b9b9b}.container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-remove[_ngcontent-%COMP%]{fill:#fff;width:2rem;height:2rem;display:flex;align-items:center}"]});let e=n;return e})();var $=function(e){return e[e.Bronze=0]="Bronze",e[e.Silver=1]="Silver",e[e.Gold=2]="Gold",e[e.Platinum=3]="Platinum",e}($||{});var Ht=(()=>{let n=class n{constructor(t,i,s,_){this.data=t,this.dialogRef=i,this.rewardService=s,this.toastService=_}delete(){this.rewardService.delete(this.data.id).subscribe(t=>{this.toastService.success({message:"Deleted",type:I.Success}),this.dialogRef.close(!0)})}};n.\u0275fac=function(i){return new(i||n)(g(fe),g(he),g(ie),g(V))},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-reward-confirm-delete-dialog"]],decls:8,vars:0,consts:[[1,"dialog-container"],[1,"dialog-container__header","m-4"],["mat-dialog-close","",1,"btn","btn__small","btn-blue"],[1,"btn","btn__small","btn-red","btn-border-red",3,"click"]],template:function(i,s){i&1&&(a(0,"div",0)(1,"h3",1),m(2,"Are you Sure?"),o(),a(3,"mat-dialog-actions")(4,"button",2),m(5,"Cancel"),o(),a(6,"button",3),h("click",function(){return s.delete()}),m(7," Delete "),o()()())},dependencies:[ve,Ce],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container__header[_ngcontent-%COMP%]{margin:1rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let e=n;return e})();var y=function(e){return e[e.Five=5]="Five",e[e.Ten=10]="Ten",e[e.Fifteen=15]="Fifteen",e[e.Twenty=20]="Twenty",e[e.TwentyFive=25]="TwentyFive",e[e.Thirty=30]="Thirty",e[e.ThirtyFive=35]="ThirtyFive",e[e.Forty=40]="Forty",e[e.FortyFive=45]="FortyFive",e[e.Fifty=50]="Fifty",e[e.FiftyFive=55]="FiftyFive",e[e.Sixty=60]="Sixty",e[e.SixtyFive=65]="SixtyFive",e[e.Seventy=70]="Seventy",e[e.SeventyFive=75]="SeventyFive",e[e.Eighty=80]="Eighty",e[e.EightyFive=85]="EightyFive",e[e.Ninety=90]="Ninety",e[e.NinetyFive=95]="NinetyFive",e[e.OneHundred=100]="OneHundred",e}(y||{}),Bt={[$.Bronze]:[y.Five,y.Ten,y.Fifteen,y.Twenty],[$.Silver]:[y.TwentyFive,y.Thirty,y.ThirtyFive,y.Forty],[$.Gold]:[y.FortyFive,y.Fifty,y.FiftyFive,y.Sixty,y.SixtyFive,y.Seventy,y.SeventyFive],[$.Platinum]:[y.Eighty,y.EightyFive,y.Ninety,y.NinetyFive,y.OneHundred]};var Rn=(e,n,r,t)=>({"btn-border-green":e,"btn-font-green":n,"btn-border-red":r,"btn-font-red":t}),Nn=(e,n,r,t)=>({"btn-border-yellow":e,"btn-font-yellow":n,"btn-border-red":r,"btn-font-red":t}),Dn=e=>({"wrapper_library__item-active":e});function Gn(e,n){e&1&&(v(),a(0,"svg",10),d(1,"path",11),o())}function Vn(e,n){if(e&1&&(B(0),a(1,"span"),m(2,"Add Reward"),o(),C(3,Gn,2,0,"svg",5),q()),e&2){let r=p();l(3),c("ngIf",!r.showRewardForm)}}function jn(e,n){e&1&&(B(0),a(1,"span"),m(2,"Update Reward"),o(),q())}function Hn(e,n){e&1&&(v(),a(0,"svg",10),d(1,"path",12),o())}function Bn(e,n){if(e&1){let r=w();v(),a(0,"svg",37),h("click",function(){f(r);let i=p(2);return u(i.toggleRewardForm())}),d(1,"path",12),o()}}function qn(e,n){e&1&&(v(),a(0,"svg",38),d(1,"path",39),o())}function Un(e,n){if(e&1&&(a(0,"div",40),m(1),o()),e&2){let r=p(2);l(),S(" ",r.getFirstErrorMessage()," ")}}function Qn(e,n){if(e&1){let r=w();a(0,"button",41),h("click",function(){f(r);let i=p(2);return u(i.onAddReward())}),m(1," Create "),o()}if(e&2){let r=p(2);c("disabled",r.form.invalid)("ngClass",ae(2,Rn,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function Zn(e,n){if(e&1){let r=w();a(0,"button",41),h("click",function(){f(r);let i=p(2);return u(i.onUpdateReward())}),m(1," Update "),o()}if(e&2){let r=p(2);c("disabled",r.form.invalid)("ngClass",ae(2,Nn,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function Wn(e,n){if(e&1){let r=w();a(0,"form",13)(1,"div",14)(2,"div",15),C(3,Bn,2,0,"svg",16),o(),a(4,"div",17)(5,"div",18)(6,"div",19)(7,"input",20),h("change",function(i){f(r);let s=p();return u(s.onFileSelected(i))}),o(),a(8,"label",21)(9,"div",22),d(10,"img",23),o()()(),a(11,"div",24)(12,"div",25)(13,"label",26),m(14,"Choose Level"),o(),d(15,"ng-select",27),o(),a(16,"div",25)(17,"label",28),m(18," Required Points "),C(19,qn,2,0,"svg",29),o(),d(20,"ng-select",30),o()(),a(21,"div",24)(22,"div",25)(23,"label",31),m(24,"Name"),o(),d(25,"input",32),o(),a(26,"div",25)(27,"label",33),m(28,"Description"),o(),d(29,"input",34),o()()()(),C(30,Un,2,1,"div",35)(31,Qn,2,7,"button",36)(32,Zn,2,7,"button",36),o()()}if(e&2){let r=p();c("formGroup",r.form),l(3),c("ngIf",r.showRewardForm),l(7),c("src",r.imagePreview||"/shared/assets/images/upload_img.svg",k),l(5),c("items",r.rewardLevels)("searchable",!0),l(4),c("ngIf",r.form.controls.requiredPoints.disabled),l(),c("items",r.rewardRequiredPointList)("searchable",!0)("disabled",r.form.controls.requiredPoints.disabled),l(10),c("ngIf",r.getFirstErrorMessage()),l(),c("ngIf",!r.editRewardId),l(),c("ngIf",r.editRewardId)}}function $n(e,n){if(e&1){let r=w();a(0,"div",42)(1,"div",43),d(2,"img",44),x(3,"entityImage"),x(4,"async"),o(),a(5,"div",45)(6,"div",46),m(7),a(8,"div",47),m(9),o()(),a(10,"div",48),v(),a(11,"svg",49),h("click",function(){let i=f(r).$implicit,s=p();return u(s.fillEditRewardForm(i.id))}),d(12,"path",50),o(),a(13,"svg",49),h("click",function(){let i=f(r).$implicit,s=p();return u(s.openDeleteDialog(i.id))}),d(14,"path",51),o()()()()}if(e&2){let r=n.$implicit,t=p();c("ngClass",U(9,Dn,r.id===t.editRewardId)),l(2),c("src",D(4,7,R(3,4,t.ImageEntityType.Rewards,r.imageId)),k),l(5),S(" ",r.name," "),l(2),S(" ",r.description," ")}}var qt=(()=>{let n=class n extends we{constructor(t,i,s,_,M,H,je){super(t),this.toastService=t,this.fb=i,this.location=s,this.rewardsService=_,this.entityImagePipe=M,this.dialog=H,this.scrollService=je,this.isMenuVisible=!1,this.imagePreview=null,this.fileToUpload=null,this.imageError=null,this.showRewardForm=!1,this.rewardLevels=[],this.rewardRequiredPointList=[],this.rewardList=[],this.editRewardId=null,this.ImageEntityType=Q,this.rewardLevels=Object.entries($).filter(([A,F])=>typeof F=="number").map(([A,F])=>({id:F,name:A})),this.fetchSystemRewardList(),this.form=this.initFormGroup(),this.form.controls.selectedLevel.valueChanges.subscribe(A=>{this.updateRequiredPoints(A)})}updateRequiredPoints(t){Object.values($).includes(t)?(this.form.controls.requiredPoints.enable(),this.rewardRequiredPointList=Bt[t]||[]):(this.form.controls.requiredPoints.disable(),this.rewardRequiredPointList=[])}openDeleteDialog(t){this.dialog.open(Ht,{data:{id:t}}).afterClosed().subscribe(s=>{s&&(this.fetchSystemRewardList(),this.showRewardForm&&this.toggleRewardForm())})}handleSearchExpression(t){this.fetchSystemRewardList(t)}showMenu(){this.isMenuVisible=!this.isMenuVisible}getFormGroup(t){return t}toggleRewardForm(t=!1){this.showRewardForm=!this.showRewardForm,t||(this.form.reset(),this.imagePreview=null,this.editRewardId=null)}onAddReward(){this.form.valid&&this.fileToUpload&&this.rewardsService.add({level:this.form.controls.selectedLevel.value,name:this.form.controls.name.value,description:this.form.controls.description.value,requiredPoints:this.form.controls.requiredPoints.value},this.fileToUpload).subscribe({next:t=>{this.toastService.success({message:j.ChangesSaved,type:I.Success}),this.fetchSystemRewardList(),this.toggleRewardForm()},error:t=>{this.handleServerErrors(t),this.toastService.error({message:j.FailedToSaveChanges,type:I.Error})}})}onUpdateReward(){this.form.valid&&this.editRewardId&&this.rewardsService.update({id:this.editRewardId,level:this.form.controls.selectedLevel.value,name:this.form.controls.name.value,description:this.form.controls.description.value,requiredPoints:this.form.controls.requiredPoints.value,imageId:this.fileToUpload?null:+this.form.controls.image.value},this.fileToUpload).subscribe({next:t=>{this.toastService.success({message:j.ChangesSaved,type:I.Success}),this.fetchSystemRewardList(),this.toggleRewardForm()},error:t=>{this.handleServerErrors(t),this.toastService.error({message:j.FailedToSaveChanges,type:I.Error})}})}fillEditRewardForm(t){this.editRewardId=t,this.rewardsService.getById(t).subscribe({next:i=>{this.form.patchValue({name:i.name,description:i.description,requiredPoints:i.requiredPoints,selectedLevel:i.level,image:i.imageId.toString()}),this.entityImagePipe.transform(Q.Rewards,i.imageId).subscribe(s=>this.imagePreview=s),this.fileToUpload=null,this.showRewardForm=!0,this.scrollService.scrollToTop()},error:i=>{this.editRewardId=null,Ee(()=>i)}})}onFileSelected(t){let i=t.target;console.log(i.files);let s=i.files?.[0];if(s){let _=new FileReader;_.onload=()=>{this.imagePreview=_.result,this.form.controls.image.patchValue(s.name),this.fileToUpload=s,this.imageError=null,console.log(this.form.controls)},_.readAsDataURL(s)}else this.imageError="Image is required.",this.fileToUpload=null,this.imagePreview=null,this.form.controls.image.reset()}backNavigateBtn(){this.location.back()}getControlDisplayName(t){switch(t){case"selectedLevel":return"Level";case"name":return"Name";case"description":return"Description";case"requiredPoints":return"Required Points";case"image":return"Image";default:return t}}fetchSystemRewardList(t=""){this.rewardsService.getList(t).subscribe({next:i=>{this.rewardList=i??[]},error:i=>{console.log(i)}})}initFormGroup(){return this.fb.group({selectedLevel:new P(null,[O.required]),requiredPoints:new P({value:0,disabled:!0},[O.required]),name:new P("",[O.required]),description:new P("",[O.required]),image:new P("",[O.required])})}};n.\u0275fac=function(i){return new(i||n)(g(V),g(ge),g(Te),g(ie),g(Z),g(ue),g(Ve))},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-system-rewards"]],features:[re],decls:13,vars:9,consts:[["header","System Rewards",3,"searchExpressionResult","backClicked","withSearch","withBackBtn","withBottomLine"],[1,"container"],[1,"buttons"],[1,"btn-container",3,"click"],[4,"ngIf"],["class","wrapper_add","viewBox","0 -960 960 960",4,"ngIf"],[1,"btn-container"],[3,"formGroup",4,"ngIf"],[1,"wrapper_library"],["class","wrapper_library__item",3,"ngClass",4,"ngFor","ngForOf"],["viewBox","0 -960 960 960",1,"wrapper_add"],["d","M447-448H208v-66h239v-239h66v239h239v66H513v239h-66v-239Z"],["d","M252-203.69 205.69-252l227-228-227-230L252-758.31l229 230 227-230L754.31-710l-227 230 227 228L708-203.69l-227-230-229 230Z"],[3,"formGroup"],[1,"reward-container"],[1,"close-container"],["class","input-remove","viewBox","0 -960 960 960",3,"click",4,"ngIf"],[1,"wrapper"],[1,"inputs"],[1,"upload-icon"],["type","file","id","file-upload","accept","image/*",3,"change"],["for","file-upload"],[1,"image-preview"],["alt","Selected Image",3,"src"],[1,"input-group"],[1,"input-field"],["for","level",1,"required"],["bindValue","id","bindLabel","name","placeholder","Select Level","formControlName","selectedLevel",1,"app-select",3,"items","searchable"],["for","requiredPoints input-label",1,"required"],["class","locked","viewBox","0 -960 960 960",4,"ngIf"],["bindValue","id","bindLabel","name","placeholder","points","formControlName","requiredPoints",1,"app-select-long",3,"items","searchable","disabled"],["for","Name",1,"required"],["name","name","placeholder","name","type","text","id","name","formControlName","name"],["for","description",1,"required"],["name","description","placeholder","description","type","text","id","description","formControlName","description"],["class","errors",4,"ngIf"],["type","button","class","btn btn-gray create-btn",3,"disabled","ngClass","click",4,"ngIf"],["viewBox","0 -960 960 960",1,"input-remove",3,"click"],["viewBox","0 -960 960 960",1,"locked"],["d","M260.62-76q-38.85 0-64.74-25.88Q170-127.77 170-166.62v-358.76q0-38.85 25.88-64.74Q221.77-616 260.62-616H292v-80q0-79.85 54.77-134.92Q401.53-886 480-886t133.23 55.08Q668-775.85 668-696v80h31.38q38.85 0 64.74 25.88Q790-564.23 790-525.38v358.76q0 38.85-25.88 64.74Q738.23-76 699.38-76H260.62Zm0-66h438.76q10.77 0 17.7-6.92 6.92-6.93 6.92-17.7v-358.76q0-10.77-6.92-17.7-6.93-6.92-17.7-6.92H260.62q-10.77 0-17.7 6.92-6.92 6.93-6.92 17.7v358.76q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92Zm219.54-128q31.15 0 52.49-21.51Q554-313.01 554-344.16t-21.51-52.49Q510.99-418 479.84-418t-52.49 21.51Q406-374.99 406-343.84t21.51 52.49Q449.01-270 480.16-270ZM358-616h244v-80q0-51-35.62-87.5t-86.5-36.5q-50.88 0-86.38 36.5Q358-747 358-696v80ZM236-142v-408 408Z"],[1,"errors"],["type","button",1,"btn","btn-gray","create-btn",3,"click","disabled","ngClass"],[1,"wrapper_library__item",3,"ngClass"],[1,"wrapper_image"],["alt","Reward Image",3,"src"],[1,"wrapper_info"],[1,"wrapper_title"],[1,"wrapper_description"],[1,"wrapper_right"],["viewBox","0 -960 960 960",1,"icon",3,"click"],["d","M194-194h43.92l407.93-407.92-43.93-42.93L194-236.92V-194Zm-66 66v-136.77l557.23-558.77q5.15-5.48 11.57-6.97 6.43-1.49 12.49-1.49 6.06 0 11.12.54 5.05.54 11.44 6.15l92.69 91.93q5.61 6.38 6.54 12 .92 5.63.92 12.25 0 6.13-1.74 12.06-1.74 5.92-6.72 11.07L264.77-128H128Zm626.77-581.31-45.46-44.46 45.46 44.46ZM624.5-623.5l-22.58-21.35 43.93 42.93-21.35-21.58Z"],["d","M300.62-128q-38.85 0-64.74-25.88Q210-179.77 210-218.62V-724h-40v-66h188v-38.77h246V-790h188v66h-40v505.38q0 38.35-26.14 64.48Q699.73-128 661.38-128H300.62ZM686-724H276v505.38q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92h360.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93V-724ZM371.31-275h66v-368h-66v368Zm153.38 0h66v-368h-66v368ZM276-724v530-530Z"]],template:function(i,s){i&1&&(a(0,"app-header",0),h("searchExpressionResult",function(M){return s.handleSearchExpression(M)})("backClicked",function(){return s.backNavigateBtn()}),o(),a(1,"div",1)(2,"div",2)(3,"div",3),h("click",function(){return s.toggleRewardForm()}),C(4,Vn,4,1,"ng-container",4)(5,jn,3,0,"ng-container",4)(6,Hn,2,0,"svg",5),o(),a(7,"div",6)(8,"span"),m(9),o()()(),C(10,Wn,33,12,"form",7),o(),a(11,"section",8),C(12,$n,15,11,"div",9),o()),i&2&&(c("withSearch",!0)("withBackBtn",!0)("withBottomLine",!0),l(4),c("ngIf",!s.editRewardId),l(),c("ngIf",s.editRewardId),l(),c("ngIf",s.showRewardForm),l(3),S("Total: ",s.rewardList.length,""),l(),c("ngIf",s.showRewardForm),l(2),c("ngForOf",s.rewardList))},dependencies:[K,G,X,me,se,le,ce,de,pe,ne,be,ee,Z],styles:[".input-field[_ngcontent-%COMP%]{position:relative}.input-field[_ngcontent-%COMP%]   .ng-touched.ng-invalid[_ngcontent-%COMP%]{border:none}.input-label[_ngcontent-%COMP%]{position:relative}.locked[_ngcontent-%COMP%]{width:1rem;height:1rem;position:absolute;left:5.5rem;fill:#98989d}.errors[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;margin:0 auto}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.75rem 0}.container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .wrapper_add[_ngcontent-%COMP%]{background:#bf3c65;fill:#fff;display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem;border-radius:50%;margin:0 .2rem}.container[_ngcontent-%COMP%]   .reward-container[_ngcontent-%COMP%]{border:.2rem dashed #31313b;border-radius:1rem;padding:.7rem 1rem 0rem}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{background-color:#31313b;border-radius:10px;margin:1rem auto;aspect-ratio:1/1;display:flex;justify-content:center;align-items:center;cursor:pointer}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:18rem;height:18rem;cursor:pointer}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:17rem;height:17rem;object-fit:contain;border-radius:.7rem}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.6rem}.container[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.7rem;color:#9b9b9b}.container[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{display:flex;margin:0 auto;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]{display:flex;justify-content:end}.container[_ngcontent-%COMP%]   .close-container[_ngcontent-%COMP%]   .input-remove[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:#fff}.wrapper_library[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;padding-bottom:7rem;margin:0 auto;padding-top:1.5rem;overflow-y:visible}.wrapper_library__item[_ngcontent-%COMP%]{position:relative;display:flex;border:.2rem dashed #31313b;border-radius:1rem;padding:.5rem;margin:.5rem 0}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:space-between}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]{padding-left:1rem;font-size:large;padding-top:.2rem;align-self:baseline;word-break:break-all}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{padding-top:.5rem;width:100%;font-size:.8rem;color:#9b9b9b;word-break:break-all}@media (min-width: 568px){.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{width:85%}}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:#fff;margin-left:1rem}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;min-width:3rem;min-height:3rem;object-fit:contain}.wrapper_library__item-active[_ngcontent-%COMP%]{border:.2rem dashed #75a0ff}"]});let e=n;return e})();var Ut=(()=>{let n=class n{constructor(t){this.router=t,this.menuItems=new nt([]),this.ADMIN_REWARDS=L.CHALLENGES.ADMIN_REWARDS,this.ADMIN_LIST=L.CHALLENGES.ADMIN_LIST,this.ADMIN_HISTORY_LOG=L.CHALLENGES.ADMIN_HISTORY_LOG,this.columns=[{name:"Weekly Rewards",link:this.ADMIN_REWARDS,isActive:this.isActiveLink(this.ADMIN_REWARDS)},{name:"Challenges",link:this.ADMIN_LIST,isActive:this.isActiveLink(this.ADMIN_LIST)},{name:"History Log",link:this.ADMIN_HISTORY_LOG,isActive:this.isActiveLink(this.ADMIN_HISTORY_LOG)}],this.handleMenuItemClick=this.handleMenuItemClick.bind(this)}ngOnInit(){this.menuItems.next([{key:"settings",label:"Settings"},{key:"system-rewards",label:"System Rewards"},{key:"custom-challenges",label:"Custom Challenges"}])}handleMenuItemClick(t){t==="settings"?this.router.navigateByUrl(L.CHALLENGES.ADMIN_SETTINGS):t==="system-rewards"?this.router.navigateByUrl(L.CHALLENGES.ADMIN_SYSTEM_REWARDS):t==="custom-challenges"&&this.router.navigateByUrl(L.CHALLENGES.ADMIN_HISTORY_LOG)}isActiveLink(t){return this.router.url.includes(t)}onActivate(t){this.activeChildComponent=t}};n.\u0275fac=function(i){return new(i||n)(g(te))},n.\u0275cmp=b({type:n,selectors:[["app-admin-challenges-navigation"]],decls:5,vars:5,consts:[["menu",""],["header","Challenges Manager",3,"withMenu","menuItems","menuItemClickFunction"],[3,"columns"],[3,"menuItemClick","menuItems"],[3,"activate"]],template:function(i,s){if(i&1){let _=w();a(0,"app-header",1),d(1,"app-nav-bar",2),o(),a(2,"app-controls-menu",3,0),h("menuItemClick",function(H){return f(_),u(s.handleMenuItemClick(H.value))}),o(),a(4,"router-outlet",4),h("activate",function(H){return f(_),u(s.onActivate(H))}),o()}i&2&&(c("withMenu",!0)("menuItems",s.menuItems)("menuItemClickFunction",s.handleMenuItemClick),l(),c("columns",s.columns),l(),c("menuItems",s.menuItems.asObservable()))},dependencies:[ft,ne,Ct,ye]});let e=n;return e})();var et=(()=>{let n=class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return this.authService.getUser?.role!==ke.User?this.router.parseUrl(L.CHALLENGES.ADMIN_LIST):!0}};n.\u0275fac=function(i){return new(i||n)(Y(_e),Y(te))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var tt=(()=>{let n=class n{constructor(t,i){this.authService=t,this.router=i}canActivate(t,i){return this.authService.getUser?.role===ke.User?this.router.parseUrl(L.CHALLENGES.CHALLENGES_HOME):!0}};n.\u0275fac=function(i){return new(i||n)(Y(_e),Y(te))},n.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var zn=[{path:W.CHALLENGES.HOME,component:Lt,canActivate:[et]},{path:W.CHALLENGES.REWARDS,component:Ft,canActivate:[et]},{path:W.CHALLENGES.ADMIN.CORE,component:Ut,canActivate:[tt],children:[{path:W.CHALLENGES.ADMIN.REWARDS,component:jt},{path:W.CHALLENGES.ADMIN.LIST,component:Vt},{path:W.CHALLENGES.ADMIN.HISTORY_LOG,component:kt}]},{path:`${W.CHALLENGES.ADMIN.CORE}/${W.CHALLENGES.ADMIN.SYSTEM_REWARDS}`,component:qt,canActivate:[tt]}],Qt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=Le({type:n}),n.\u0275inj=Ie({imports:[Ue.forChild(zn),Ue]});let e=n;return e})();var Wr=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=Le({type:n}),n.\u0275inj=Ie({imports:[wt,St,Qt,xt,Et,bt,Ot,ht]});let e=n;return e})();export{Wr as ChallengesManagementModule};
