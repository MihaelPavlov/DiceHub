import{a as rt}from"./chunk-5HEUILBE.js";import{a as mt,b as dt}from"./chunk-DBWYQLUR.js";import{a as w}from"./chunk-3YFOIB2Z.js";import{a as lt}from"./chunk-6JEORSH2.js";import{a as ot}from"./chunk-RG3YGCS2.js";import"./chunk-UV2HFFUQ.js";import{a as je}from"./chunk-IGE7THSU.js";import{a as at}from"./chunk-ZNCIGRRM.js";import{a as xe,b as we,c as Y,d as Pe,e as Ie,f as st}from"./chunk-257RNC4W.js";import{a as gt,b as _t}from"./chunk-N5AFSSXM.js";import{a as X}from"./chunk-B6POORFO.js";import{b as Me,c as Te}from"./chunk-4XCZJEOQ.js";import{a as D}from"./chunk-PQJ34A2R.js";import{a as J}from"./chunk-ELPMLOTJ.js";import{a as ct,b as Oe,c as j,d as pt}from"./chunk-S4L6UGIL.js";import{$a as ge,$b as x,Aa as me,Bc as Ce,Ca as S,Ea as f,Fa as m,Gb as L,Hb as B,Ib as G,Ic as Se,Jb as H,Kb as E,Kc as I,L as Ge,La as Fe,M as oe,Ma as Ae,Mb as Z,Na as Be,Nb as We,Nc as Ve,O as Ee,Oa as de,Ob as et,Oc as $,Pa as p,Pb as fe,Pc as ie,Qa as R,Qc as ye,Ra as M,Rb as ue,S as y,Sa as ze,Sc as tt,T as se,Ua as $e,Uc as it,Va as Je,Vb as be,Vc as nt,W as v,Wa as Xe,X as h,Y as O,Z as A,Zb as ve,_a as q,_b as Q,ac as N,ba as De,bb as ee,bc as he,cb as U,cc as z,db as te,eb as Ye,fa as ce,ia as c,j as re,ja as d,na as le,oa as u,ob as V,pb as k,qa as l,qb as P,ra as He,s as ae,sa as Ze,t as Ue,ta as Qe,tb as _e,u as Le,ub as Ke,wa as o,xa as s,ya as _,yc as T,za as pe}from"./chunk-JJGLVIRE.js";function ft(){return{numberOfGuests:"Number of Guests",reservationDate:"Reservation Date",isConfirmed:"Is Confirmed"}}var Dt=(t,n)=>({"btn-font-green btn-border-green":t,"btn-font-red btn-border-red":n}),Ft=(t,n)=>({"btn-font-yellow btn-border-yellow":t,"btn-font-red btn-border-red":n}),At=(t,n)=>({"btn-font-blue btn-border-blue":t,"btn-font-red btn-border-red":n});function Bt(t,n){if(t&1&&(o(0,"div",3)(1,"div",4)(2,"span",5),p(3,"People In Club"),s(),o(4,"div",6),O(),o(5,"svg",7),_(6,"path",8),s(),A(),o(7,"span",9),p(8),s()()(),o(9,"div",4)(10,"span",5),p(11,"Online tables"),s(),o(12,"div",6),O(),o(13,"svg",7),_(14,"path",10),s(),A(),o(15,"span",9),p(16),s()()()()),t&2){let r=m();c(8),R(r.spaceActivityStats.totalPeopleInSpace),c(8),R(r.spaceActivityStats.totalActiveTables)}}function Vt(t,n){t&1&&(o(0,"p",21),p(1," Created Active Table "),s())}function jt(t,n){t&1&&(o(0,"p",21),p(1," You're participating in a Table "),s())}function Nt(t,n){if(t&1){let r=S();o(0,"div",19),u(1,Vt,2,0,"p",20)(2,jt,2,0,"p",20),o(3,"p",21),p(4),s(),o(5,"button",22),f("click",function(){v(r);let i=m().ngIf,a=m();return h(a.navigateToSpaceClubDetails(i.activeTableId))}),p(6," View Table "),s()()}if(t&2){let r=m().ngIf;c(),l("ngIf",r.isPlayerHaveActiveTable),c(),l("ngIf",r.isPlayerParticipateInTable),c(2),R(r.activeTableName)}}function Rt(t,n){if(t&1){let r=S();o(0,"div",13)(1,"div",6)(2,"span"),p(3,"Book Table"),s(),o(4,"span",14),p(5,"Reserve your spot for a future game! Book a table and prepare for the fun. "),s()(),o(6,"div",15)(7,"button",16),f("click",function(){v(r);let i=m(2);return h(i.navigateSpaceTableBooking())}),p(8," Book "),s()()()}if(t&2){let r=m().ngIf;c(7),l("disabled",r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable)("ngClass",ge(2,At,!(r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable),r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable))}}function qt(t,n){t&1&&(o(0,"strong",32),p(1,"Waiting"),s())}function Ut(t,n){t&1&&(o(0,"strong",33),p(1,"Approved"),s())}function Lt(t,n){t&1&&(o(0,"strong",34),p(1,"Declined"),s())}function Gt(t,n){if(t&1&&(o(0,"span",35),p(1),s()),t&2){let r=n.$implicit;c(),ze(" ",r.key,": ",r.value," ")}}function Ht(t,n){if(t&1){let r=S();o(0,"a",36),f("click",function(){v(r);let i=m(3);return h(i.openDialog())}),_(1,"img",37),s()}}function Zt(t,n){if(t&1&&(o(0,"p",38),p(1),s()),t&2){let r=m(3);c(),M(" Message from Club: ",r.activeBookedTableModel.publicNote," ")}}function Qt(t,n){if(t&1&&(o(0,"div",23)(1,"div",24)(2,"span"),p(3,"Your Reservation - "),u(4,qt,2,0,"strong",25)(5,Ut,2,0,"strong",26)(6,Lt,2,0,"strong",27),s(),o(7,"span",14),p(8,"Your spot for a future game! Be prepared for the fun. "),s(),u(9,Gt,2,2,"span",28),s(),o(10,"div",29),u(11,Ht,2,0,"a",30)(12,Zt,2,1,"p",31),s()()),t&2){let r=m(2);c(4),l("ngIf",r.activeBookedTableModel.status===r.ReservationStatus.Pending),c(),l("ngIf",r.activeBookedTableModel.status===r.ReservationStatus.Approved),c(),l("ngIf",r.activeBookedTableModel.status===r.ReservationStatus.Declined),c(3),l("ngForOf",r.getKeyValuePair()),c(2),l("ngIf",r.activeBookedTableModel.status===r.ReservationStatus.Approved),c(),l("ngIf",r.activeBookedTableModel.publicNote!=="")}}function zt(t,n){if(t&1){let r=S();pe(0),u(1,Nt,7,3,"div",11),o(2,"div",12)(3,"div",13)(4,"div",6)(5,"span"),p(6,"Create Table"),s(),o(7,"span",14),p(8,"Begin your adventure. Create a table if you're free and you are in the club! "),s()(),o(9,"div",15)(10,"button",16),f("click",function(){v(r);let i=m();return h(i.navigateToCreateTable())}),p(11," Create "),s()()(),o(12,"div",13)(13,"div",6)(14,"span"),p(15,"Join Table"),s(),o(16,"span",14),p(17,"Jump into an ongoing game! Join a table if you're free and ready to play."),s()(),o(18,"div",15)(19,"button",16),f("click",function(){v(r);let i=m();return h(i.navigateSpaceTableList())}),p(20," Join "),s()()(),u(21,Rt,9,5,"div",17)(22,Qt,13,6,"div",18),s(),me()}if(t&2){let r=n.ngIf,e=m();c(),l("ngIf",r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable),c(9),l("disabled",r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable)("ngClass",ge(7,Dt,!(r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable),r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable)),c(9),l("disabled",r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable)("ngClass",ge(10,Ft,!(r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable),r.isPlayerHaveActiveTable||r.isPlayerParticipateInTable)),c(2),l("ngIf",!e.activeBookedTableModel),c(),l("ngIf",e.activeBookedTableModel)}}var vt=(()=>{let n=class n{constructor(e,i,a,g,b,C){this.router=e,this.spaceManagementService=i,this.gameService=a,this.dialog=g,this.authService=b,this.datePipe=C,this.activeBookedTableModel=null,this.activeGameReservationModel=null,this.ReservationStatus=Oe}ngOnInit(){Le([this.spaceManagementService.getUserActiveTable(),this.spaceManagementService.getSpaceActivityStats()]).subscribe({next:([e,i])=>{e&&(this.userActiveTableInfo=e),i&&(this.spaceActivityStats=i)},error:e=>{ae(()=>e)}}),this.spaceManagementService.getActiveBookedTable().subscribe({next:e=>{this.activeBookedTableModel=e}}),this.gameService.getActiveReservation().subscribe({next:e=>{this.activeGameReservationModel=e}})}openDialog(){let e=this.isSameDate(this.activeGameReservationModel?.reservationDate,this.activeBookedTableModel?.reservationDate);console.log("isSameReservationDate",e);let i=this.getDialogData(e);console.log("dialogData",i),this.dialog.open(mt,{width:"17rem",data:i})}isSameDate(e,i){if(!e||!i)return!1;let a=new Date(e),g=new Date(i);return a.getFullYear()===g.getFullYear()&&a.getMonth()===g.getMonth()&&a.getDate()===g.getDate()}getDialogData(e){return this.activeGameReservationModel?.status===Oe.Approved&&this.activeBookedTableModel?.status===Oe.Approved&&e?{Id:this.activeGameReservationModel.id,Name:"GameReservation",Type:je.GameReservation,AdditionalData:{userId:this.authService.getUser?.id}}:{Id:this.activeBookedTableModel?.id,Name:"TableReservation",Type:je.TableReservation,AdditionalData:{userId:this.authService.getUser?.id}}}navigateSpaceTableList(){this.router.navigateByUrl("/space/list")}navigateSpaceTableBooking(){this.router.navigateByUrl("/space/booking")}navigateToCreateTable(){this.router.navigateByUrl("/qr-code-scanner")}navigateToSpaceClubDetails(e){e&&this.router.navigateByUrl(`/space/${e}/details`)}getKeyValuePair(){if(this.activeBookedTableModel){let e=ft(),i=this.getKeyTransformations();return Object.entries(this.activeBookedTableModel).filter(([a])=>e[a]&&i[a]).map(([a,g])=>{let b=e[a],C=i[a]?.(g)??g;return{key:b,value:C}})}return[]}getKeyTransformations(){return{numberOfGuests:e=>e,reservationDate:e=>this.datePipe.transform(new Date(e),tt.DATE_TIME_FORMAT),isConfirmed:e=>e}}};n.\u0275fac=function(i){return new(i||n)(d(I),d(w),d(X),d(Y),d($),d(Ke))},n.\u0275cmp=y({type:n,selectors:[["app-club-space-management"]],decls:3,vars:3,consts:[["header","Club Space",3,"withBottomLine"],["class","wrapper_tabs",4,"ngIf"],[4,"ngIf"],[1,"wrapper_tabs"],[1,"wrapper_tabs__tab"],[1,"wrapper_tabs__tab-header"],[1,"info"],["viewBox","0 -960 960 960",1,"icon"],["d","M44.85-154.38v-96.85q0-34.85 16.61-59.24t44.57-38.67q56.05-27.78 113.62-44.01 57.58-16.23 136.2-16.23 78.27 0 135.52 16.23 57.25 16.23 113.29 44.01 27.97 14.28 44.58 38.67t16.61 59.24v96.85h-621Zm706 0v-102.7q0-32.77-12.58-73.14-12.57-40.37-42.42-68.47 41.46 6 79.27 18.65 37.8 12.66 72.5 30.96 31.83 16.85 49.68 41.86 17.85 25.01 17.85 50.14v102.7h-164.3Zm-396-357.24q-61.05 0-104.53-43.47-43.47-43.48-43.47-104.53 0-61.05 43.47-104.52 43.48-43.48 104.53-43.48 61.05 0 104.52 43.48 43.48 43.47 43.48 104.52t-43.48 104.53q-43.47 43.47-104.52 43.47Zm375.77-148q0 61.05-43.48 104.53-43.47 43.47-104.52 43.47-6.54 0-19.47-1.57-12.92-1.58-19.46-4.27 22.33-30.9 33.24-67.09 10.92-36.19 10.92-75.16t-11.43-74.59q-11.42-35.62-32.73-67.47 9.23-3.15 19.46-4.5t19.47-1.35q61.05 0 104.52 43.48 43.48 43.47 43.48 104.52ZM110.85-220.38h489v-30.85q0-14.08-5.04-22.62-5.04-8.53-20.27-16.15-45.77-23.92-100.39-38.65-54.61-14.73-118.8-14.73-64.2 0-118.81 14.73-54.62 14.73-100.39 38.65-15.23 7.62-20.27 16.15-5.03 8.54-5.03 22.62v30.85Zm244.12-357.24q33.88 0 57.88-24.12t24-58q0-33.88-24.13-57.88-24.12-24-58-24-33.87 0-57.87 24.13-24 24.12-24 58 0 33.87 24.12 57.87t58 24Zm.88 357.24Zm-1-439.24Z"],[1,"info__count"],["d","M236-128.77q-63.31 0-107.27-43.96Q84.77-216.69 84.77-280q0-63.31 43.96-107.27 43.96-43.96 107.27-43.96 63.31 0 107.27 43.96 43.96 43.96 43.96 107.27 0 63.31-43.96 107.27-43.96 43.96-107.27 43.96Zm488 0q-63.31 0-107.27-43.96-43.96-43.96-43.96-107.27 0-63.31 43.96-107.27 43.96-43.96 107.27-43.96 63.31 0 107.27 43.96 43.96 43.96 43.96 107.27 0 63.31-43.96 107.27-43.96 43.96-107.27 43.96Zm-487.97-66q35.82 0 60.51-24.72 24.69-24.72 24.69-60.54t-24.72-60.51q-24.72-24.69-60.54-24.69t-60.51 24.72q-24.69 24.72-24.69 60.54t24.72 60.51q24.72 24.69 60.54 24.69Zm488 0q35.82 0 60.51-24.72 24.69-24.72 24.69-60.54t-24.72-60.51q-24.72-24.69-60.54-24.69t-60.51 24.72q-24.69 24.72-24.69 60.54t24.72 60.51q24.72 24.69 60.54 24.69ZM480-536.77q-63.31 0-107.27-43.96-43.96-43.96-43.96-107.27 0-63.31 43.96-107.27 43.96-43.96 107.27-43.96 63.31 0 107.27 43.96 43.96 43.96 43.96 107.27 0 63.31-43.96 107.27-43.96 43.96-107.27 43.96Zm.03-66q35.82 0 60.51-24.72 24.69-24.72 24.69-60.54t-24.72-60.51q-24.72-24.69-60.54-24.69t-60.51 24.72q-24.69 24.72-24.69 60.54t24.72 60.51q24.72 24.69 60.54 24.69ZM480-688Zm244 408Zm-488 0Z"],["class","wrapper_active_table",4,"ngIf"],[1,"wrapper_btns"],[1,"btn_container"],[1,"description"],[1,"button"],[1,"btn","btn__small","btn-gray",3,"click","disabled","ngClass"],["class","btn_container",4,"ngIf"],["class","btn_container-center",4,"ngIf"],[1,"wrapper_active_table"],["class","wrapper_active_table--text",4,"ngIf"],[1,"wrapper_active_table--text"],[1,"btn","btn__small","btn-gray","btn-font-blue","btn-border-blue",3,"click"],[1,"btn_container-center"],[1,"booked-info"],["class","waiting",4,"ngIf"],["class","approved",4,"ngIf"],["class","declined",4,"ngIf"],["class","description-field",4,"ngFor","ngForOf"],[1,"qr-info"],["class","wrapper_qrCode",3,"click",4,"ngIf"],["class","description-public-message",4,"ngIf"],[1,"waiting"],[1,"approved"],[1,"declined"],[1,"description-field"],[1,"wrapper_qrCode",3,"click"],["src","/shared/assets/images/qr-code.png","alt",""],[1,"description-public-message"]],template:function(i,a){i&1&&(_(0,"app-header",0),u(1,Bt,17,2,"div",1)(2,zt,23,13,"ng-container",2)),i&2&&(l("withBottomLine",!0),c(),l("ngIf",a.spaceActivityStats),c(),l("ngIf",a.userActiveTableInfo))},dependencies:[V,k,P,j],styles:[".wrapper_in_room[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;margin:1rem}.wrapper_in_room__header[_ngcontent-%COMP%]{color:#98542b}.wrapper_in_room[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.5rem}.wrapper_qrCode[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:3rem;height:3rem;border-radius:50%;margin:1rem}.wrapper_qrCode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;object-fit:cover}.wrapper_btns[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1rem 1rem 7rem}.wrapper_btns[_ngcontent-%COMP%]   .btn_container-center[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:.2rem solid #31313b;border-radius:.5rem;margin:.25rem 1rem;padding:.5rem}.wrapper_btns[_ngcontent-%COMP%]   .btn_container-center[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:75%;margin-right:.75rem}.wrapper_btns[_ngcontent-%COMP%]   .btn_container-center[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8rem;color:#9b9b9b}.wrapper_btns[_ngcontent-%COMP%]   .btn_container-center[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;width:15%;justify-content:center}.wrapper_btns[_ngcontent-%COMP%]   .btn_container[_ngcontent-%COMP%]{display:flex;align-items:center;border:.2rem solid #31313b;border-radius:.5rem;margin:.25rem 1rem;padding:.5rem}.wrapper_btns[_ngcontent-%COMP%]   .btn_container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:75%;margin-right:.75rem}.wrapper_btns[_ngcontent-%COMP%]   .btn_container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8rem;color:#9b9b9b}.wrapper_btns[_ngcontent-%COMP%]   .btn_container[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;width:15%;justify-content:center}.wrapper_btns[_ngcontent-%COMP%]   .booked-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;margin-right:.75rem}.wrapper_btns[_ngcontent-%COMP%]   .booked-info[_ngcontent-%COMP%]   .declined[_ngcontent-%COMP%]{color:#bf3c65}.wrapper_btns[_ngcontent-%COMP%]   .booked-info[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{color:#46945b}.wrapper_btns[_ngcontent-%COMP%]   .booked-info[_ngcontent-%COMP%]   .waiting[_ngcontent-%COMP%]{color:#98989d}.wrapper_btns[_ngcontent-%COMP%]   .booked-info[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.8rem;color:#9b9b9b}.wrapper_btns[_ngcontent-%COMP%]   .booked-info[_ngcontent-%COMP%]   .description-field[_ngcontent-%COMP%]{font-size:1rem;color:#75a0ff}.wrapper_tabs[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:2rem 0}.wrapper_tabs__tab[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:8rem;height:8rem;border-radius:.5rem;background-color:#31313b;color:#9b9b9b}.wrapper_tabs__tab-header[_ngcontent-%COMP%]{margin:.75rem;font-weight:600}.wrapper_tabs__tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex}.wrapper_tabs__tab[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:3.5rem;margin:.7rem;fill:#9b9b9b}.wrapper_tabs__tab[_ngcontent-%COMP%]   .info__count[_ngcontent-%COMP%]{font-size:2.5rem;margin-top:1rem;margin-right:1rem}.wrapper_active_table[_ngcontent-%COMP%]{text-align:center}.wrapper_active_table--text[_ngcontent-%COMP%]{margin:1rem;color:#75a0ff}.wrapper_active_table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:1rem}.btn[_ngcontent-%COMP%]{border-radius:.5rem;margin:0 .3rem;padding:.3rem .5rem}.description-public-message[_ngcontent-%COMP%]{color:#fccd3d;word-break:break-word}.qr-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;text-align:center}"]});let t=n;return t})();var Ct=(()=>{let n=class n{constructor(e,i,a,g){this.data=e,this.dialogRef=i,this.gameService=a,this.toastService=g}onSinglePlayer(){this.dialogRef.close(!0)}};n.\u0275fac=function(i){return new(i||n)(d(we),d(xe),d(X),d(J))},n.\u0275cmp=y({type:n,selectors:[["app-single-player-confirm-dialog"]],decls:8,vars:0,consts:[[1,"dialog-container"],[1,"dialog-container__header","m-4"],["mat-dialog-close","",1,"btn","btn__small","btn-blue"],[1,"btn","btn__small","btn-red","btn-border-red",3,"click"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"h3",1),p(2,"Hey there! Will you be going solo for this game?"),s(),o(3,"mat-dialog-actions")(4,"button",2),p(5,"No"),s(),o(6,"button",3),f("click",function(){return a.onSinglePlayer()}),p(7," Yes "),s()()())},dependencies:[Ie,Pe],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container__header[_ngcontent-%COMP%]{margin:1rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let t=n;return t})();var Jt=(t,n,r,e)=>({"btn-border-blue":t,"btn-font-blue":n,"btn-border-red":r,"btn-font-red":e}),Xt=(t,n,r,e)=>({"btn-border-yellow":t,"btn-font-yellow":n,"btn-border-red":r,"btn-font-red":e});function Yt(t,n){if(t&1&&(o(0,"div",23),p(1),s()),t&2){let r=m();c(),M(" ",r.getFirstErrorMessage()," ")}}function Kt(t,n){if(t&1){let r=S();o(0,"button",24),f("click",function(){v(r);let i=m();return h(i.onAdd())}),p(1," Create "),s()}if(t&2){let r=m();l("disabled",r.form.invalid)("ngClass",ee(2,Jt,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function Wt(t,n){if(t&1){let r=S();o(0,"button",24),f("click",function(){v(r);let i=m();return h(i.onUpdate())}),p(1," Update "),s()}if(t&2){let r=m();l("disabled",r.form.invalid)("ngClass",ee(2,Xt,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}var Re=(()=>{let n=class n extends Te{constructor(e,i,a,g,b,C,Ot,kt,Et){super(e),this.toastService=e,this.fb=i,this.activatedRoute=a,this.gamesService=g,this.spaceManagementService=b,this.entityImagePipe=C,this.router=Ot,this.dialog=kt,this.navigationService=Et,this.imagePreview=null,this.editTableId=null,this.showPassword=!1,this.gameId=null,this.form=this.initFormGroup(),this.navigationService.setPreviousUrl("space/home")}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{this.gameId=Number.parseInt(e.get("gameId")??"");let i=e.get("tableId");this.gameId?this.fetchGameByIdForCreate(this.gameId):i&&(this.editTableId=Number.parseInt(i),this.spaceManagementService.getTableById(this.editTableId).subscribe({next:a=>{this.form.patchValue({tableName:a.name,maxPeople:a.maxPeople,password:a.password}),this.fetchGameByIdForUpdate(a.gameId)}}))})}get getHeader(){return this.editTableId?"Update Game Table":"Create Game Table "}showInfoForGame(){this.navigationService.setPreviousUrl(`/space/create/${this.gameId}`),this.router.navigateByUrl(`games/${this.gameId}/details`)}backNavigateBtn(){this.editTableId&&this.router.navigateByUrl(`space/${this.editTableId}/details`),this.router.navigateByUrl(this.navigationService.getPreviousUrl()??"/space/home")}togglePasswordVisibility(){this.showPassword=!this.showPassword}onAdd(){this.form.valid&&this.spaceManagementService.add({gameId:this.form.controls.gameId.value,name:this.form.controls.tableName.value,maxPeople:this.form.controls.maxPeople.value,password:this.form.controls.password.value,isSoloModeActive:!1}).subscribe({next:()=>{this.toastService.success({message:D.ChangesSaved,type:T.Success}),this.router.navigateByUrl("/space/home")},error:e=>{this.handleServerErrors(e),this.toastService.error({message:D.FailedToSaveChanges,type:T.Error})}})}onUpdate(){this.form.valid&&this.editTableId&&this.spaceManagementService.update({id:this.editTableId,name:this.form.controls.tableName.value,maxPeople:this.form.controls.maxPeople.value,password:this.form.controls.password.value}).subscribe({next:()=>{this.toastService.success({message:D.ChangesSaved,type:T.Success}),this.router.navigateByUrl(`/space/${this.editTableId}/details`)},error:e=>{this.handleServerErrors(e),this.toastService.error({message:D.FailedToSaveChanges,type:T.Error})}})}getControlDisplayName(e){switch(e){case"gameName":return"Scanned Game";case"tableName":return"Table Name";case"maxPeople":return"Max People";case"password":return"Password";default:return e}}fetchGameByIdForUpdate(e){this.gamesService.getById(e).subscribe({next:i=>{i&&(this.gameId=i.id,this.form.patchValue({gameName:i.name,gameId:i.id}),this.entityImagePipe.transform(ie.Games,i.imageId).subscribe(a=>this.imagePreview=a))}})}fetchGameByIdForCreate(e){this.gamesService.getById(e).subscribe({next:i=>{i&&(this.form.patchValue({gameName:i.name,gameId:i.id}),this.entityImagePipe.transform(ie.Games,i.imageId).subscribe(a=>this.imagePreview=a),i.minPlayers===1&&this.dialog.open(Ct,{}).afterClosed().subscribe(g=>{g&&this.spaceManagementService.add({gameId:this.form.controls.gameId.value,name:"",maxPeople:0,password:"",isSoloModeActive:!0}).subscribe({next:()=>{this.toastService.success({message:D.ChangesSaved,type:T.Success}),this.router.navigateByUrl("/space/home")},error:b=>{this.handleServerErrors(b),this.toastService.error({message:D.FailedToSaveChanges,type:T.Error})}})}))},error:i=>{ae(()=>i)}})}initFormGroup(){return this.fb.group({gameName:new E("",[B.required]),gameId:new E(null),tableName:new E("",[B.required,B.minLength(3)]),maxPeople:new E(3,[B.required]),password:new E("")})}};n.\u0275fac=function(i){return new(i||n)(d(J),d(be),d(Se),d(X),d(w),d(ye),d(I),d(Y),d(lt))},n.\u0275cmp=y({type:n,selectors:[["app-add-update-club-space"]],features:[le],decls:30,vars:10,consts:[[3,"backClicked","header","withBackBtn","withQRcode"],[1,"container",3,"formGroup"],[1,"input-field","qr-code-field"],["for","gameName",1,"required"],["type","text","placeholder","scanned game","name","gameName","id","gameName","formControlName","gameName","readonly","readonly"],[1,"qr-code"],["src","/shared/assets/images/qr-code.png","alt",""],[1,"wrapper_image",3,"click"],["alt","",3,"src"],[1,"input-field"],["for","tableName",1,"required"],["placeholder","table Name","type","text","id","tableName","formControlName","tableName"],[1,"input-group"],["for","max-people",1,"required"],["placeholder","max people","type","number","id","max-people","formControlName","maxPeople"],[1,"input-field","password-field"],["for","password"],["placeholder","password","id","password","formControlName","password",3,"type"],[3,"isVisibleChange","isVisible"],[1,"info-message"],["class","errors",4,"ngIf"],[1,"wrapper_btn"],["type","button","class","btn btn-gray",3,"disabled","ngClass","click",4,"ngIf"],[1,"errors"],["type","button",1,"btn","btn-gray",3,"click","disabled","ngClass"]],template:function(i,a){i&1&&(o(0,"app-header",0),f("backClicked",function(){return a.backNavigateBtn()}),s(),o(1,"form",1)(2,"div",2)(3,"label",3),p(4,"Scanned Game"),s(),_(5,"input",4),o(6,"a",5),_(7,"img",6),s()(),o(8,"div",7),f("click",function(){return a.showInfoForGame()}),_(9,"img",8),s(),o(10,"div",9)(11,"label",10),p(12,"Table Name"),s(),_(13,"input",11),s(),o(14,"div",12)(15,"div",9)(16,"label",13),p(17,"Max People"),s(),_(18,"input",14),s(),o(19,"div",15)(20,"label",16),p(21,"Password"),s(),_(22,"input",17),o(23,"app-password-visibility-toggle",18),Xe("isVisibleChange",function(b){return Je(a.showPassword,b)||(a.showPassword=b),b}),s()()(),o(24,"span",19),p(25,"If no password is set, anyone can join the session until the maximum participant limit is reached."),s(),u(26,Yt,2,1,"div",20),o(27,"div",21),u(28,Kt,2,7,"button",22)(29,Wt,2,7,"button",22),s()()),i&2&&(l("header",a.getHeader)("withBackBtn",!0)("withQRcode",!0),c(),l("formGroup",a.form),c(8),l("src",a.imagePreview||"/shared/assets/images/upload_img.svg",ce),c(13),l("type",a.showPassword?"text":"password"),c(),$e("isVisible",a.showPassword),c(3),l("ngIf",a.getFirstErrorMessage()),c(2),l("ngIf",!a.editTableId),c(),l("ngIf",a.editTableId))},dependencies:[V,P,Z,L,We,G,H,fe,ue,it,j],styles:[".wrapper_image[_ngcontent-%COMP%]{text-align:center;margin:1rem 0;display:block}.wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:7rem;height:7rem;object-fit:cover;border-radius:20px;border:.15rem solid black}.container[_ngcontent-%COMP%]{font-size:#ffffff;padding:1rem 1.3rem 8rem;border-radius:10px;text-align:center}.container[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{display:block;color:#9b9b9b;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .qr-code-field[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .qr-code-field[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%]{position:absolute;right:1rem;top:1.7rem}.container[_ngcontent-%COMP%]   .qr-code-field[_ngcontent-%COMP%]   .qr-code[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem;object-fit:cover}"]});let t=n;return t})();function ei(t,n){if(t&1&&(o(0,"form",6)(1,"div",7)(2,"label",8),p(3,"Password"),s(),_(4,"input",9),s()()),t&2){let r=m();c(4),l("formControl",r.password)}}var yt=(()=>{let n=class n{constructor(e,i,a){this.data=e,this.dialogRef=i,this.spaceManagementService=a,this.password=new E("",B.required),console.log("data->",this.data)}join(){this.spaceManagementService.join(this.data.roomId,this.password.value).subscribe({next:()=>{this.dialogRef.close({hasError:!1})},error:e=>{e.error.errors.Password&&this.dialogRef.close({hasError:!0,errorMessage:e.error.errors.Password[0]}),e.error.errors.MaxPeople&&this.dialogRef.close({hasError:!0,errorMessage:e.error.errors.MaxPeople[0]})}})}};n.\u0275fac=function(i){return new(i||n)(d(we),d(xe),d(w))},n.\u0275cmp=y({type:n,selectors:[["app-join-table-confirm-dialog"]],decls:11,vars:3,consts:[[1,"dialog-container"],[1,"dialog-container__header","m-4"],["class","input",4,"ngIf"],[1,"errors"],["mat-dialog-close","",1,"btn","btn__small","btn-red"],[1,"btn","btn__small","btn-orange","btn-border-orange",3,"click","disabled"],[1,"input"],[1,"input-field"],["for","password",1,"required"],["placeholder","enter password","type","password","id","password",3,"formControl"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"h3",1),p(2,"Join The Room?"),s(),u(3,ei,5,1,"form",2),o(4,"div",3),p(5),s(),o(6,"mat-dialog-actions")(7,"button",4),p(8,"Cancel"),s(),o(9,"button",5),f("click",function(){return a.join()}),p(10," Join "),s()()()),i&2&&(c(3),l("ngIf",a.data.withPassword),c(2),R(a.data.error),c(4),l("disabled",a.data.withPassword?a.password.invalid:!1))},dependencies:[P,Z,L,G,H,et,Ie,Pe],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{display:flex;justify-content:center}.dialog-container[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:0}.dialog-container__header[_ngcontent-%COMP%]{margin:1rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let t=n;return t})();function ti(t,n){t&1&&(o(0,"div",5),p(1," There are no active game tables at the moment. "),_(2,"br"),p(3," Check back later or create a new table to start playing! "),s())}function ii(t,n){t&1&&(o(0,"div",11),_(1,"img",17),s())}function ni(t,n){if(t&1){let r=S();o(0,"div",14),u(1,ii,2,0,"div",15),o(2,"button",16),f("click",function(){v(r);let i=m().$implicit,a=m(2);return h(a.onJoin(i.id,i.isLocked))}),p(3," Join "),s()()}if(t&2){let r=m().$implicit;c(),l("ngIf",r.isLocked)}}function ri(t,n){if(t&1&&(o(0,"div",6)(1,"div",7)(2,"div",8)(3,"span"),p(4),s(),o(5,"span"),p(6),s()(),o(7,"div",9),_(8,"app-chip",10)(9,"app-chip",10),o(10,"div",11),_(11,"img",12),U(12,"entityImage"),U(13,"async"),s()()(),u(14,ni,4,1,"div",13),s()),t&2){let r=n.$implicit,e=m(2);c(4),M("",r.tableName," Room "),c(2),M("Playing ",r.gameName," "),c(2),l("size","small")("color","orange")("text",r.peopleJoined+" joined"),c(),l("size","small")("color","red")("text",r.maxPeople+" max"),c(2),l("src",te(13,13,Ye(12,10,e.ImageEntityType.Games,r.gameImageId)),ce),c(3),l("ngIf",e.getCurrentUserId!==r.createdBy)}}function ai(t,n){if(t&1&&(o(0,"div",2),u(1,ti,4,0,"div",3)(2,ri,15,15,"div",4),s()),t&2){let r=n.ngIf;c(),l("ngIf",r.length===0),c(),l("ngForOf",r)}}var Mt=(()=>{let n=class n{constructor(e,i,a,g,b,C){this.spaceManagementService=e,this.authService=i,this.dialog=a,this.router=g,this.searchService=b,this.menuTabsService=C,this.ImageEntityType=ie}ngOnDestroy(){this.menuTabsService.resetData(),this.searchService.hideSearchForm()}get getCurrentUserId(){return this.authService.getUser?.id}ngOnInit(){this.spaceAvailableTableList$=this.spaceManagementService.getSpaceAvailableTableList()}handleSearchExpression(e){this.spaceAvailableTableList$=this.spaceManagementService.getSpaceAvailableTableList(e)}onJoin(e,i,a=""){this.dialog.open(yt,{width:"17rem",data:{roomId:e,withPassword:i,error:a}}).afterClosed().subscribe(b=>{if(b){if(console.log("closedResult->",b),b.hasError){this.onJoin(e,i,b.errorMessage);return}this.router.navigateByUrl("space/home")}})}};n.\u0275fac=function(i){return new(i||n)(d(w),d($),d(Y),d(I),d(ct),d(ot))},n.\u0275cmp=y({type:n,selectors:[["app-club-space-list"]],decls:3,vars:5,consts:[["header","Join Game Table",3,"searchExpressionResult","withBottomLine","withSearch"],["class","wrapper_tables",4,"ngIf"],[1,"wrapper_tables"],["class","no-records",4,"ngIf"],["class","wrapper_tables__item",4,"ngFor","ngForOf"],[1,"no-records"],[1,"wrapper_tables__item"],[1,"wrapper_left"],[1,"text"],[1,"chips"],[3,"size","color","text"],[1,"image"],["alt","",3,"src"],["class","info-btn",4,"ngIf"],[1,"info-btn"],["class","image",4,"ngIf"],[1,"btn","btn-yellow",3,"click"],["src","../../../../shared/assets/images/locked.png","alt",""]],template:function(i,a){i&1&&(o(0,"app-header",0),f("searchExpressionResult",function(b){return a.handleSearchExpression(b)}),s(),u(1,ai,3,2,"div",1),U(2,"async")),i&2&&(l("withBottomLine",!0)("withSearch",!0),c(),l("ngIf",te(2,3,a.spaceAvailableTableList$)))},dependencies:[k,P,j,gt,_e,ye],styles:[".wrapper_tables[_ngcontent-%COMP%]{display:flex;width:100%;flex-direction:column;align-items:center;margin-bottom:7rem}.wrapper_tables[_ngcontent-%COMP%]   .no-records[_ngcontent-%COMP%]{font-size:1.2rem;text-align:center;margin:0 auto;margin-top:6rem;width:80%}.wrapper_tables__item[_ngcontent-%COMP%]{display:flex;width:90%;border-bottom:.2rem solid #31313b;justify-content:space-between;padding:.5rem}.wrapper_tables__item[_ngcontent-%COMP%]   .wrapper_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.wrapper_tables__item[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_tables__item[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   app-chip[_ngcontent-%COMP%]{margin-right:.4rem}.wrapper_tables__item[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{margin:0 .2rem}.wrapper_tables__item[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem;object-fit:cover;border-radius:5rem;border:.1rem solid #20232a}.wrapper_tables__item[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:1.2rem}.wrapper_tables__item[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:end;align-items:end}.wrapper_tables__item[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:flex;justify-content:start;margin:.5rem .75rem .5rem 1rem;text-align:center;align-items:center}.wrapper_tables__item[_ngcontent-%COMP%]   .info-btn[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem;object-fit:cover;border-radius:5rem;border:.1rem solid #20232a}"]});let t=n;return t})();function si(t,n){if(t&1&&(o(0,"span")(1,"strong"),p(2,"Password:"),s(),p(3),s()),t&2){let r=m(3);c(3),M(" ",r.detailsSpaceTable.password," ")}}function ci(t,n){if(t&1&&(o(0,"div",10)(1,"span")(2,"strong"),p(3,"Name:"),s(),p(4),s(),o(5,"span")(6,"strong"),p(7,"Game:"),s(),p(8),s(),o(9,"span")(10,"strong"),p(11,"Max People:"),s(),p(12),s(),u(13,si,4,1,"span",2),s()),t&2){let r=n.ngIf,e=m(2);c(4),M(" ",r.name,""),c(4),M(" ",r.gameName,""),c(4),M(" ",r.maxPeople," "),c(),l("ngIf",e.isUserCreatorOfTable)}}function li(t,n){if(t&1){let r=S();o(0,"div",19),O(),o(1,"svg",20),f("click",function(){v(r);let i=m().$implicit,a=m(3);return h(a.onRemoveUserFromTable(i.userId,i.IsVirtualParticipant,i.participantId))}),_(2,"path",21),s()()}}function pi(t,n){if(t&1&&(o(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),p(4),o(5,"div",17),p(6),s()()(),u(7,li,3,0,"div",18),s()()),t&2){let r=n.$implicit,e=m(2).ngIf;c(4),M(" ",r.userName," "),c(2),M(" joined before: ",r.joinedBefore," mins "),c(),l("ngIf",e.isPlayerHaveActiveTable)}}function mi(t,n){if(t&1&&(o(0,"section",11),u(1,pi,8,3,"div",12),s()),t&2){let r=n.ngIf;c(),l("ngForOf",r)}}function di(t,n){if(t&1){let r=S();pe(0),o(1,"div",3),u(2,ci,14,4,"div",4),o(3,"a",5),O(),o(4,"svg",6),f("click",function(){v(r);let i=de(7);return h(i.toggleMenu())}),_(5,"path",7),s(),A(),o(6,"app-controls-menu",8,0),f("menuItemClick",function(i){v(r);let a=m();return h(a.handleMenuItemClick(i.value))}),s()()(),u(8,mi,2,1,"section",9),U(9,"async"),me()}if(t&2){let r=m();c(2),l("ngIf",r.detailsSpaceTable),c(4),l("menuItems",r.menuItems.asObservable()),c(2),l("ngIf",te(9,3,r.spaceTableParticipantList$))}}var xt=(()=>{let n=class n{constructor(e,i,a,g){this.router=e,this.activeRoute=i,this.spaceManagementService=a,this.authService=g,this.menuItems=new re([])}get isUserCreatorOfTable(){return this.detailsSpaceTable.createdBy===this.authService.getUser?.id}get isUserAdmin(){return this.authService.getUser?this.authService.getUser.role!==at.User:!1}handleMenuItemClick(e){this.menuItemClickFunction(e)}menuItemClickFunction(e){e==="update"?this.router.navigateByUrl(Me.SPACE_MANAGEMENT.UPDATE_BY_ID(this.tableId)):e==="add-virtual-user"?this.addVirtualParticipant():e==="close-room"?this.onClose():e==="leave-room"&&this.onLeave()}ngOnInit(){this.spaceManagementService.getUserActiveTable().subscribe({next:e=>{this.userActiveTable=e}}),this.activeRoute.params.subscribe(e=>{this.tableId=e.id,this.spaceTableParticipantList$=this.spaceManagementService.getSpaceTableParticipantList(this.tableId),this.spaceManagementService.getTableById(this.tableId).subscribe({next:i=>{this.detailsSpaceTable=i,this.menuItems.next([{key:"update",label:"Update",isVisible:this.isUserCreatorOfTable},{key:"add-virtual-user",label:"Add Virtual User",isVisible:this.isUserAdmin},{key:"close-room",label:"Close Room",isVisible:this.isUserCreatorOfTable},{key:"leave-room",label:"Leave Room",isVisible:this.userActiveTable?this.userActiveTable.isPlayerParticipateInTable:!1}])}})})}backToSpaceHome(){this.router.navigateByUrl("space/home")}handleSearchExpression(e){}onLeave(){this.spaceManagementService.leaveTable(this.tableId).subscribe({next:()=>{this.router.navigateByUrl("space/home")}})}onClose(){this.spaceManagementService.closeTable(this.tableId).subscribe({next:()=>{this.router.navigateByUrl("space/home")}})}addVirtualParticipant(){this.spaceManagementService.addVirtualParticipant(this.tableId).subscribe({next:()=>{this.spaceTableParticipantList$=this.spaceManagementService.getSpaceTableParticipantList(this.tableId)}})}onRemoveUserFromTable(e,i,a){i?this.spaceManagementService.removeVirtualParticipant(this.tableId,a).subscribe({next:()=>{this.spaceTableParticipantList$=this.spaceManagementService.getSpaceTableParticipantList(this.tableId)}}):this.spaceManagementService.removeUserFromTable(this.tableId,e).subscribe({next:()=>{this.spaceTableParticipantList$=this.spaceManagementService.getSpaceTableParticipantList(this.tableId)}})}};n.\u0275fac=function(i){return new(i||n)(d(I),d(Se),d(w),d($))},n.\u0275cmp=y({type:n,selectors:[["app-club-space-details"]],decls:2,vars:4,consts:[["menu",""],["header","Room",3,"searchExpressionResult","backClicked","withSearch","withBackBtn","withBottomLine"],[4,"ngIf"],[1,"wrapper_helper"],["class","info",4,"ngIf"],[1,"wrapper_menu"],["height","24px","viewBox","0 -960 960 960","width","24px","fill","#fafafa",3,"click"],["d","m382.38-88-16.46-122.69q-13.15-4.77-31.7-14.61-18.55-9.84-30.6-21.08L187.92-198 91.31-372l95.23-73.54q-.77-8.77-1.92-18.34-1.16-9.58-1.16-18.35 0-7.49 1.16-16.19 1.15-8.71 1.92-20.04L91.31-590l96.61-170.46 110.93 45.61q14.92-11.92 33.27-21.92 18.34-10 34.03-16.54L382.38-874h195.24l15.46 122.46q18 8.08 33.65 16.54 15.65 8.46 31.35 21.15l114-46.61L868.69-590l-100.31 75.85q2.31 9.38 2.7 18.23.38 8.84.38 15.92 0 6.31-.77 15.15-.77 8.85-1.54 20.54L865.92-372l-96.61 174-116.23-49.15q-14.7 11.69-29.12 20.42-14.42 8.73-29.88 14.27L577.62-88H382.38ZM439-154h79.08L533-263.31q31.23-8 56.84-22.54 25.6-14.55 51.85-39.69L739.46-284l40.77-68-85.54-65.77q5-17.08 7.12-32.65 2.11-15.58 2.11-31.31 0-16.5-1.61-30.08-1.62-13.57-6.62-32.88L781.77-610 743-678l-101.08 40.77q-18.15-20.92-49.62-39.14t-60.07-24.32L521-808h-82.77l-10.46 105.54q-34.23 7.46-61.58 23.31-27.34 15.84-52.42 41.92L217-678l-40.77 68L260-545.23q-5 17.46-7 33.23-2 15.77-2 30.19 0 12.81 2 28.81 2 16 6.23 36.23l-83 64.77L217-284l97-41q27.54 25.77 54.38 40.62 26.85 14.84 58.62 22.84L439-154Zm36.92-200q53.45 0 90.73-37.28 37.27-37.27 37.27-90.72 0-53.45-37.27-90.72Q529.37-610 475.92-610q-53.07 0-90.54 37.28-37.46 37.27-37.46 90.72 0 53.45 37.46 90.72Q422.85-354 475.92-354ZM479-481Z"],[3,"menuItemClick","menuItems"],["class","wrapper_library",4,"ngIf"],[1,"info"],[1,"wrapper_library"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"wrapper_library__item"],[1,"wrapper_info"],[1,"wrapper_title"],[1,"wrapper_description"],["class","wrapper_library__item-actions",4,"ngIf"],[1,"wrapper_library__item-actions"],["width","24px","height","24px","fill","#fafafa","viewBox","0 -960 960 960",3,"click"],["d","M300.62-128q-38.85 0-64.74-25.88Q210-179.77 210-218.62V-724h-40v-66h188v-38.77h246V-790h188v66h-40v505.38q0 38.35-26.14 64.48Q699.73-128 661.38-128H300.62ZM686-724H276v505.38q0 10.77 6.92 17.7 6.93 6.92 17.7 6.92h360.76q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93V-724ZM371.31-275h66v-368h-66v368Zm153.38 0h66v-368h-66v368ZM276-724v530-530Z"]],template:function(i,a){i&1&&(o(0,"app-header",1),f("searchExpressionResult",function(b){return a.handleSearchExpression(b)})("backClicked",function(){return a.backToSpaceHome()}),s(),u(1,di,10,5,"ng-container",2)),i&2&&(l("withSearch",!0)("withBackBtn",!0)("withBottomLine",!0),c(),l("ngIf",a.userActiveTable))},dependencies:[k,P,Ce,j,_e],styles:[".wrapper_btn[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:1rem}.wrapper_library[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;padding-bottom:7rem;margin:0 auto;padding-top:1rem;overflow-y:visible}.wrapper_library__item-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;padding-bottom:.3rem;align-items:center}.wrapper_library__item[_ngcontent-%COMP%]{position:relative;display:flex;padding-bottom:.3rem;padding-top:.5rem;border-bottom:.2rem solid #2b2e35}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:space-between}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]{padding-left:1rem;font-size:large;padding-top:.2rem;align-self:baseline;word-break:break-all;width:80%}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{padding-top:.5rem;width:100%;font-size:.6rem;color:#9b9b9b;word-break:break-all}@media (min-width: 568px){.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{width:85%}}.wrapper_helper[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin-top:1rem}.wrapper_helper[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:65%;word-break:break-all;color:#9b9b9b}.wrapper_helper[_ngcontent-%COMP%]   .wrapper_menu[_ngcontent-%COMP%]{background:#98989d;display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:20%}"]});let t=n;return t})();var gi=t=>({hide:t});function _i(t,n){if(t&1&&_(0,"div",3),t&2){let r=n.$implicit,e=m();He("top",r.top)("left",r.left),l("ngClass",q(5,gi,e.isRolling))}}var wt=(()=>{let n=class n{constructor(){this.currentFace=1,this.isActive=!0,this.isRolling=!1,this.faceChange=new De,this.directionChange=new De}ngOnInit(){this.isActive&&(this.isRolling=!0,setTimeout(()=>{this.faceChange.emit(this.currentFace),this.isRolling=!1},500))}getDotPositions(e){return{1:[{top:"50%",left:"50%"}],2:[{top:"25%",left:"25%"},{top:"75%",left:"75%"}],3:[{top:"50%",left:"50%"},{top:"25%",left:"25%"},{top:"75%",left:"75%"}],4:[{top:"25%",left:"25%"},{top:"25%",left:"75%"},{top:"75%",left:"25%"},{top:"75%",left:"75%"}],5:[{top:"50%",left:"50%"},{top:"25%",left:"25%"},{top:"25%",left:"75%"},{top:"75%",left:"25%"},{top:"75%",left:"75%"}],6:[{top:"25%",left:"25%"},{top:"25%",left:"50%"},{top:"25%",left:"75%"},{top:"75%",left:"25%"},{top:"75%",left:"50%"},{top:"75%",left:"75%"}]}[e]||[]}changeFace(e){this.isActive&&(this.isRolling=!0,this.directionChange.emit(e),setTimeout(()=>{this.currentFace=e==="left"?this.currentFace===1?6:this.currentFace-1:this.currentFace===6?1:this.currentFace+1,this.faceChange.emit(this.currentFace),this.isRolling=!1},500))}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=y({type:n,selectors:[["app-dice-roller"]],inputs:{currentFace:"currentFace",isActive:"isActive"},outputs:{faceChange:"faceChange",directionChange:"directionChange"},decls:3,vars:5,consts:[[1,"controls"],[1,"die"],["class","dot",3,"ngClass","top","left",4,"ngFor","ngForOf"],[1,"dot",3,"ngClass"]],template:function(i,a){i&1&&(o(0,"div",0)(1,"div",1),u(2,_i,1,7,"div",2),s()()),i&2&&(c(),Qe("die face-"+a.currentFace),Ze("roll",a.isRolling),c(),l("ngForOf",a.getDotPositions(a.currentFace)))},dependencies:[V,k],styles:[".controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:3rem 0}button[_ngcontent-%COMP%]{font-size:20px;padding:10px;margin:0 15px;cursor:pointer;background-color:#ddd;border:1px solid #333;border-radius:5px;transition:background-color .3s}button[_ngcontent-%COMP%]:hover{background-color:#333;color:#fff}.hide[_ngcontent-%COMP%]{opacity:0}.die[_ngcontent-%COMP%]{width:5rem;height:5rem;background-color:#333;border:1px solid #ddd;border-radius:10px;position:relative;display:flex;justify-content:center;align-items:center;box-shadow:5px 5px 10px #00000080}.dot[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:50%;background-color:#fff;position:absolute;transform:translate(-50%,-50%)}.roll[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_roll .5s infinite}@keyframes _ngcontent-%COMP%_roll{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let t=n;return t})();var ui=["singleDice"],bi=["secondDice"],Pt=t=>({btn_disabled:t}),vi=(t,n,r,e)=>({"btn-border-green":t,"btn-font-green":n,"btn-border-red":r,"btn-font-red":e}),hi=t=>({"slot-active":t});function Ci(t,n){if(t&1){let r=S();o(0,"app-dice-roller",31,1),f("faceChange",function(i){v(r);let a=m();return h(a.updateGuests(i))})("directionChange",function(i){v(r);let a=m();return h(a.onDirectionChange(i))}),s()}if(t&2){let r=m();l("@mergeItems",r.isSplit?"reverse":"start")("currentFace",r.guestsFirstSection)}}function Si(t,n){if(t&1){let r=S();o(0,"div",32),_(1,"app-dice-roller",33,2),o(3,"app-dice-roller",34,3),f("faceChange",function(i){v(r);let a=m();return h(a.updateGuests(i))})("directionChange",function(i){v(r);let a=m();return h(a.onDirectionChange(i))}),s()()}if(t&2){let r=m();c(),l("currentFace",r.guestsFirstSection)("isActive",!1)("@flowLeft",r.isSplit?"start":"reverse"),c(2),l("@flowRight",r.isSplit?"start":"reverse")}}function yi(t,n){if(t&1){let r=S();o(0,"div",35),f("click",function(){let i=v(r).index,a=m();return h(a.onSlotClick(i))}),p(1),s()}if(t&2){let r=n.$implicit,e=n.index,i=m();l("ngClass",q(2,hi,e===i.activeSlotIndex)),c(),M(" ",r," ")}}var It=(()=>{let n=class n extends Te{constructor(e,i,a,g,b){super(e),this.toastService=e,this.fb=i,this.router=a,this.spaceManagementService=g,this.tenantSettingsService=b,this.menuItems=new re([]),this.timeSlots=[],this.activeSlotIndex=0,this.guestsFirstSection=1,this.guestsSecondSection=0,this.isSplit=!1,this.form=this.initFormGroup(),this.tenantSettingsService.get().subscribe({next:C=>{C&&(this.timeSlots=C.reservationHours)}}),this.menuItems.next([{key:"qr-code",label:"QR Code"},{key:"update",label:"Update"},{key:"copy",label:"Add Copy"},{key:"delete",label:"Delete"}])}get isAddButtonActive(){return this.guestsFirstSection+this.guestsSecondSection===12}get isMinusButtonActive(){return this.guestsFirstSection===1}toggleSplit(){this.isSplit=!this.isSplit}getActiveDiceRoller(){return this.isSplit?this.secondDice:this.singleDice}updateGuests(e){this.isSplit?this.guestsSecondSection=e:this.guestsFirstSection=e}onDirectionChange(e){this.guestsFirstSection===6&&e==="right"?(this.guestsFirstSection=6,this.isSplit=!0):this.guestsSecondSection===1&&e==="left"&&(this.guestsSecondSection=0,this.isSplit=!1)}onSlotClick(e){this.activeSlotIndex=e}backNavigateBtn(){this.router.navigateByUrl("space/home")}showMenu(e,i){e.stopPropagation(),i.toggleMenu()}bookTable(){this.form.valid&&this.spaceManagementService.bookTable(this.guestsFirstSection+this.guestsSecondSection,this.form.controls.reservationDate.value,this.timeSlots[this.activeSlotIndex]).subscribe({next:()=>{this.toastService.success({message:D.ChangesApplied,type:T.Success}),this.router.navigateByUrl("space/home")},error:e=>{e.error.detail==="User already have an active reservation"?this.toastService.error({message:"This account already have an active reservation",type:T.Error}):(this.handleServerErrors(e),this.toastService.error({message:D.SomethingWrong,type:T.Error}))}})}getControlDisplayName(e){return e}initFormGroup(){return this.fb.group({reservationDate:new E(null,[B.required])})}};n.\u0275fac=function(i){return new(i||n)(d(J),d(be),d(I),d(w),d(rt))},n.\u0275cmp=y({type:n,selectors:[["app-club-space-booking"]],viewQuery:function(i,a){if(i&1&&(Fe(ui,5),Fe(bi,5)),i&2){let g;Ae(g=Be())&&(a.singleDice=g.first),Ae(g=Be())&&(a.secondDice=g.first)}},features:[le],decls:35,vars:18,consts:[["controls",""],["singleDice",""],["firstDice",""],["secondDice",""],[1,"wrapper_icons"],[1,"arrow","left",3,"click"],[1,"header_name"],["viewBox","0 -960 960 960",1,"info",3,"click"],["d","M448-284h66v-236h-66v236Zm31.82-308.92q14.64 0 24.72-9.9 10.08-9.91 10.08-24.54 0-14.64-9.91-24.72-9.9-10.07-24.53-10.07-14.64 0-24.72 9.9-10.08 9.9-10.08 24.54 0 14.63 9.91 24.71 9.9 10.08 24.53 10.08ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],[1,"wrapper",3,"formGroup"],[3,"currentFace","faceChange","directionChange",4,"ngIf"],["class","item-wrapper",4,"ngIf"],[1,"people_container"],[1,"input-field"],["for","numberOfGuests",1,"required"],[1,"input-container"],["type","number","id","numberOfGuests",1,"people_input",3,"value"],[1,"plus_container",3,"ngClass"],["height","24px","viewBox","0 -960 960 960","width","24px","fill","#fafafa",3,"click"],["d","M447-448H208v-66h239v-239h66v239h239v66H513v239h-66v-239Z"],[1,"minus_container",3,"ngClass"],["d","M208-448v-66h544v66H208Z"],[1,"input-field","date"],["for","reservationDate",1,"required"],["type","date","id","reservationDate","formControlName","reservationDate",1,"people_input"],["for","min-age",1,"required"],[1,"slots","scroller"],["class","slot","l","",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn_container"],[1,"btn","btn-gray","create-btn",3,"click","ngClass"],["infoDescription",`Reserve your table to enjoy your game session at the club. Select the
  number of guests, pick a time slot, and confirm your booking below.`,3,"isInfo"],[3,"faceChange","directionChange","currentFace"],[1,"item-wrapper"],[3,"currentFace","isActive"],[3,"faceChange","directionChange"],["l","",1,"slot",3,"click","ngClass"]],template:function(i,a){if(i&1){let g=S();o(0,"div",4)(1,"span",5),f("click",function(){return v(g),h(a.backNavigateBtn())}),s(),o(2,"span",6),p(3,"Booking"),s(),O(),o(4,"svg",7),f("click",function(){v(g);let C=de(34);return h(C.toggleMenu())}),_(5,"path",8),s()(),A(),o(6,"form",9),u(7,Ci,2,2,"app-dice-roller",10)(8,Si,5,4,"div",11),o(9,"div",12)(10,"div",13)(11,"label",14),p(12,"Number Of Guests"),s(),o(13,"div",15),_(14,"input",16),o(15,"div",17),O(),o(16,"svg",18),f("click",function(){let C;return v(g),h((C=a.getActiveDiceRoller())==null?null:C.changeFace("right"))}),_(17,"path",19),s()(),A(),o(18,"div",20),O(),o(19,"svg",18),f("click",function(){let C;return v(g),h((C=a.getActiveDiceRoller())==null?null:C.changeFace("left"))}),_(20,"path",21),s()()()()(),A(),o(21,"div",22)(22,"label",23),p(23,"Reservation Date"),s(),_(24,"input",24),s(),o(25,"div",13)(26,"label",25),p(27,"Available Time Slots"),s(),o(28,"div",26),u(29,yi,2,4,"div",27),s()(),o(30,"div",28)(31,"button",29),f("click",function(){return v(g),h(a.bookTable())}),p(32," Book a Table "),s()()(),_(33,"app-controls-menu",30,0)}i&2&&(c(6),l("formGroup",a.form),c(),l("ngIf",!a.isSplit),c(),l("ngIf",a.isSplit),c(6),l("value",a.guestsFirstSection+a.guestsSecondSection),c(),l("ngClass",q(9,Pt,a.isAddButtonActive)),c(3),l("ngClass",q(11,Pt,a.isMinusButtonActive)),c(11),l("ngForOf",a.timeSlots),c(2),l("ngClass",ee(13,vi,a.form.valid,a.form.valid,a.form.invalid,a.form.invalid)),c(2),l("isInfo",!0))},dependencies:[V,k,P,Z,L,G,H,fe,ue,Ce,wt],styles:['.wrapper_icons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 1rem 0;align-items:center}.wrapper_icons[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{position:absolute;right:1rem;top:3.25rem;background-color:#2b2e35;padding:.5rem;z-index:1000;width:10rem;text-align:center}.wrapper_icons[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:9rem;text-align:center;line-height:2rem;font-size:1.2rem}.wrapper_icons[_ngcontent-%COMP%]   .header_name[_ngcontent-%COMP%]{font-size:1.5rem;padding-top:1rem;padding-bottom:.5rem;word-wrap:break-word;width:70%;text-align:center}.wrapper_icons[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:3rem;height:3rem;display:inline-block;position:relative;border:.1rem solid #98989d;border-radius:2.5rem}.wrapper_icons[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:before{content:"";display:block;width:.75rem;height:.75rem;top:65%;left:63%;border-style:solid;border-color:#98989d;border-width:.2rem .2rem 0 0;position:absolute;transform-origin:50% 50%}.wrapper_icons[_ngcontent-%COMP%]   .arrow.left[_ngcontent-%COMP%]:before{transform:rotate(-135deg);margin:-.9rem 0 0 -.6rem}.wrapper_icons[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#75a0ff}.wrapper[_ngcontent-%COMP%]{margin:1rem}.people_container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;align-items:center}.people_container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .plus_container[_ngcontent-%COMP%]{background:#46945b;display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:50%;margin:0 .2rem}.people_container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .minus_container[_ngcontent-%COMP%]{background:#bf3c65;display:flex;align-items:center;justify-content:center;width:2rem;height:2rem;border-radius:50%;margin:0 .2rem}.people_container[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .btn_disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.people_container[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   .people_input[_ngcontent-%COMP%]{width:17.5%;border-radius:2rem;text-align:center}.date[_ngcontent-%COMP%]{width:40%}.slots[_ngcontent-%COMP%]{display:flex;overflow:auto}.slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{width:3rem;display:flex;background-color:#31313b;padding:.75rem 3rem;justify-content:center;border-radius:.5rem;margin:1rem 1rem .5rem .2rem}.slots[_ngcontent-%COMP%]   .slot-active[_ngcontent-%COMP%]{box-shadow:#fff .1px .1px 5px .1px}.scroller[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.btn_container[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn_container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.65rem 5rem}.item-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}'],data:{animation:[ve("flowLeft",[N("start",x({transform:"translateX(-50px)",opacity:1})),N("reverse",x({transform:"translateX(0)",opacity:1})),z("* => start",[x({transform:"translateX(0)",opacity:0}),Q("0.6s ease-out")]),z("* => reverse",[Q("1.2s ease-in-out",he([x({transform:"translateX(-25px)",opacity:1,offset:.5}),x({transform:"translateX(0)",opacity:1,offset:1})]))])]),ve("flowRight",[N("start",x({transform:"translateX(50px)",opacity:1})),N("reverse",x({transform:"translateX(0)",opacity:1})),z("* => start",[x({transform:"translateX(0)",opacity:0}),Q("0.6s ease-out")]),z("* => reverse",[Q("1.2s ease-in-out",he([x({transform:"translateX(25px)",opacity:1,offset:.5}),x({transform:"translateX(0)",opacity:1,offset:1})]))])]),ve("mergeItems",[N("start",x({transform:"scale(1)",opacity:1})),N("reverse",x({transform:"scale(1)",opacity:1})),z("start => reverse",[Q("1s ease-in-out",he([x({transform:"scale(1.1)",opacity:.8,offset:.5}),x({transform:"scale(1)",opacity:1,offset:1})]))])])]}});let t=n;return t})();var qe=(()=>{let n=class n{constructor(e,i){this.tableService=e,this.router=i}canActivate(){return this.tableService.getUserActiveTable().pipe(Ue(e=>e.activeTableId?(this.router.navigateByUrl(Me.SPACE_MANAGEMENT.HOME),!1):!0))}};n.\u0275fac=function(i){return new(i||n)(Ee(w),Ee(I))},n.\u0275prov=Ge({token:n,factory:n.\u0275fac,providedIn:"root"});let t=n;return t})();var Mi=[{path:"home",component:vt},{path:"create/:gameId",component:Re,canActivate:[qe]},{path:"update/:tableId",component:Re},{path:"list",component:Mt,canActivate:[qe]},{path:":id/details",component:xt},{path:"booking",component:It}],Tt=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=se({type:n}),n.\u0275inj=oe({imports:[Ve.forChild(Mi),Ve]});let t=n;return t})();var Wn=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=se({type:n}),n.\u0275inj=oe({imports:[nt,pt,Tt,_t,st,dt]});let t=n;return t})();export{Wn as ClubSpaceManagementModule};
