import{a as mi}from"./chunk-DTF2TMHG.js";import{a as tt,b as it}from"./chunk-W6OYX7H4.js";import{a as F}from"./chunk-W43YP37E.js";import{a as Vt,b as Nt}from"./chunk-OR6DQMCE.js";import{b as nt,c as Qt}from"./chunk-AF5TXU3F.js";import{a as Bt,b as jt}from"./chunk-DBWYQLUR.js";import{a as Rt}from"./chunk-3YFOIB2Z.js";import{a as j}from"./chunk-6JEORSH2.js";import{a as D}from"./chunk-RG3YGCS2.js";import{a as Dt,b as Lt}from"./chunk-UV2HFFUQ.js";import{a as re}from"./chunk-IGE7THSU.js";import{a as Ke}from"./chunk-ZNCIGRRM.js";import{a as xe,b as ie,c as Y,d as ne,e as Me,f as kt}from"./chunk-257RNC4W.js";import{a as P}from"./chunk-B6POORFO.js";import{b as E,c as et}from"./chunk-4XCZJEOQ.js";import{a as ce}from"./chunk-PQJ34A2R.js";import{a as W}from"./chunk-ELPMLOTJ.js";import{a as Se,b as pe,c as qt,d as Ft}from"./chunk-S4L6UGIL.js";import{$a as st,Aa as N,Ab as xt,Bc as ye,Ca as C,E as vt,Ea as v,Ec as le,Fa as d,Ga as bt,Gb as fe,Gc as Ye,Ha as yt,Hb as T,Ib as K,Ic as $,Jb as ve,Jc as Et,Kb as Q,Kc as k,L as Le,La as Te,Lb as We,Lc as Gt,M as qe,Ma as Ee,Mb as ue,Na as Ge,Nb as Mt,Nc as mt,O as Fe,Oa as Ae,Oc as we,P as ut,Pa as c,Pb as he,Pc as ee,Qa as q,Qc as te,Ra as S,Rb as Ce,Rc as Je,S as w,Sa as Be,Sb as St,Sc as Xe,T as Ve,Tb as It,Ua as Qe,Ub as Ot,Va as je,Vb as be,Vc as At,W as u,Wa as Ue,Wb as Pt,X as h,Xb as Tt,Y as M,Z as _e,_a as Ze,ab as wt,ba as ht,bb as ze,cb as x,db as I,e as si,eb as H,fa as Z,ia as m,j as me,ja as p,na as Ne,oa as f,ob as He,pb as B,qa as l,qb as O,s as _t,tb as R,u as ft,ua as Ct,ub as $e,wa as s,xa as o,ya as _,yc as G,za as V}from"./chunk-JJGLVIRE.js";var Ut=(()=>{let n=class n{constructor(t,i,a,g){this.data=t,this.dialogRef=i,this.gameService=a,this.toastService=g}delete(){this.gameService.delete(this.data.id).subscribe(t=>{this.toastService.success({message:"Deleted",type:G.Success}),this.dialogRef.close(!0)})}};n.\u0275fac=function(i){return new(i||n)(p(ie),p(xe),p(P),p(W))},n.\u0275cmp=w({type:n,selectors:[["app-game-confirm-delete-dialog"]],decls:8,vars:0,consts:[[1,"dialog-container"],[1,"dialog-container__header","m-4"],["mat-dialog-close","",1,"btn","btn__small","btn-blue"],[1,"btn","btn__small","btn-red","btn-border-red",3,"click"]],template:function(i,a){i&1&&(s(0,"div",0)(1,"h3",1),c(2,"Are you Sure?"),o(),s(3,"mat-dialog-actions")(4,"button",2),c(5,"Cancel"),o(),s(6,"button",3),v("click",function(){return a.delete()}),c(7," Delete "),o()()())},dependencies:[Me,ne],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container__header[_ngcontent-%COMP%]{margin:1rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let e=n;return e})();function li(e,n){if(e&1&&(s(0,"h3",5),c(1),o()),e&2){let r=d();m(),S(" ",r.data.Name," ")}}function ci(e,n){if(e&1&&(s(0,"div",6),_(1,"qrcode",7),o()),e&2){let r=d();m(),l("qrdata",r.serializeData())("width",200)("margin",4)("scale",128)("errorCorrectionLevel","M")}}var Ie=(()=>{let n=class n{constructor(t,i){this.data=t,this.dialogRef=i}serializeData(){return JSON.stringify(this.data)}};n.\u0275fac=function(i){return new(i||n)(p(ie),p(xe))},n.\u0275cmp=w({type:n,selectors:[["app-game-qr-code-dialog"]],decls:6,vars:2,consts:[[1,"dialog-container"],["class","dialog-container__header m-4",4,"ngIf"],["class","qrcodeImage",4,"ngIf"],[1,"btn_wrapper"],["mat-dialog-close","",1,"btn","btn__small","btn-gray","btn-border-blue","btn-font-blue"],[1,"dialog-container__header","m-4"],[1,"qrcodeImage"],[1,"demoBorderRadius",3,"qrdata","width","margin","scale","errorCorrectionLevel"]],template:function(i,a){i&1&&(s(0,"div",0),f(1,li,2,1,"h3",1)(2,ci,2,5,"div",2),s(3,"div",3)(4,"button",4),c(5," Close "),o()()()),i&2&&(m(),l("ngIf",a.data),m(),l("ngIf",a.data))},dependencies:[O,ne,Dt],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b;position:relative}.dialog-container__header[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;text-align:center;padding:0 1rem;word-break:break-word}.dialog-container[_ngcontent-%COMP%]   .btn_wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.qrcodeImage[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.demoBorderRadius[_ngcontent-%COMP%]{border-radius:1.2rem;margin-bottom:1rem;overflow:hidden}"]});let e=n;return e})();var Oe=(()=>{let n=class n{constructor(t){this.api=t}getList(t=""){return this.api.post(`/${le.GAME_CATEGORIES.LIST}`,{searchExpression:t})}};n.\u0275fac=function(i){return new(i||n)(Fe(Ye))},n.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();function _i(e,n){e&1&&(s(0,"div",5),_(1,"img",6),s(2,"p",7),c(3,"No Games Found"),o()())}function fi(e,n){e&1&&(M(),s(0,"svg",19),_(1,"path",20),o())}function vi(e,n){e&1&&(M(),s(0,"svg",21),_(1,"path",22),o())}function ui(e,n){if(e&1){let r=C();M(),s(0,"svg",23),v("click",function(i){u(r);let a=d().$implicit,g=d(),b=Ae(4);return h(g.showMenu(a.id,i,b))}),_(1,"path",24),o()}}function hi(e,n){if(e&1){let r=C();s(0,"div",8),v("click",function(){let i=u(r).$implicit,a=d();return h(a.navigateToGameDetails(i.id))}),s(1,"div",9),_(2,"img",10),x(3,"entityImage"),x(4,"async"),o(),s(5,"div",11)(6,"div",12),c(7),s(8,"div",13),c(9),x(10,"truncate"),o()(),s(11,"div",14)(12,"div",15),f(13,fi,2,0,"svg",16)(14,vi,2,0,"svg",17),c(15),o(),f(16,ui,2,0,"svg",18),x(17,"async"),o()()()}if(e&2){let r,t=n.$implicit,i=d();m(2),l("src",I(4,10,H(3,7,i.ImageEntityType.Games,t.imageId)),Z),m(5),S(" ",t.name," "),m(2),S(" ",I(10,12,t.description)," "),m(4),l("ngIf",!t.isLiked),m(),l("ngIf",t.isLiked),m(),S(" ",t.likes," "),m(),l("ngIf",(r=I(17,14,i.isAdmin$))!==null&&r!==void 0?r:!1)}}var ke=(()=>{let n=class n{constructor(t,i,a,g,b,y,U,se,X){this.router=t,this.activeRoute=i,this.gameService=a,this.menuTabsService=g,this.searchService=b,this.permissionService=y,this.dialog=U,this.gameCategoriesService=se,this.NavigationService=X,this.games=[],this.menuItems=new me([]),this.categoryId=null,this.visibleMenuId=null,this.isAdmin$=this.permissionService.hasUserAction(tt.GamesCUD),this.ImageEntityType=ee,this.selectedCategoryName$=new me(null),this.categoryList=[],this.menuTabsService.setActive(F.GAMES)}ngOnDestroy(){this.menuTabsService.resetData(),this.searchService.hideSearchForm(),this.selectedCategoryName$.next(null)}showMenu(t,i,a){i.stopPropagation(),this.visibleMenuId=this.visibleMenuId===t?null:t,a.toggleMenu()}ngOnInit(){this.menuItems.next([{key:"qr-code",label:"QR Code"},{key:"update",label:"Update"},{key:"copy",label:"Add Copy"},{key:"delete",label:"Delete"}]),this.activeRoute.params.subscribe(t=>{this.categoryId=t.id,this.categoryId&&this.fetchGameListByCategoryId(this.categoryId,"",!0)}),this.categoryId||this.fetchGameList()}navigateToGameDetails(t){this.NavigationService.setPreviousUrl(this.router.url),this.router.navigateByUrl(E.GAMES.DETAILS(t))}handleSearchExpression(t){this.categoryId?this.fetchGameListByCategoryId(this.categoryId,t):this.fetchGameList(t)}onMenuOption(t,i){i.stopPropagation(),t==="update"&&this.visibleMenuId?this.router.navigateByUrl(E.GAMES.UPDATE(this.visibleMenuId)):t==="copy"&&this.visibleMenuId?this.router.navigateByUrl(E.GAMES.ADD_EXISTING_GAME(this.visibleMenuId)):t==="delete"&&this.visibleMenuId?this.openDeleteDialog(this.visibleMenuId):t==="qr-code"&&this.dialog.open(Ie,{width:"17rem",data:{Id:this.visibleMenuId,Name:this.games.find(a=>a.id===this.visibleMenuId)?.name??"Game Qr Code",Type:re.Game}}),this.visibleMenuId=null}fetchGameListByCategoryId(t,i="",a=!1){a?ft([this.gameService.getListByCategoryId(t,i),this.gameCategoriesService.getList("")]).subscribe(([g,b])=>{this.games=g??[],this.categoryList=b??[];let y=this.categoryList.find(U=>U.id===Number(t));this.selectedCategoryName$.next(y?.name??null)}):this.gameService.getListByCategoryId(t,i).subscribe(g=>{this.games=g??[]})}fetchGameList(t=""){this.gameService.getList(t).subscribe({next:i=>this.games=i??[],error:i=>{console.log(i)}})}openDeleteDialog(t){this.dialog.open(Ut,{data:{id:t}}).afterClosed().subscribe(a=>{a&&this.fetchGameList()})}};n.\u0275fac=function(i){return new(i||n)(p(k),p($),p(P),p(D),p(Se),p(it),p(Y),p(Oe),p(j))},n.\u0275cmp=w({type:n,selectors:[["app-games-library"]],decls:5,vars:3,consts:[["controls",""],[1,"wrapper_library"],["class","no_records",4,"ngIf"],["class","wrapper_library__item",3,"click",4,"ngFor","ngForOf"],[3,"menuItemClick","menuItems"],[1,"no_records"],["src","/shared/assets/images/no-games-found.png","alt",""],[1,"first-header"],[1,"wrapper_library__item",3,"click"],[1,"wrapper_image"],["alt","Game Image",3,"src"],[1,"wrapper_info"],[1,"wrapper_title"],[1,"wrapper_description"],[1,"wrapper_right"],[1,"wrapper_likes"],["class","like-icon","viewBox","0 -960 960 960","fill","#e8eaed",4,"ngIf"],["class","like-icon heart-full","viewBox","0 -960 960 960",4,"ngIf"],["class","wrapper_menu","height","2rem","viewBox","0 -960 960 960","width","2rem","fill","#FFFFFF",3,"click",4,"ngIf"],["viewBox","0 -960 960 960","fill","#e8eaed",1,"like-icon"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Zm0-90.15q98-89.77 161-152.65 63-62.89 100-109.39t51-81.61q14-35.12 14-70.35 0-61-40.5-101.5T662-784q-45.77 0-87.15 27.77-41.39 27.77-63.31 73.61h-63.08q-22.69-46.61-63.69-74Q343.77-784 298-784q-62.23 0-103.12 40.5Q154-703 154-642q0 35.23 14 70.35 14 35.11 51 81.61t100 109q63 62.5 161 153.04Zm0-278Z"],["viewBox","0 -960 960 960",1,"like-icon","heart-full"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Z"],["height","2rem","viewBox","0 -960 960 960","width","2rem","fill","#FFFFFF",1,"wrapper_menu",3,"click"],["d","M88-170v-103.08h103.08V-170H88Zm213.85 0v-103.08H872V-170H301.85ZM88-428.46v-103.08h103.08v103.08H88Zm213.85 0v-103.08H872v103.08H301.85ZM88-686.92V-790h103.08v103.08H88Zm213.85 0V-790H872v103.08H301.85Z"]],template:function(i,a){if(i&1){let g=C();s(0,"section",1),f(1,_i,4,0,"div",2)(2,hi,18,16,"div",3),o(),s(3,"app-controls-menu",4,0),v("menuItemClick",function(y){return u(g),h(a.onMenuOption(y.value,y.event))}),o()}i&2&&(m(),l("ngIf",a.games.length===0),m(),l("ngForOf",a.games),m(),l("menuItems",a.menuItems.asObservable()))},dependencies:[B,O,ye,R,te,Je],styles:[".wrapper_library[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;padding-bottom:7rem;margin:0 auto;padding-top:1.5rem;overflow-y:visible}.wrapper_library[_ngcontent-%COMP%]   .no_records[_ngcontent-%COMP%]{text-align:center;margin:2rem;font-size:1.5rem;display:flex;flex-direction:column;align-items:center}.wrapper_library[_ngcontent-%COMP%]   .no_records[_ngcontent-%COMP%]   .first-header[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.2rem}.wrapper_library[_ngcontent-%COMP%]   .no_records[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15rem;width:15rem}.wrapper_library__item[_ngcontent-%COMP%]{position:relative;display:flex;padding-bottom:.3rem;padding-top:.5rem;border-bottom:.2rem solid #2b2e35}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:space-between}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]{padding-left:1rem;font-size:large;padding-top:.2rem;align-self:baseline;word-break:break-all;width:60%}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{padding-top:.5rem;width:100%;font-size:.8rem;color:#9b9b9b;word-break:break-all}@media (min-width: 568px){.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{width:85%}}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]{display:flex;position:absolute;right:0;font-size:small}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]   .wrapper_likes[_ngcontent-%COMP%]{color:#bf3c65;margin-right:1rem;font-size:large}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]   .wrapper_likes[_ngcontent-%COMP%]   .like-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;position:relative;right:.2rem;top:.3rem;fill:#bf3c65}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem;height:5rem;min-width:5rem;min-height:5rem;object-fit:cover;border-radius:20px;border:.1rem solid black}.wrapper_menu[_ngcontent-%COMP%]{background:#98989d;padding:.2rem;border-radius:20%}"]});let e=n;return e})();var Ci=["*"];function bi(e,n){if(e&1){let r=C();s(0,"a",10),v("click",function(){u(r);let i=d(2);return h(i.openQrCodeDialog())}),_(1,"img",11),o()}}function yi(e,n){if(e&1&&(V(0),f(1,bi,2,0,"a",9),N()),e&2){let r=d();m(),l("ngIf",r.game.id)}}function wi(e,n){if(e&1){let r=C();M(),s(0,"svg",14),v("click",function(){u(r);let i=d(2);return h(i.toggleGameLikeStatus())}),_(1,"path",15),o()}}function xi(e,n){if(e&1){let r=C();M(),s(0,"svg",16),v("click",function(){u(r);let i=d(2);return h(i.toggleGameLikeStatus())}),_(1,"path",17),o()}}function Mi(e,n){if(e&1&&(V(0),f(1,wi,2,0,"svg",12)(2,xi,2,0,"svg",13),N()),e&2){let r=d();m(),l("ngIf",!r.game.isLiked),m(),l("ngIf",r.game.isLiked)}}function Si(e,n){if(e&1&&(s(0,"span",18),c(1),o()),e&2){let r=n.$implicit;Ct("",r.class," ",r.enabled?"":"disabled",""),l("routerLink",r.route),m(),q(r.label)}}var Pe=(()=>{let n=class n{constructor(t,i,a,g){this.gameService=t,this.menuTabsService=i,this.authService=a,this.dialog=g,this.backNavigateBtn=()=>{},this.refresh=new ht,this.isQrCodeVisible=this.authService.getUser?.role!==Ke.User,this.menuItems=[],this.ImageEntityType=ee}ngOnDestroy(){this.menuTabsService.resetData()}ngOnInit(){let t=location.pathname;this.updateMenuItemsWithPage(t)}openQrCodeDialog(){this.dialog.open(Ie,{width:"17rem",data:{Id:this.game.id,Name:this.game.name,Type:re.Game}})}updateMenuItemsWithPage(t){this.menuItems=[{label:"Statistics",class:t==E.GAMES.DETAILS(this.game.id)?"active":"",enabled:!0,visible:!0,route:E.GAMES.DETAILS(this.game.id)},{label:"Availability",class:t==E.GAMES.AVAILABILITY(this.game.id)?"active":"",enabled:!0,visible:!0,route:E.GAMES.AVAILABILITY(this.game.id)},{label:"Reviews",class:t==E.GAMES.REVIEWS(this.game.id)?"active":"",enabled:!0,visible:!0,route:E.GAMES.REVIEWS(this.game.id)}]}toggleGameLikeStatus(){let t=this.game.id;this.game.isLiked?this.gameService.dislikeGame(t).subscribe(i=>this.gameService.getById(t).subscribe(a=>{this.game=a,this.refresh.emit()})):this.gameService.likeGame(t).subscribe(i=>this.gameService.getById(t).subscribe(a=>{this.game=a,this.refresh.emit()}))}};n.\u0275fac=function(i){return new(i||n)(p(P),p(D),p(we),p(Y))},n.\u0275cmp=w({type:n,selectors:[["app-game-layout"]],inputs:{game:"game",backNavigateBtn:"backNavigateBtn"},outputs:{refresh:"refresh"},ngContentSelectors:Ci,decls:14,vars:10,consts:[[1,"wrapper_layout"],[1,"wrapper_icons"],[1,"arrow","left",3,"click"],[1,"header_name"],[4,"ngIf"],[1,"wrapper_image"],["alt","Game Image",3,"src"],[1,"wrapper_navigation"],[3,"routerLink","class",4,"ngFor","ngForOf"],["class","wrapper_qrCode",3,"click",4,"ngIf"],[1,"wrapper_qrCode",3,"click"],["src","/shared/assets/images/qr-code.png","alt",""],["class","heart","viewBox","0 -960 960 960","fill","#e8eaed",3,"click",4,"ngIf"],["class","heart heart-full","height","24px","viewBox","0 -960 960 960","width","24px",3,"click",4,"ngIf"],["viewBox","0 -960 960 960","fill","#e8eaed",1,"heart",3,"click"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Zm0-90.15q98-89.77 161-152.65 63-62.89 100-109.39t51-81.61q14-35.12 14-70.35 0-61-40.5-101.5T662-784q-45.77 0-87.15 27.77-41.39 27.77-63.31 73.61h-63.08q-22.69-46.61-63.69-74Q343.77-784 298-784q-62.23 0-103.12 40.5Q154-703 154-642q0 35.23 14 70.35 14 35.11 51 81.61t100 109q63 62.5 161 153.04Zm0-278Z"],["height","24px","viewBox","0 -960 960 960","width","24px",1,"heart","heart-full",3,"click"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Z"],[3,"routerLink"]],template:function(i,a){i&1&&(bt(),s(0,"div",0)(1,"div",1)(2,"span",2),v("click",function(){return a.backNavigateBtn()}),o(),s(3,"span",3),c(4),o(),f(5,yi,2,1,"ng-container",4)(6,Mi,3,2,"ng-container",4),o(),s(7,"div",5),_(8,"img",6),x(9,"entityImage"),x(10,"async"),o(),s(11,"div",7),f(12,Si,2,6,"span",8),o(),yt(13),o()),i&2&&(m(4),q(a.game.name),m(),l("ngIf",a.isQrCodeVisible),m(),l("ngIf",!a.isQrCodeVisible),m(2),l("src",I(10,8,H(9,5,a.ImageEntityType.Games,a.game.imageId)),Z),m(4),l("ngForOf",a.menuItems))},dependencies:[B,O,Gt,R,te],styles:['.wrapper_layout[_ngcontent-%COMP%]{overflow-y:visible;padding-bottom:8rem}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 1rem 0;align-items:center}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]   .wrapper_qrCode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;object-fit:cover}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]   .header_name[_ngcontent-%COMP%]{font-size:1.5rem;padding-top:1rem;padding-bottom:.5rem;word-wrap:break-word;width:70%;text-align:center}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{width:3rem;height:3rem;display:inline-block;position:relative;border:.1rem solid #98989d;border-radius:2.5rem}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]:before{content:"";display:block;width:.75rem;height:.75rem;top:65%;left:63%;border-style:solid;border-color:#98989d;border-width:.2rem .2rem 0 0;position:absolute;transform-origin:50% 50%}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]   .arrow.left[_ngcontent-%COMP%]:before{transform:rotate(-135deg);margin:-.9rem 0 0 -.6rem}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_icons[_ngcontent-%COMP%]   .heart[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#bf3c65;font-size:3rem}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]{text-align:center}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10rem;height:10rem;object-fit:cover;border-radius:1rem;border:.1rem solid black}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;margin:2rem}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_navigation[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#46945b;background-color:#31313b}.wrapper_layout[_ngcontent-%COMP%]   .wrapper_navigation[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:2.5rem}.HeartAnimation[_ngcontent-%COMP%]{background-image:url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/66955/web_heart_animation.png);background-repeat:no-repeat;background-size:2900%;background-position:left;width:3rem;height:3rem;color:#bf3c65;cursor:pointer}.animate[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_heart-burst .8s steps(28) forwards}@keyframes _ngcontent-%COMP%_heart-burst{0%{background-position:left}to{background-position:right}}']});let e=n;return e})();function Ii(e,n){if(e&1){let r=C();s(0,"app-game-layout",1),v("refresh",function(){u(r);let i=d();return h(i.fetchGame())}),s(1,"div",2)(2,"span"),c(3,"About the game"),o(),s(4,"div",3)(5,"span"),c(6),o(),M(),s(7,"svg",4),_(8,"path",5),o()()(),_e(),s(9,"div",6)(10,"span"),c(11),o(),s(12,"div"),M(),s(13,"svg",7),_(14,"path",8),o(),c(15),o(),_e(),s(16,"div"),M(),s(17,"svg",7),_(18,"path",9),o(),c(19),o()(),_e(),s(20,"div",10)(21,"span"),c(22,"Description"),o(),s(23,"span",11),c(24),o()()()}if(e&2){let r=n.ngIf,t=d();l("game",r)("backNavigateBtn",t.navigateBack.bind(t)),m(6),S(" ",r.likes," "),m(5),S("Age +",r.minAge," Years"),m(4),Be(" ",r.minPlayers,"-",r.maxPlayers," Players "),m(4),S(" ",r.averagePlaytime," min/s "),m(5),q(r.description)}}var $t=(()=>{let n=class n{constructor(t,i,a,g,b){this.gameService=t,this.activeRoute=i,this.menuTabsService=a,this.router=g,this.navigationService=b,this.menuTabsService.setActive(F.GAMES)}ngOnDestroy(){this.menuTabsService.resetData()}ngOnInit(){this.activeRoute.params.subscribe(t=>{this.gameId=t.id,this.fetchGame()})}navigateBack(){this.router.navigateByUrl(this.navigationService.getPreviousUrl()??"/games/library")}fetchGame(){this.game$=this.gameService.getById(this.gameId)}};n.\u0275fac=function(i){return new(i||n)(p(P),p($),p(D),p(k),p(j))},n.\u0275cmp=w({type:n,selectors:[["app-game-details"]],decls:2,vars:3,consts:[[3,"game","backNavigateBtn","refresh",4,"ngIf"],[3,"refresh","game","backNavigateBtn"],[1,"wrapper_info"],[1,"wrapper_info__likes"],["height","24px","viewBox","0 -960 960 960","width","24px",1,"heart-full"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Z"],[1,"wrapper_stats"],["viewBox","0 -960 960 960"],["d","M44.85-154.38v-96.85q0-34.85 16.61-59.24t44.57-38.67q56.05-27.78 113.62-44.01 57.58-16.23 136.2-16.23 78.27 0 135.52 16.23 57.25 16.23 113.29 44.01 27.97 14.28 44.58 38.67t16.61 59.24v96.85h-621Zm706 0v-102.7q0-32.77-12.58-73.14-12.57-40.37-42.42-68.47 41.46 6 79.27 18.65 37.8 12.66 72.5 30.96 31.83 16.85 49.68 41.86 17.85 25.01 17.85 50.14v102.7h-164.3Zm-396-357.24q-61.05 0-104.53-43.47-43.47-43.48-43.47-104.53 0-61.05 43.47-104.52 43.48-43.48 104.53-43.48 61.05 0 104.52 43.48 43.48 43.47 43.48 104.52t-43.48 104.53q-43.47 43.47-104.52 43.47Zm375.77-148q0 61.05-43.48 104.53-43.47 43.47-104.52 43.47-6.54 0-19.47-1.57-12.92-1.58-19.46-4.27 22.33-30.9 33.24-67.09 10.92-36.19 10.92-75.16t-11.43-74.59q-11.42-35.62-32.73-67.47 9.23-3.15 19.46-4.5t19.47-1.35q61.05 0 104.52 43.48 43.48 43.47 43.48 104.52ZM110.85-220.38h489v-30.85q0-14.08-5.04-22.62-5.04-8.53-20.27-16.15-45.77-23.92-100.39-38.65-54.61-14.73-118.8-14.73-64.2 0-118.81 14.73-54.62 14.73-100.39 38.65-15.23 7.62-20.27 16.15-5.03 8.54-5.03 22.62v30.85Zm244.12-357.24q33.88 0 57.88-24.12t24-58q0-33.88-24.13-57.88-24.12-24-58-24-33.87 0-57.87 24.13-24 24.12-24 58 0 33.87 24.12 57.87t58 24Zm.88 357.24Zm-1-439.24Z"],["d","m619.85-293.85 46.3-46.3L514-494.33V-684h-66v218.31l171.85 171.84ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88ZM480-480Zm0 326q136 0 231-95t95-231q0-136-95-231t-231-95q-136 0-231 95t-95 231q0 136 95 231t231 95Z"],[1,"wrapper_description"],[1,"wrapper_description__text"]],template:function(i,a){i&1&&(f(0,Ii,25,8,"app-game-layout",0),x(1,"async")),i&2&&l("ngIf",I(1,1,a.game$))},dependencies:[O,Pe,R],styles:[".wrapper_info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 1rem;align-items:center;color:#9b9b9b}.wrapper_info__likes[_ngcontent-%COMP%]{display:flex;align-items:center;color:#bf3c65}.wrapper_info__likes[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:.5rem}.wrapper_stats[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;color:#9b9b9b;font-size:.75rem;margin:1rem 0}.wrapper_stats[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem;fill:#9b9b9b;margin-right:.4rem}.wrapper_stats[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_description[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:start;margin:1rem;color:#9b9b9b}.wrapper_description__text[_ngcontent-%COMP%]{margin-top:.4rem;font-size:.75rem;white-space:pre-wrap}"]});let e=n;return e})();function Oi(e,n){e&1&&(s(0,"h3",6),c(1," Reservation Information "),o())}function Pi(e,n){if(e&1&&(s(0,"p"),c(1),o()),e&2){let r=d();m(),S(" Message from Staff: ",r.data.publicNote," ")}}function Ti(e,n){e&1&&(s(0,"p"),c(1," Don't forget to show the QR code to the Staff when you arrive in our space "),o())}function Ei(e,n){e&1&&(s(0,"p"),c(1," We're sorry, but your reservation couldn't be approved this time due to high demand. Please try again later or check out other available time slots. Thank you for understanding! "),o())}var Wt=(()=>{let n=class n{constructor(t){this.data=t,this.ReservationStatus=pe}};n.\u0275fac=function(i){return new(i||n)(p(ie))},n.\u0275cmp=w({type:n,selectors:[["app-availability-reservation-info-dialog"]],decls:9,vars:4,consts:[[1,"dialog-container"],["mat-dialog-close","","height","24px","viewBox","0 -960 960 960","width","24px","fill","#fafafa"],["d","m334-287.69 146-146 146 146L672.31-334l-146-146 146-146L626-672.31l-146 146-146-146L287.69-626l146 146-146 146L334-287.69ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],["class","dialog-container__header m-4",4,"ngIf"],[1,"info"],[4,"ngIf"],[1,"dialog-container__header","m-4"]],template:function(i,a){i&1&&(s(0,"div",0)(1,"mat-dialog-actions"),M(),s(2,"svg",1),_(3,"path",2),o()(),f(4,Oi,2,0,"h3",3),_e(),s(5,"div",4),f(6,Pi,2,1,"p",5)(7,Ti,2,0,"p",5)(8,Ei,2,0,"p",5),o()()),i&2&&(m(4),l("ngIf",a.data),m(2),l("ngIf",a.data.publicNote.length!==0),m(),l("ngIf",a.data.status===a.ReservationStatus.Approved),m(),l("ngIf",a.data.status===a.ReservationStatus.Declined))},dependencies:[O,Me,ne],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b;position:relative}.dialog-container__header[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:.5rem;text-align:center}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end;position:absolute;right:0}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:2.5rem}.dialog-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:1rem;text-align:start;font-size:1.2rem}.dialog-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let e=n;return e})();var Ai=(e,n)=>({info__unavailable:e,info__available:n}),Ri=(e,n)=>({"btn-border-red btn-font-red":e,"btn-border-green btn-font-green":n});function ki(e,n){e&1&&(s(0,"span"),c(1," Game reservation for your table will become available "),s(2,"strong"),c(3,"1 hour "),o(),c(4,"before your reserved time. "),o())}function Di(e,n){if(e&1&&(s(0,"span",5),c(1," You have table reservation for today "),_(2,"br"),s(3,"strong"),c(4),x(5,"date"),o(),_(6,"br"),f(7,ki,5,0,"span",2),o()),e&2){let r=d(4);m(4),q(H(5,2,r.activeBookedTableModel.reservationDate,r.DATE_TIME_FORMAT)),m(3),l("ngIf",!r.gameReservationStatus)}}function Li(e,n){if(e&1&&(V(0),f(1,Di,8,5,"span",4),N()),e&2){let r=d(3);m(),l("ngIf",r.isShowingActiveReservationTableMessage(r.activeBookedTableModel))}}function qi(e,n){e&1&&(s(0,"p",10),c(1," AVAILABLE "),o())}function Fi(e,n){e&1&&(s(0,"p",10),c(1," UNAVAILABLE "),o())}function Vi(e,n){if(e&1&&(s(0,"div",8),f(1,qi,2,0,"p",9)(2,Fi,2,0,"p",9),s(3,"p"),c(4),o()()),e&2){let r=n.ngIf;l("ngClass",st(5,Ai,r.availableCopies===0,r.availableCopies!==0)),m(),l("ngIf",r.availableCopies!==0),m(),l("ngIf",r.availableCopies===0),m(2),Be(" units ",r.availableCopies," / ",r.totalCopies," ")}}function Ni(e,n){if(e&1&&(V(0),s(1,"div",11)(2,"p",12),c(3," These details are prefilled from your table reservation. "),o()(),s(4,"div",13)(5,"label",14),c(6,"Your Crew?"),o(),_(7,"ng-select",15),o(),s(8,"div",13)(9,"label",16),c(10,"Arrival Time:"),o(),_(11,"ng-select",17),o(),N()),e&2){let r=d(4);m(7),l("disabled",!0)("readonly",!0)("ngModel",r.activeBookedTableModel.numberOfGuests.toString()),m(4),l("disabled",!0)("readonly",!0)("ngModel",r.populateReservationMinutes())("searchable",!0)}}function Bi(e,n){if(e&1&&(V(0),s(1,"div",13)(2,"label",14),c(3,"Your Crew?"),o(),_(4,"ng-select",18),o(),s(5,"div",13)(6,"label",16),c(7,"Arrival Time:"),o(),_(8,"ng-select",19),o(),N()),e&2){let r=d(4);m(4),l("items",r.peopleNumber)("searchable",!0),m(4),l("items",r.reservationMinutes)("searchable",!0)}}function Qi(e,n){if(e&1&&(V(0),f(1,Vi,5,8,"div",6),x(2,"async"),s(3,"form",7),f(4,Ni,12,7,"ng-container",2)(5,Bi,9,4,"ng-container",2),o(),N()),e&2){let r=d(3);m(),l("ngIf",I(2,4,r.gameInventory$)),m(2),l("formGroup",r.form),m(),l("ngIf",r.isOneHourLeftTillTheTableReservation()&&r.activeBookedTableModel),m(),l("ngIf",!r.isOneHourLeftTillTheTableReservation())}}function ji(e,n){e&1&&(s(0,"strong",29),c(1,"Under Review"),o())}function Ui(e,n){e&1&&(s(0,"strong",30),c(1,"Approved"),o())}function Zi(e,n){e&1&&(s(0,"strong",31),c(1,"Declined"),o())}function zi(e,n){e&1&&(s(0,"p",32),c(1," Your reservation hasn\u2019t been acknowledged by our staff. "),_(2,"br"),c(3," We\u2019ve extended it for an additional 5-10 minutes. "),_(4,"br"),c(5," If no one approves or declines your reservation, please contact us. "),o())}function Hi(e,n){e&1&&(s(0,"p",32),c(1," We\u2019ve extended your reservation with an "),_(2,"br"),c(3," additional 5-10 minutes. "),_(4,"br"),o())}function $i(e,n){if(e&1){let r=C();s(0,"div",33),M(),s(1,"svg",34),v("click",function(){u(r);let i=d(4);return h(i.openInfo())}),_(2,"path",35),o()()}}function Wi(e,n){if(e&1&&(s(0,"p",36)(1,"span",37),c(2),o()()),e&2){let r=d(4);m(2),q(r.display)}}function Yi(e,n){if(e&1){let r=C();s(0,"a",38),v("click",function(){u(r);let i=d(4);return h(i.openDialog(i.gameReservationStatus.reservationId))}),_(1,"img",39),o()}}function Ji(e,n){if(e&1&&(V(0),s(1,"div",20)(2,"p"),c(3," Your current reservation - "),f(4,ji,2,0,"strong",21)(5,Ui,2,0,"strong",22)(6,Zi,2,0,"strong",23),o()(),f(7,zi,6,0,"p",24)(8,Hi,5,0,"p",24),s(9,"div",25),f(10,$i,3,0,"div",26)(11,Wi,3,1,"p",27)(12,Yi,2,0,"a",28),o(),N()),e&2){let r=d(3);m(4),l("ngIf",r.gameReservationStatus.status===r.ReservationStatus.Pending),m(),l("ngIf",r.gameReservationStatus.status===r.ReservationStatus.Approved),m(),l("ngIf",r.gameReservationStatus.status===r.ReservationStatus.Declined),m(),l("ngIf",r.isTimerExpired&&r.gameReservationStatus.status===r.ReservationStatus.Pending),m(),l("ngIf",r.isTimerExpired&&r.gameReservationStatus.status===r.ReservationStatus.Approved),m(2),l("ngIf",r.gameReservationStatus.status===r.ReservationStatus.Declined||r.gameReservationStatus.status===r.ReservationStatus.Approved),m(),l("ngIf",r.gameReservationStatus.status!==r.ReservationStatus.Declined),m(),l("ngIf",r.gameReservationStatus.status===r.ReservationStatus.Approved)}}function Xi(e,n){if(e&1){let r=C();s(0,"div",41)(1,"button",42),v("click",function(){u(r);let i=d(3).ngIf,a=d();return h(a.onReservation(i.id))}),c(2," Prepare to arrive in "),s(3,"strong"),c(4),o(),c(5," mins "),o()()}if(e&2){let r=n.ngIf,t=d(4);m(),l("disabled",!t.form.valid||r.availableCopies===0)("ngClass",st(3,Ri,!t.form.valid||r.availableCopies===0,t.form.valid||r.availableCopies!==0)),m(3),q(t.form.controls.reservationInMinutes.value)}}function Ki(e,n){if(e&1&&(V(0),f(1,Xi,6,6,"div",40),x(2,"async"),N()),e&2){let r=d(3);m(),l("ngIf",I(2,1,r.gameInventory$))}}function en(e,n){if(e&1&&(V(0),s(1,"div",3)(2,"p"),c(3,"Reserve Your Seat and Get Ready to Play!"),o(),f(4,Li,2,1,"ng-container",2),o(),f(5,Qi,6,6,"ng-container",2)(6,Ji,13,8,"ng-container",2)(7,Ki,3,3,"ng-container",2),N()),e&2){let r=d(2);m(4),l("ngIf",r.activeBookedTableModel),m(),l("ngIf",!r.gameReservationStatus),m(),l("ngIf",r.gameReservationStatus),m(),l("ngIf",!r.gameReservationStatus)}}function tn(e,n){if(e&1){let r=C();V(0),s(1,"div",3)(2,"p"),c(3,"Reserve Your Seat and Get Ready to Play!"),o()(),s(4,"div",43)(5,"p",10),c(6,"GAME RESERVATION UNAVAILABLE"),o()(),s(7,"div",20),c(8," Reservation of game will be available after "),s(9,"strong",44),c(10,"closing"),o(),c(11," or "),s(12,"strong",44),c(13,"leaving"),o(),c(14," the current active table "),o(),s(15,"div",41)(16,"button",45),v("click",function(){u(r);let i=d(2);return h(i.navigateToActiveTable(i.userActiveSpaceTable.activeTableId))}),c(17," Active table "),o()(),N()}}function nn(e,n){if(e&1&&(s(0,"app-game-layout",1),f(1,en,8,4,"ng-container",2)(2,tn,18,0,"ng-container",2),o()),e&2){let r=n.ngIf,t=d();l("game",r)("backNavigateBtn",t.navigateBack.bind(t)),m(),l("ngIf",!t.userActiveSpaceTable||!t.userActiveSpaceTable.activeTableId),m(),l("ngIf",t.userActiveSpaceTable&&t.userActiveSpaceTable.activeTableId)}}var Yt=(()=>{let n=class n extends et{constructor(t,i,a,g,b,y,U,se,X,ot){super(y),this.gameService=t,this.activeRoute=i,this.router=a,this.fb=g,this.menuTabsService=b,this.toastService=y,this.authService=U,this.spaceManagementService=se,this.dialog=X,this.navigationService=ot,this.gameReservationStatus=null,this.ReservationStatus=pe,this.availableMinutes=[1,2,5,10,15,20,30,40,50,60],this.display="00:00",this.isTimerExpired=!1,this.peopleNumber=[],this.reservationMinutes=[],this.activeBookedTableModel=null,this.userActiveSpaceTable=null,this.DATE_TIME_FORMAT=Xe.DATE_TIME_FORMAT,this.form=this.initFormGroup(),this.menuTabsService.setActive(F.GAMES),this.peopleNumber=[1,2,3,4,5,6,7,8,9,10].map(L=>({id:L,name:L.toString()})),this.reservationMinutes=[1,2,5,10,15,20,30,40,50,60].map(L=>({id:L,name:L.toString()})),this.spaceManagementService.getActiveBookedTable().subscribe({next:L=>{this.activeBookedTableModel=L},error:()=>{this.activeBookedTableModel=null}}),this.spaceManagementService.getUserActiveTable().subscribe({next:L=>{this.userActiveSpaceTable=L}})}navigateToActiveTable(t){this.router.navigateByUrl(E.SPACE_MANAGEMENT.ROOM_DETAILS(t))}ngOnInit(){let t=this.activeRoute.snapshot.paramMap.get("id");this.gameId=t?Number.parseInt(t):-1,this.game$=this.gameService.getById(this.gameId),this.gameInventory$=this.gameService.getInventory(this.gameId),this.fetchReservationStatus(this.gameId)}populateReservationMinutes(){if(this.activeBookedTableModel){let t=new Date,a=new Date(this.activeBookedTableModel.reservationDate).getTime()-t.getTime();return Math.max(Math.floor(a/(1e3*60)),0)}return 0}isShowingActiveReservationTableMessage(t){let i=new Date,a=new Date(t.reservationDate);return t.status===pe.Approved&&i.getFullYear()===a.getFullYear()&&i.getMonth()===a.getMonth()&&i.getDate()===a.getDate()}isOneHourLeftTillTheTableReservation(){if(this.activeBookedTableModel){let t=new Date,a=new Date(this.activeBookedTableModel.reservationDate).getTime()-t.getTime();return this.activeBookedTableModel.status===pe.Approved&&a<=36e5?(console.log("one hour left"),!0):!1}return!1}openDialog(t){let i=this.dialog.open(Bt,{width:"17rem",data:{Id:t,Name:"GameReservation",Type:re.GameReservation,AdditionalData:{userId:this.authService.getUser?.id}}})}openInfo(){this.dialog.open(Wt,{data:{publicNote:this.gameReservationStatus?.publicNote??"",status:this.gameReservationStatus?.status??pe.Pending}})}getControlDisplayName(t){switch(t){case"reservationPeopleCount":return"People";case"reservationInMinutes":return"Arrive Time";default:return t}}fetchReservationStatus(t){this.gameService.reservationStatus(t).subscribe({next:i=>{if(this.gameReservationStatus=i,i){let a=this.calculateSecondsLeft(new Date(i.reservationDate));console.log("status",i),console.log("secondsLeft",a),a>0?this.startTimer(a):this.isTimerExpired=!0}},error:()=>{this.gameReservationStatus=null}})}ngOnDestroy(){this.menuTabsService.resetData()}navigateBack(){this.router.navigateByUrl(this.navigationService.getPreviousUrl()??"/games/library")}onReservation(t){this.form.valid&&this.gameService.reservation({gameId:t,durationInMinutes:this.form.controls.reservationInMinutes.value,peopleCount:this.form.controls.reservationPeopleCount.value}).subscribe({next:i=>{this.gameInventory$=this.gameService.getInventory(t),this.toastService.success({message:"Reservation is successfully",type:G.Success}),this.fetchReservationStatus(t)},error:i=>{let a=i.error.errors.reservationExist[0];a?this.toastService.error({message:a,type:G.Error}):this.toastService.error({message:"Reservation was not successfully",type:G.Error})}})}calculateSecondsLeft(t){let i=Date.now(),g=t.getTime()-i,b=Math.floor(g/1e3);return Math.max(b,0)}startTimer(t){let i=t,a=setInterval(()=>{let g=Math.floor(i/60),b=i%60,y=g<10?"0"+g:g,U=b<10?"0"+b:b;this.display=`${y}:${U}`,i--,i<0&&(clearInterval(a),this.display="00:00",this.isTimerExpired=!0,this.fetchReservationStatus(this.gameId))},1e3)}initFormGroup(){return this.fb.group({reservationPeopleCount:new Q(2,[T.required]),reservationInMinutes:new Q(15,[T.required])})}};n.\u0275fac=function(i){return new(i||n)(p(P),p($),p(k),p(be),p(D),p(W),p(we),p(Rt),p(Y),p(j))},n.\u0275cmp=w({type:n,selectors:[["app-game-availability"]],features:[Ne],decls:2,vars:3,consts:[[3,"game","backNavigateBtn",4,"ngIf"],[3,"game","backNavigateBtn"],[4,"ngIf"],[1,"header"],["class","header__information",4,"ngIf"],[1,"header__information"],["class","info",3,"ngClass",4,"ngIf"],["form","",1,"field-inputs",3,"formGroup"],[1,"info",3,"ngClass"],["class","info__status",4,"ngIf"],[1,"info__status"],[1,"reservation-indicator"],[1,"info-message"],[1,"input-field"],["for","min-age",1,"required"],["id","reservationPeopleCount","placeholder","How much people in your crew?","formControlName","reservationPeopleCount",1,"app-select-long","prefilled-field",3,"disabled","readonly","ngModel"],["for","approx-time",1,"required"],["id","reservationInMinutes","placeholder","When will you arrive?","formControlName","reservationInMinutes",1,"app-select-long","prefilled-field",3,"disabled","readonly","ngModel","searchable"],["id","reservationPeopleCount","bindValue","id","bindLabel","name","placeholder","How much people in your crew?","formControlName","reservationPeopleCount",1,"app-select-long",3,"items","searchable"],["id","reservationInMinutes","bindValue","id","bindLabel","name","placeholder","When will you arrive?","formControlName","reservationInMinutes",1,"app-select-long",3,"items","searchable"],[1,"info"],["class","waiting",4,"ngIf"],["class","approved",4,"ngIf"],["class","declined",4,"ngIf"],["class","expiry-message",4,"ngIf"],[1,"wrapper"],["class","info-container",4,"ngIf"],["class","circle",4,"ngIf"],["class","wrapper_qrCode",3,"click",4,"ngIf"],[1,"waiting"],[1,"approved"],[1,"declined"],[1,"expiry-message"],[1,"info-container"],["aria-label","More information","viewBox","0 -960 960 960",1,"info",3,"click"],["d","M448-284h66v-236h-66v236Zm31.82-308.92q14.64 0 24.72-9.9 10.08-9.91 10.08-24.54 0-14.64-9.91-24.72-9.9-10.07-24.53-10.07-14.64 0-24.72 9.9-10.08 9.9-10.08 24.54 0 14.63 9.91 24.71 9.9 10.08 24.53 10.08ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],[1,"circle"],[1,"timer"],[1,"wrapper_qrCode",3,"click"],["src","/shared/assets/images/qr-code.png","alt",""],["class","wrapper_btn",4,"ngIf"],[1,"wrapper_btn"],[1,"btn","btn-gray","btn-border-green","btn-font-green",3,"click","disabled","ngClass"],[1,"info","info__unavailable"],[1,"blue-font"],[1,"btn","btn-gray","btn-border-blue","btn-font-blue",3,"click"]],template:function(i,a){i&1&&(f(0,nn,3,4,"app-game-layout",0),x(1,"async")),i&2&&l("ngIf",I(1,1,a.game$))},dependencies:[He,O,ue,K,ve,he,Ce,nt,Pe,R,$e],styles:[".header[_ngcontent-%COMP%]{color:#9b9b9b;display:flex;align-items:center;flex-direction:column;text-align:center;margin:0 2rem}.header__information[_ngcontent-%COMP%]{color:#bf3c65}.expiry-message[_ngcontent-%COMP%]{color:#bf3c65;font-weight:700;text-align:center;margin:1rem}.info[_ngcontent-%COMP%]{margin:1rem;text-align:center}.info[_ngcontent-%COMP%]   .blue-font[_ngcontent-%COMP%]{color:#75a0ff}.info__status[_ngcontent-%COMP%]{font-size:1.25rem}.info__available[_ngcontent-%COMP%]{color:#46945b}.info__unavailable[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   .declined[_ngcontent-%COMP%]{color:#bf3c65}.info[_ngcontent-%COMP%]   .approved[_ngcontent-%COMP%]{color:#46945b}.info[_ngcontent-%COMP%]   .waiting[_ngcontent-%COMP%]{color:#98989d}.field-inputs[_ngcontent-%COMP%]{margin:1rem}.wrapper_qrCode[_ngcontent-%COMP%]{width:4rem;height:4rem}.wrapper_qrCode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;object-fit:cover}.wrapper[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.wrapper[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:4rem;height:4rem;fill:#75a0ff;animation:_ngcontent-%COMP%_breathe 1s ease-in-out infinite,glow 3s ease-in-out infinite;will-change:transform,filter}@keyframes _ngcontent-%COMP%_breathe{0%,to{transform:scale(1)}50%{transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_glow{0%,to{filter:drop-shadow(0 0 5px rgba(0,123,255,.5))}50%{filter:drop-shadow(0 0 15px rgba(0,123,255,.8))}}.wrapper[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:7rem;height:7rem;margin:.5rem;border:.2rem solid #98989d;border-radius:100%}.wrapper[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{font-size:2.5rem}.wrapper[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{font-size:4rem;transform:rotate(180deg)}.wrapper_btn[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.reservation-indicator[_ngcontent-%COMP%]{margin-bottom:1rem;background-color:#31313b;padding:.5rem;border-left:4px solid #46945b;border-right:4px solid #46945b}.info-message[_ngcontent-%COMP%]{font-size:.9rem;color:#46945b;margin:0;text-align:center}.prefilled-field[_ngcontent-%COMP%]{opacity:.5}"]});let e=n;return e})();var at=(()=>{let n=class n{constructor(t){this.api=t}getList(t){return this.api.get(`/${le.GAME_REVIEWS.CORE}/${t}`)}create(t){return this.api.post(`/${le.GAME_REVIEWS.CORE}`,{gameReview:t})}update(t){return this.api.put(`/${le.GAME_REVIEWS.CORE}`,{updateGameReviewDto:t})}delete(t){return this.api.delete(`/${le.GAME_REVIEWS.CORE}/${t}`)}};n.\u0275fac=function(i){return new(i||n)(Fe(Ye))},n.\u0275prov=Le({token:n,factory:n.\u0275fac,providedIn:"root"});let e=n;return e})();var Xt=(()=>{let n=class n{constructor(t,i,a,g){this.data=t,this.dialogRef=i,this.gameReviewService=a,this.toastService=g}deleteComment(){this.gameReviewService.delete(this.data.id).subscribe(t=>{this.toastService.success({message:"Deleted",type:G.Success}),this.dialogRef.close(!0)})}};n.\u0275fac=function(i){return new(i||n)(p(ie),p(xe),p(at),p(W))},n.\u0275cmp=w({type:n,selectors:[["app-game-review-confirm-delete-dialog"]],decls:8,vars:0,consts:[[1,"dialog-container"],[1,"dialog-container__header","m-4"],["mat-dialog-close","",1,"btn","btn__small","btn-blue"],[1,"btn","btn__small","btn-red","btn-border-red",3,"click"]],template:function(i,a){i&1&&(s(0,"div",0)(1,"h3",1),c(2,"Delete Review?"),o(),s(3,"mat-dialog-actions")(4,"button",2),c(5,"Cancel"),o(),s(6,"button",3),v("click",function(){return a.deleteComment()}),c(7," Delete "),o()()())},dependencies:[Me,ne],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container__header[_ngcontent-%COMP%]{margin:1rem}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}"]});let e=n;return e})();function rn(e,n){if(e&1&&(s(0,"span"),c(1),o()),e&2){let r=d(2);m(),S("",r.gameReviews.length," reviews")}}function an(e,n){if(e&1){let r=C();s(0,"span",9),v("click",function(){u(r);let i=d(2);return h(i.toggleReviewTextarea(!0))}),c(1,"write review "),M(),s(2,"svg",10),_(3,"path",11),o()()}}function on(e,n){if(e&1){let r=C();s(0,"div",12)(1,"span",13),v("click",function(){u(r);let i=d(2);return h(i.toggleReviewTextarea(!1,!0))}),c(2),M(),s(3,"svg",10),_(4,"path",14),o()(),s(5,"svg",15),v("click",function(){u(r);let i=d(2);return h(i.toggleReviewTextarea(!1))}),_(6,"path",16),o()()}if(e&2){let r=d(2);m(2),S(" ",r.currentReviewState===r.ReviewState.update?"update":"create"," ")}}function sn(e,n){e&1&&(s(0,"div"),c(1," Review is required. "),o())}function mn(e,n){e&1&&(s(0,"div"),c(1," Review cannot exceed 100 characters. "),o())}function ln(e,n){e&1&&(s(0,"div"),c(1," Review must be at least 10 characters long. "),o())}function cn(e,n){if(e&1&&(s(0,"div",21),f(1,sn,2,0,"div",3)(2,mn,2,0,"div",3)(3,ln,2,0,"div",3),o()),e&2){let r=d(3);m(),l("ngIf",r.reviewForm.controls.review.errors==null?null:r.reviewForm.controls.review.errors.required),m(),l("ngIf",r.reviewForm.controls.review.errors==null?null:r.reviewForm.controls.review.errors.maxlength),m(),l("ngIf",r.reviewForm.controls.review.errors==null?null:r.reviewForm.controls.review.errors.minlength)}}function pn(e,n){if(e&1&&(s(0,"form",17),_(1,"textarea",18),s(2,"label",19),c(3," Write Your Review"),o(),f(4,cn,4,3,"div",20),o()),e&2){let r=d(2);l("formGroup",r.reviewForm),m(4),l("ngIf",r.reviewForm.controls.review.invalid&&(r.reviewForm.controls.review.dirty||r.reviewForm.controls.review.touched))}}function dn(e,n){if(e&1){let r=C();M(),s(0,"svg",27),v("click",function(){u(r);let i=d().$implicit,a=d(2);return h(a.startUpdatingComment(i.id,i.review))}),_(1,"path",11),o()}}function gn(e,n){if(e&1){let r=C();M(),s(0,"svg",27),v("click",function(){u(r);let i=d().$implicit,a=d(2);return h(a.openDeleteDialog(i.id))}),_(1,"path",16),o()}}function _n(e,n){if(e&1&&(s(0,"div",22)(1,"div",23)(2,"div",24)(3,"span"),c(4),o(),s(5,"div")(6,"span"),c(7),x(8,"date"),f(9,dn,2,0,"svg",25)(10,gn,2,0,"svg",25),o()()(),s(11,"span",26),c(12),o()()()),e&2){let r=n.$implicit,t=d(2);m(4),q(r.userFullName),m(3),S(" ",H(8,5,r.updatedDate,t.DATE_FORMAT)," "),m(2),l("ngIf",(t.userInfo==null?null:t.userInfo.id)===r.userId),m(),l("ngIf",t.canDeleteReview(r.userId)),m(2),q(r.review)}}function fn(e,n){if(e&1&&(s(0,"app-game-layout",1)(1,"div",2),f(2,rn,2,1,"span",3)(3,an,4,0,"span",4),x(4,"async"),f(5,on,7,1,"div",5),x(6,"async"),o(),f(7,pn,5,2,"form",6),x(8,"async"),s(9,"div",7),f(10,_n,13,8,"div",8),o()()),e&2){let r=d();l("game",r.game)("backNavigateBtn",r.navigateBack.bind(r)),m(2),l("ngIf",r.gameReviews),m(),l("ngIf",!I(4,7,r.showCommentInput)),m(2),l("ngIf",I(6,9,r.showCommentInput)),m(2),l("ngIf",I(8,11,r.showCommentInput)),m(3),l("ngForOf",r.gameReviews)}}var oe=function(e){return e[e.create=0]="create",e[e.update=1]="update",e}(oe||{}),Kt=(()=>{let n=class n{constructor(t,i,a,g,b,y,U,se,X){this.fb=t,this.gameService=i,this.authService=a,this.toastService=g,this.gameReviewService=b,this.activeRoute=y,this.menuTabsService=U,this.navigationService=se,this.router=X,this.isAbleToDeleteEveryReview=!1,this.userInfo=this.authService.getUser,this.showCommentInput=new me(!1),this.reviewForm=this.fb.group({review:["",[T.required,T.maxLength(100),T.minLength(10)]]}),this.currentReviewState=oe.create,this.ReviewState=oe,this.dialog=ut(Y),this.DATE_FORMAT=Xe.DATE_FORMAT,this.menuTabsService.setActive(F.GAMES)}ngOnDestroy(){this.menuTabsService.resetData()}openDeleteDialog(t){this.dialog.open(Xt,{data:{id:t}}).afterClosed().subscribe(a=>{a&&this.fetchGameReviews()})}canDeleteReview(t){return this.userInfo?.role===Ke.SuperAdmin?!0:this.userInfo?.id===t}ngOnInit(){this.activeRoute.params.subscribe(t=>{let i=t.id;i&&this.gameService.getById(i).subscribe(a=>{this.game=a,this.fetchGameReviews()})})}onCreateReview(){if(this.reviewForm.valid){let t=this.reviewForm.get("review")?.value;this.gameReviewService.create({gameId:this.game.id,review:t}).subscribe(i=>this.fetchGameReviews()),this.showCommentInput.next(!1),this.reviewForm.reset()}}navigateBack(){this.router.navigateByUrl(this.navigationService.getPreviousUrl()??"/games/library")}onUpdateReview(){if(this.reviewForm.valid){let t=this.reviewForm.get("review")?.value;this.gameReviewService.update({id:this.currentReviewIdForUpdate,review:t}).subscribe(i=>{this.toastService.success({message:"Succesefully updated",type:G.Success}),this.fetchGameReviews()}),this.showCommentInput.next(!1),this.currentReviewState=oe.create,this.reviewForm.reset()}}toggleReviewTextarea(t,i=!1){i?this.currentReviewState===oe.create?this.onCreateReview():this.currentReviewState===oe.update&&this.onUpdateReview():t===!1&&(this.currentReviewState=oe.create,this.reviewForm.reset()),this.showCommentInput.next(t)}startUpdatingComment(t,i){this.reviewForm.patchValue({review:i}),this.currentReviewIdForUpdate=t,this.currentReviewState=oe.update,this.showCommentInput.next(!0),window.scroll({top:0,left:0,behavior:"smooth"})}fetchGameReviews(){this.gameReviewService.getList(this.game.id).subscribe(t=>{t&&(this.gameReviews=t)})}};n.\u0275fac=function(i){return new(i||n)(p(be),p(P),p(we),p(W),p(at),p($),p(D),p(j),p(k))},n.\u0275cmp=w({type:n,selectors:[["app-game-reviews"]],decls:1,vars:1,consts:[["class","wrapper",3,"game","backNavigateBtn",4,"ngIf"],[1,"wrapper",3,"game","backNavigateBtn"],[1,"wrapper_info"],[4,"ngIf"],["class","wrapper_info__write-review",3,"click",4,"ngIf"],["class","wrapper_info__write-review",4,"ngIf"],["class","form__group",3,"formGroup",4,"ngIf"],[1,"wrapper_reviews"],["class","wrapper_reviews__item",4,"ngFor","ngForOf"],[1,"wrapper_info__write-review",3,"click"],["height","2rem","viewBox","0 -960 960 960","width","2rem","fill","#fafafa"],["d","M194-194h43.92l407.93-407.92-43.93-42.93L194-236.92V-194Zm-66 66v-136.77l557.23-558.77q5.15-5.48 11.57-6.97 6.43-1.49 12.49-1.49 6.06 0 11.12.54 5.05.54 11.44 6.15l92.69 91.93q5.61 6.38 6.54 12 .92 5.63.92 12.25 0 6.13-1.74 12.06-1.74 5.92-6.72 11.07L264.77-128H128Zm626.77-581.31-45.46-44.46 45.46 44.46ZM624.5-623.5l-22.58-21.35 43.93 42.93-21.35-21.58Z"],[1,"wrapper_info__write-review"],[3,"click"],["d","M447-420h66v-122h122v-66H513v-122h-66v122H325v66h122v122ZM88-114.92v-678.46q0-38.35 26.14-64.48Q140.27-884 178.62-884h602.76q38.35 0 64.48 26.14Q872-831.73 872-793.38v438.76q0 38.35-26.14 64.48Q819.73-264 781.38-264h-544.3L88-114.92ZM210-330h571.38q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-438.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H178.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v520.15L210-330Zm-56 0v-488 488Z"],["height","2rem","viewBox","0 -960 960 960","width","2rem","fill","#fafafa",3,"click"],["d","m334-287.69 146-146 146 146L672.31-334l-146-146 146-146L626-672.31l-146 146-146-146L287.69-626l146 146-146 146L334-287.69ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],[1,"form__group",3,"formGroup"],["formControlName","review","type","input","rows","4","cols","4","placeholder","review","name","review",1,"form__field"],["for","review",1,"form__label"],["class","form__field__errors",4,"ngIf"],[1,"form__field__errors"],[1,"wrapper_reviews__item"],[1,"wrapper_reviews__item__info"],[1,"details"],["class","my-review","viewBox","0 -960 960 960","fill","#fafafa",3,"click",4,"ngIf"],[1,"review"],["viewBox","0 -960 960 960","fill","#fafafa",1,"my-review",3,"click"]],template:function(i,a){i&1&&f(0,fn,11,13,"app-game-layout",0),i&2&&l("ngIf",a.game)},dependencies:[B,O,ue,fe,K,ve,he,Ce,Pe,R,$e],styles:[".wrapper[_ngcontent-%COMP%]{color:#9b9b9b}.wrapper_info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin:0 1rem}.wrapper_info__write-review[_ngcontent-%COMP%], .wrapper_info__write-review[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center}.wrapper_info__write-review[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{padding-left:.5rem}.wrapper_reviews[_ngcontent-%COMP%]{margin-top:1rem}.wrapper_reviews__item[_ngcontent-%COMP%]{display:flex;margin:1rem 1.5rem}.wrapper_reviews__item__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:-webkit-fill-available}.wrapper_reviews__item__info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%}.wrapper_reviews__item__info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:.75rem;display:flex;align-items:center}.wrapper_reviews__item__info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child   .my-review[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;margin-left:.5rem}.wrapper_reviews__item__info[_ngcontent-%COMP%]   .review[_ngcontent-%COMP%]{font-size:.8rem;word-break:break-all}.wrapper_reviews__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]{text-align:center}.wrapper_reviews__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem;height:2rem;object-fit:cover;border-radius:100%;border:.1rem solid black}.form__group[_ngcontent-%COMP%]{position:relative;margin:0 auto;width:90%;padding:15px 0 0;margin-top:.8rem}.form__group[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]{border:.1rem solid #bf3c65}.form__group[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border:.1rem solid #46945b}.form__group[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]{background-color:#2b2e35;resize:none;width:100%;border-radius:1rem;outline:0;font-size:small;color:#fff;padding:.6rem 1rem;transition:border-color .2s}.form__group[_ngcontent-%COMP%]   .form__field__errors[_ngcontent-%COMP%]{color:#bf3c65}.form__group[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]::placeholder{color:transparent}.form__group[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]:placeholder-shown ~ .form__label[_ngcontent-%COMP%]{font-size:.8rem;cursor:text;top:20px}.form__group[_ngcontent-%COMP%]   .form__label[_ngcontent-%COMP%]{position:absolute;top:0;left:1rem;display:block;transition:.2s;font-size:.7rem}.form__group[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]:focus{padding-bottom:.6rem;font-weight:700;border-width:.1rem}.form__group[_ngcontent-%COMP%]   .form__field[_ngcontent-%COMP%]:focus ~ .form__label[_ngcontent-%COMP%]{position:absolute;top:0;display:block;transition:.2s;font-size:.7rem;font-weight:700}"]});let e=n;return e})();function vn(e,n){if(e&1){let r=C();s(0,"div",2),v("click",function(){let i=u(r).$implicit,a=d();return h(a.navigateToGameLibrary(i.id))}),s(1,"div",3)(2,"span"),c(3),o()()()}if(e&2){let r=n.$implicit;m(3),q(r.name)}}var ei=(()=>{let n=class n{constructor(t,i,a,g){this.gameCategoriesService=t,this.menuTabsService=i,this.searchService=a,this.router=g,this.categories=[],this.menuTabsService.setActive(F.GAMES)}ngOnInit(){this.fetchGameList()}ngOnDestroy(){this.menuTabsService.resetData(),this.searchService.hideSearchForm()}handleSearchExpression(t){this.fetchGameList(t)}navigateToGameLibrary(t){this.router.navigateByUrl(E.GAMES.LIBRARY_BY_CATEGORY_ID(t))}fetchGameList(t=""){this.gameCategoriesService.getList(t).subscribe(i=>this.categories=i??[])}};n.\u0275fac=function(i){return new(i||n)(p(Oe),p(D),p(Se),p(k))},n.\u0275cmp=w({type:n,selectors:[["app-game-categories"]],decls:2,vars:1,consts:[[1,"wrapper"],["class","wrapper_category",3,"click",4,"ngFor","ngForOf"],[1,"wrapper_category",3,"click"],[1,"wrapper_category-text"]],template:function(i,a){i&1&&(s(0,"div",0),f(1,vn,4,1,"div",1),o()),i&2&&(m(),l("ngForOf",a.categories))},dependencies:[B],styles:[".wrapper[_ngcontent-%COMP%]{width:90%;margin:1rem auto 7rem;display:flex;flex-wrap:wrap;justify-content:start}.wrapper_category[_ngcontent-%COMP%]{flex:1 1 calc(50% - 1rem);margin-bottom:1rem;max-width:calc(50% - 1rem);min-height:4rem;max-height:4rem;margin:.5rem;background-color:#31313b;display:flex;flex-direction:column;align-items:center;border-radius:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wrapper_category-text[_ngcontent-%COMP%]{white-space:wrap;text-align:center;margin:auto 0;padding:.5rem;word-break:break-word}"]});let e=n;return e})();var un=e=>({name:"Popular",link:"games/library",isActive:e}),hn=e=>({name:"Categories",link:"games/categories",isActive:e}),Cn=e=>({name:"New",link:"games/new",isActive:e}),bn=(e,n,r)=>[e,n,r],ti=(()=>{let n=class n{constructor(t,i,a,g){this.router=t,this.permissionService=i,this.gameService=a,this.navigationService=g,this.menuItems=new me([]),this.isAdmin$=this.permissionService.hasUserAction(tt.GamesCUD),this.headerSectionName="Games",this.gameReservationStatus=null,this.handleMenuItemClick=this.handleMenuItemClick.bind(this)}ngOnInit(){this.menuItems.next([{key:"add-game",label:"Add Game"},{key:"add-existing-game",label:"Add Existing Game"}]),this.gameService.userReservationStatus().subscribe({next:t=>{this.gameReservationStatus=t},error:()=>{this.gameReservationStatus=null}})}handleMenuItemClick(t){t==="add-game"?this.router.navigateByUrl("/games/add"):t==="add-existing-game"&&this.router.navigateByUrl("/games/add-existing-game")}onActivate(t){this.activeChildComponent=t,this.activeChildComponent instanceof ke&&this.activeChildComponent.selectedCategoryName$&&this.activeChildComponent.selectedCategoryName$.subscribe(i=>{console.log(i),i?this.headerSectionName=i:this.headerSectionName="Games"})}handleReservationWarningClick(){this.gameReservationStatus&&(this.navigationService.setPreviousUrl(this.router.url),this.router.navigateByUrl(E.GAMES.AVAILABILITY(this.gameReservationStatus.gameId)))}handleSearchExpression(t){this.activeChildComponent&&this.activeChildComponent.handleSearchExpression&&this.activeChildComponent.handleSearchExpression(t)}isActiveLink(t,i=null,a=!1){return a?this.router.url===t:this.router.url.includes(t)||i!==null&&this.router.url.includes(i)}};n.\u0275fac=function(i){return new(i||n)(p(k),p(it),p(P),p(j))},n.\u0275cmp=w({type:n,selectors:[["app-game-navigation"]],decls:6,vars:20,consts:[["menu",""],[3,"reservationWarningClicked","searchExpressionResult","header","withSearch","withMenu","menuItems","menuItemClickFunction","gameReservationStatus"],[3,"columns"],[3,"menuItemClick","menuItems"],[3,"activate"]],template:function(i,a){if(i&1){let g=C();s(0,"app-header",1),x(1,"async"),v("reservationWarningClicked",function(){return u(g),h(a.handleReservationWarningClick())})("searchExpressionResult",function(y){return u(g),h(a.handleSearchExpression(y))}),_(2,"app-nav-bar",2),o(),s(3,"app-controls-menu",3,0),v("menuItemClick",function(y){return u(g),h(a.handleMenuItemClick(y.value))}),o(),s(5,"router-outlet",4),v("activate",function(y){return u(g),h(a.onActivate(y))}),o()}if(i&2){let g;l("header",a.headerSectionName)("withSearch",!0)("withMenu",(g=I(1,8,a.isAdmin$))!==null&&g!==void 0?g:!1)("menuItems",a.menuItems)("menuItemClickFunction",a.handleMenuItemClick)("gameReservationStatus",a.gameReservationStatus),m(2),l("columns",wt(16,bn,Ze(10,un,a.isActiveLink("/games/library",null,!0)),Ze(12,hn,a.isActiveLink("/games/categories","/games/library/")),Ze(14,Cn,a.isActiveLink("/games/new")))),m(),l("menuItems",a.menuItems.asObservable())}},dependencies:[ye,qt,Vt,Et,R]});let e=n;return e})();function yn(e,n){e&1&&(s(0,"div",3),_(1,"img",4),s(2,"p",5),c(3,"No Games Found"),o()())}function wn(e,n){e&1&&(M(),s(0,"svg",16),_(1,"path",17),o())}function xn(e,n){e&1&&(M(),s(0,"svg",18),_(1,"path",19),o())}function Mn(e,n){if(e&1){let r=C();s(0,"div",6),v("click",function(){let i=u(r).$implicit,a=d();return h(a.navigateToGameDetails(i.id))}),s(1,"div",7),_(2,"img",8),x(3,"entityImage"),x(4,"async"),o(),s(5,"div",9)(6,"div",10),c(7),s(8,"div",11),c(9),x(10,"truncate"),o()(),s(11,"div",12)(12,"div",13),f(13,wn,2,0,"svg",14)(14,xn,2,0,"svg",15),c(15),o()()()()}if(e&2){let r=n.$implicit,t=d();m(2),l("src",I(4,9,H(3,6,t.ImageEntityType.Games,r.imageId)),Z),m(5),S(" ",r.name," "),m(2),S(" ",I(10,11,r.description)," "),m(4),l("ngIf",!r.isLiked),m(),l("ngIf",r.isLiked),m(),S(" ",r.likes," ")}}var ii=(()=>{let n=class n{constructor(t,i,a,g,b){this.router=t,this.gameService=i,this.menuTabsService=a,this.searchService=g,this.navigationService=b,this.games=[],this.ImageEntityType=ee,this.menuTabsService.setActive(F.GAMES)}ngOnDestroy(){this.menuTabsService.resetData(),this.searchService.hideSearchForm()}ngOnInit(){this.fetchGameList()}navigateToGameDetails(t){this.navigationService.setPreviousUrl(this.router.url),this.router.navigateByUrl(E.GAMES.DETAILS(t))}handleSearchExpression(t){this.fetchGameList(t)}fetchGameList(t=""){this.gameService.getNewGameList(t).subscribe(i=>this.games=i??[])}};n.\u0275fac=function(i){return new(i||n)(p(k),p(P),p(D),p(Se),p(j))},n.\u0275cmp=w({type:n,selectors:[["app-new-game-list"]],decls:3,vars:2,consts:[[1,"wrapper_library"],["class","no_records",4,"ngIf"],["class","wrapper_library__item",3,"click",4,"ngFor","ngForOf"],[1,"no_records"],["src","/shared/assets/images/no-games-found.png","alt",""],[1,"first-header"],[1,"wrapper_library__item",3,"click"],[1,"wrapper_image"],["alt","Game Image",3,"src"],[1,"wrapper_info"],[1,"wrapper_title"],[1,"wrapper_description"],[1,"wrapper_right"],[1,"wrapper_likes"],["class","like-icon","viewBox","0 -960 960 960","fill","#e8eaed",4,"ngIf"],["class","like-icon heart-full","viewBox","0 -960 960 960",4,"ngIf"],["viewBox","0 -960 960 960","fill","#e8eaed",1,"like-icon"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Zm0-90.15q98-89.77 161-152.65 63-62.89 100-109.39t51-81.61q14-35.12 14-70.35 0-61-40.5-101.5T662-784q-45.77 0-87.15 27.77-41.39 27.77-63.31 73.61h-63.08q-22.69-46.61-63.69-74Q343.77-784 298-784q-62.23 0-103.12 40.5Q154-703 154-642q0 35.23 14 70.35 14 35.11 51 81.61t100 109q63 62.5 161 153.04Zm0-278Z"],["viewBox","0 -960 960 960",1,"like-icon","heart-full"],["d","m480-137.85-46.31-43.38q-106.92-99.46-174.5-167.65-67.57-68.2-105.65-118.35-38.08-50.15-51.81-91.04Q88-599.15 88-642q0-87.31 60.85-147.65Q209.69-850 298-850q48.77 0 96 24.5t86 71.04q38.77-46.54 86-71.04 47.23-24.5 96-24.5 88.31 0 149.15 60.35Q872-729.31 872-642q0 42.85-13.73 83.73-13.73 40.89-51.81 91.04-38.08 50.15-105.27 118.35Q634-280.69 526.31-181.23L480-137.85Z"]],template:function(i,a){i&1&&(s(0,"section",0),f(1,yn,4,0,"div",1)(2,Mn,16,13,"div",2),o()),i&2&&(m(),l("ngIf",a.games.length===0),m(),l("ngForOf",a.games))},dependencies:[B,O,R,te,Je],styles:[".wrapper_library[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:85%;padding-bottom:7rem;margin:0 auto;padding-top:1.5rem;overflow-y:visible}.wrapper_library[_ngcontent-%COMP%]   .no_records[_ngcontent-%COMP%]{text-align:center;margin:2rem;font-size:1.5rem;display:flex;flex-direction:column;align-items:center}.wrapper_library[_ngcontent-%COMP%]   .no_records[_ngcontent-%COMP%]   .first-header[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.2rem}.wrapper_library[_ngcontent-%COMP%]   .no_records[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15rem;width:15rem}.wrapper_library__item[_ngcontent-%COMP%]{position:relative;display:flex;padding-bottom:.3rem;padding-top:.5rem;border-bottom:.2rem solid #2b2e35}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:space-between}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]{padding-left:1rem;font-size:large;padding-top:.2rem;align-self:baseline;word-break:break-all;width:60%}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{padding-top:.5rem;width:100%;font-size:.8rem;color:#9b9b9b;word-break:break-all}@media (min-width: 568px){.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_title[_ngcontent-%COMP%]   .wrapper_description[_ngcontent-%COMP%]{width:85%}}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]{display:flex;position:absolute;right:0;font-size:small}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]   .wrapper_likes[_ngcontent-%COMP%]{color:#bf3c65;margin-right:1rem;font-size:large}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_info[_ngcontent-%COMP%]   .wrapper_right[_ngcontent-%COMP%]   .wrapper_likes[_ngcontent-%COMP%]   .like-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;position:relative;right:.2rem;top:.3rem;fill:#bf3c65}.wrapper_library__item[_ngcontent-%COMP%]   .wrapper_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem;height:5rem;min-width:5rem;min-height:5rem;object-fit:cover;border-radius:20px;border:.1rem solid black}"]});let e=n;return e})();var gt=function(e){return e[e.Five=5]="Five",e[e.Ten=10]="Ten",e[e.Fifteen=15]="Fifteen",e[e.Twenty=20]="Twenty",e[e.TwentyFive=25]="TwentyFive",e[e.Thirty=30]="Thirty",e[e.ThirtyFive=35]="ThirtyFive",e[e.Forty=40]="Forty",e[e.FortyFive=45]="FortyFive",e[e.Fifty=50]="Fifty",e[e.FiftyFive=55]="FiftyFive",e[e.Sixty=60]="Sixty",e[e.SixtyFive=65]="SixtyFive",e[e.Seventy=70]="Seventy",e[e.SeventyFive=75]="SeventyFive",e[e.Eighty=80]="Eighty",e[e.EightyFive=85]="EightyFive",e[e.Ninety=90]="Ninety",e[e.NinetyFive=95]="NinetyFive",e[e.OneHundred=100]="OneHundred",e}(gt||{});var Sn=["descArea"],ni=(e,n,r,t)=>({"btn-border-green":e,"btn-font-green":n,"btn-border-red":r,"btn-font-red":t}),In=(e,n,r,t)=>({"btn-border-yellow":e,"btn-font-yellow":n,"btn-border-red":r,"btn-font-red":t});function On(e,n){if(e&1){let r=C();s(0,"div",36)(1,"ng-select",37),Ue("ngModelChange",function(i){u(r);let a=d();return je(a.selectedGame,i)||(a.selectedGame=i),h(i)}),v("change",function(){u(r);let i=d();return h(i.handleAddExistingGame())}),o()()}if(e&2){let r=d();m(),l("items",r.gameList)("searchable",!0),Qe("ngModel",r.selectedGame)}}function Pn(e,n){if(e&1){let r=C();s(0,"div",38),M(),s(1,"svg",39),v("click",function(){u(r),d();let i=Ae(55);return h(i.toggleMenu())}),_(2,"path",40),o()()}}function Tn(e,n){if(e&1){let r=C();s(0,"a",41),v("click",function(){u(r);let i=d();return h(i.openQrCodeDialog())}),_(1,"img",42),o()}}function En(e,n){if(e&1&&(s(0,"option",43),c(1),o()),e&2){let r=n.$implicit;l("value",r.id),m(),S(" ",r.name," ")}}function Gn(e,n){if(e&1&&(s(0,"div",44),c(1),o()),e&2){let r=d();m(),S(" ",r.getFirstErrorMessage()," ")}}function An(e,n){if(e&1){let r=C();s(0,"button",45),v("click",function(){u(r);let i=d();return h(i.onAdd())}),c(1," Create "),o()}if(e&2){let r=d();l("disabled",r.form.invalid)("ngClass",ze(2,ni,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function Rn(e,n){if(e&1){let r=C();s(0,"button",45),v("click",function(){u(r);let i=d();return h(i.onUpdate())}),c(1," Update "),o()}if(e&2){let r=d();l("disabled",r.form.invalid)("ngClass",ze(2,In,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}function kn(e,n){if(e&1){let r=C();s(0,"button",45),v("click",function(){u(r);let i=d();return h(i.onCopy())}),c(1," Add Copy "),o()}if(e&2){let r=d();l("disabled",r.form.invalid)("ngClass",ze(2,ni,r.form.valid,r.form.valid,r.form.invalid,r.form.invalid))}}var De=(()=>{let n=class n extends et{constructor(t,i,a,g,b,y,U,se,X){super(X),this.fb=t,this.gameService=i,this.gameCategoriesService=a,this.menuTabsService=g,this.router=b,this.dialog=y,this.activatedRoute=U,this.entityImagePipe=se,this.toastService=X,this.imagePreview=null,this.showQRCode=!1,this.editGameId=null,this.editGameName=null,this.gameList=[],this.selectedGame=null,this.addExistingGame=!1,this.imageError=null,this.fileToUpload=null,this.gamAveragePlaytimeValues=[],this.form=this.initFormGroup(),this.form.valueChanges.subscribe(()=>{this.getServerErrorMessage&&this.clearServerErrorMessage()}),this.menuTabsService.setActive(F.GAMES),this.gamAveragePlaytimeValues=Object.entries(gt).filter(([ot,L])=>typeof L=="number").map(([ot,L])=>({id:L,name:L.toString()}))}adjustTextareaHeight(t){t.style.height="auto",t.style.height=t.scrollHeight+"px"}ngOnDestroy(){this.menuTabsService.resetData()}clearServerErrorMessage(){this.getServerErrorMessage=null}ngOnInit(){this.categories=this.gameCategoriesService.getList(),this.activatedRoute.snapshot.routeConfig?.path?.includes("add-existing-game")?this.preparationForAddExistingGame():this.activatedRoute.paramMap.subscribe(t=>{let i=t.get("id");i&&(this.editGameId=+i,this.fetchGameById(this.editGameId))})}openQrCodeDialog(){this.dialog.open(Ie,{width:"17rem",data:{Id:this.editGameId,Name:this.editGameName,Type:re.Game}})}preparationForAddExistingGame(){this.addExistingGame=!0,this.fetchGameList(),this.activatedRoute.paramMap.subscribe(t=>{let i=t.get("id");i&&(this.selectedGame={id:+i,name:""},this.handleAddExistingGame())}),this.form.controls.categoryId.disable(),this.form.controls.name.disable(),this.form.controls.description.disable(),this.form.controls.averagePlaytime.disable(),this.form.controls.minAge.disable(),this.form.controls.maxPlayers.disable(),this.form.controls.minPlayers.disable()}handleAddExistingGame(){this.selectedGame?.id&&this.fetchGameById(this.selectedGame.id)}backNavigateBtn(){this.router.navigateByUrl("games/library")}onFileSelected(t){let i=t.target;console.log(i.files);let a=i.files?.[0];if(a){let g=new FileReader;g.onload=()=>{this.imagePreview=g.result,this.form.controls.image.patchValue(a.name),this.fileToUpload=a,this.imageError=null,console.log(this.form.controls)},g.readAsDataURL(a)}else this.imageError="Image is required.",this.fileToUpload=null,this.imagePreview=null,this.form.controls.image.reset()}onAdd(){if(!this.fileToUpload){this.imageError="Image is required.";return}this.form.valid&&this.fileToUpload&&this.gameService.add({categoryId:parseInt(this.form.controls.categoryId.value),name:this.form.controls.name.value,description:this.form.controls.description.value,minAge:this.form.controls.minAge.value,minPlayers:this.form.controls.minPlayers.value,maxPlayers:this.form.controls.maxPlayers.value,averagePlaytime:this.form.controls.averagePlaytime.value},this.fileToUpload).subscribe({next:t=>{this.toastService.success({message:ce.ChangesSaved,type:G.Success}),this.router.navigateByUrl("/games/library")},error:t=>{this.handleServerErrors(t),this.toastService.error({message:ce.FailedToSaveChanges,type:G.Error})}})}onUpdate(){this.editGameId&&this.gameService.update({id:this.editGameId,categoryId:parseInt(this.form.controls.categoryId.value),name:this.form.controls.name.value,description:this.form.controls.description.value,minAge:this.form.controls.minAge.value,minPlayers:this.form.controls.minPlayers.value,maxPlayers:this.form.controls.maxPlayers.value,averagePlaytime:this.form.controls.averagePlaytime.value,imageId:this.fileToUpload?null:+this.form.controls.image.value},this.fileToUpload).subscribe({next:t=>{this.toastService.success({message:ce.ChangesApplied,type:G.Success}),this.router.navigateByUrl(`/games/${this.editGameId}/details`)},error:t=>{console.log("errors--->",t),this.handleServerErrors(t),this.toastService.error({message:ce.FailedToSaveChanges,type:G.Error})}})}onCopy(){if(this.addExistingGame&&this.selectedGame){this.gameService.addCopy(this.selectedGame.id).subscribe({next:t=>{this.toastService.success({message:ce.ChangesSaved,type:G.Success}),this.router.navigateByUrl("/games/library")},error:t=>{this.handleServerErrors(t),this.toastService.error({message:ce.FailedToSaveChanges,type:G.Error})}});return}}handleAdditionalErrors(){return this.imageError?this.imageError:null}getControlDisplayName(t){switch(t){case"categoryId":return"Category";case"name":return"Name";case"description":return"Description";case"minAge":return"Minimum Age";case"minPlayers":return"Minimum Players";case"maxPlayers":return"Maximum Players";case"averagePlaytime":return"Average Playtime";case"image":return"Image";default:return t}}fetchGameList(){this.gameService.getDropdownList().subscribe({next:t=>{if(this.gameList=t??[],this.selectedGame){let i=this.gameList.find(a=>a.id==this.selectedGame?.id);i&&(this.selectedGame=i)}},error:t=>{console.log(t)}})}fetchGameById(t){this.gameService.getById(t).subscribe({next:i=>{i&&(this.form.patchValue({categoryId:i.categoryId,name:i.name,description:i.description,minAge:i.minAge,minPlayers:i.minPlayers,maxPlayers:i.maxPlayers,averagePlaytime:i.averagePlaytime,image:i.imageId.toString()}),this.editGameName=i.name,this.entityImagePipe.transform(ee.Games,i.imageId).subscribe(a=>this.imagePreview=a),this.fileToUpload=null,this.adjustTextareaHeight(this.descArea.nativeElement))},error:i=>{_t(()=>i)}})}initFormGroup(){return this.fb.group({categoryId:new Q(null,[T.required]),name:new Q("",[T.required,T.minLength(3)]),description:new Q("",T.required),minAge:new Q(12,[T.required]),minPlayers:new Q(null,[T.required,T.min(1)]),maxPlayers:new Q(null,[T.required,T.min(1)]),averagePlaytime:new Q(5,[T.required]),image:new Q("",[T.required])})}};n.\u0275fac=function(i){return new(i||n)(p(be),p(P),p(Oe),p(D),p(k),p(Y),p($),p(te),p(W))},n.\u0275cmp=w({type:n,selectors:[["app-add-update-game"]],viewQuery:function(i,a){if(i&1&&Te(Sn,5),i&2){let g;Ee(g=Ge())&&(a.descArea=g.first)}},features:[Ne],decls:56,vars:18,consts:[["descArea",""],["controls",""],[1,"wrapper_icons"],[1,"arrow","left",3,"click"],["class","games-select",4,"ngIf"],["class","info-container",4,"ngIf"],["class","wrapper_qrCode",3,"click",4,"ngIf"],[1,"container",3,"formGroup"],[1,"upload-section"],[1,"upload-icon"],["type","file","id","file-upload","accept","image/*",3,"change","disabled"],["for","file-upload"],[1,"image-preview"],["alt","Selected Image",3,"src"],[1,"statistics"],[1,"input-field"],["for","category",1,"required"],["id","category","formControlName","categoryId"],["disabled","","selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group"],["for","min-age",1,"required"],["placeholder","kids or adults","type","number","id","min-age","formControlName","minAge"],["for","approx-time",1,"required"],["id","approx-time","bindValue","id","bindLabel","name","placeholder","avg play time","formControlName","averagePlaytime",1,"app-select-long",3,"items","searchable"],["for","min-players",1,"required"],["placeholder","min players","type","number","id","min-players","formControlName","minPlayers"],["for","max-players",1,"required"],["placeholder","max players","type","number","id","max-players","formControlName","maxPlayers"],["for","name",1,"required"],["placeholder","name of the game ?","type","text","id","name","formControlName","name",3,"readonly"],["for","description",1,"required"],["placeholder","what happen in this game","id","description","formControlName","description",1,"expand-textarea-mobile",3,"input"],["class","errors",4,"ngIf"],["type","button","class","btn btn-gray",3,"disabled","ngClass","click",4,"ngIf"],["infoDescription","QR Code already exist for the current game",3,"isInfo"],[1,"games-select"],["bindLabel","name","placeholder","Select Game",1,"app-select",3,"ngModelChange","change","items","searchable","ngModel"],[1,"info-container"],["viewBox","0 -960 960 960",1,"info",3,"click"],["d","M448-284h66v-236h-66v236Zm31.82-308.92q14.64 0 24.72-9.9 10.08-9.91 10.08-24.54 0-14.64-9.91-24.72-9.9-10.07-24.53-10.07-14.64 0-24.72 9.9-10.08 9.9-10.08 24.54 0 14.63 9.91 24.71 9.9 10.08 24.53 10.08ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],[1,"wrapper_qrCode",3,"click"],["src","/shared/assets/images/qr-code.png","alt",""],[3,"value"],[1,"errors"],["type","button",1,"btn","btn-gray",3,"click","disabled","ngClass"]],template:function(i,a){if(i&1){let g=C();s(0,"div",2)(1,"span",3),v("click",function(){return u(g),h(a.backNavigateBtn())}),o(),f(2,On,2,3,"div",4)(3,Pn,3,0,"div",5)(4,Tn,2,0,"a",6),o(),s(5,"form",7)(6,"div",8)(7,"div",9)(8,"input",10),v("change",function(y){return u(g),h(a.onFileSelected(y))}),o(),s(9,"label",11)(10,"div",12),_(11,"img",13),o()()(),s(12,"div",14)(13,"span"),c(14,"Statistics"),o()(),s(15,"div",15)(16,"label",16),c(17,"Category"),o(),s(18,"select",17)(19,"option",18),c(20,"Choose category"),o(),f(21,En,2,2,"option",19),x(22,"async"),o()(),s(23,"div",20)(24,"div",15)(25,"label",21),c(26,"Min age"),o(),_(27,"input",22),o(),s(28,"div",15)(29,"label",23),c(30,"Approx Time"),o(),_(31,"ng-select",24),o()(),s(32,"div",20)(33,"div",15)(34,"label",25),c(35,"Min Players"),o(),_(36,"input",26),o(),s(37,"div",15)(38,"label",27),c(39,"Max Players"),o(),_(40,"input",28),o()(),s(41,"div",15)(42,"label",29),c(43,"Name"),o(),_(44,"input",30),o(),s(45,"div",15)(46,"label",31),c(47,"Description"),o(),s(48,"textarea",32,0),v("input",function(){u(g);let y=Ae(49);return h(a.adjustTextareaHeight(y))}),o()(),f(50,Gn,2,1,"div",33)(51,An,2,7,"button",34)(52,Rn,2,7,"button",34)(53,kn,2,7,"button",34),o()(),_(54,"app-controls-menu",35,1)}i&2&&(m(2),l("ngIf",a.addExistingGame),m(),l("ngIf",a.addExistingGame),m(),l("ngIf",a.editGameId),m(),l("formGroup",a.form),m(3),l("disabled",a.addExistingGame),m(3),l("src",a.imagePreview||"/shared/assets/images/upload_img.svg",Z),m(8),l("value",null),m(2),l("ngForOf",I(22,16,a.categories)),m(10),l("items",a.gamAveragePlaytimeValues)("searchable",!0),m(13),l("readonly",a.addExistingGame),m(6),l("ngIf",a.getFirstErrorMessage()),m(),l("ngIf",!a.editGameId&&!a.addExistingGame),m(),l("ngIf",a.editGameId),m(),l("ngIf",a.addExistingGame),m(),l("isInfo",!0))},dependencies:[He,B,O,ue,It,Ot,fe,Mt,St,K,ve,he,Ce,ye,We,nt,R],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-bottom:8rem;font-size:#ffffff}.expand-textarea-mobile[_ngcontent-%COMP%]{width:100%;min-height:3rem;overflow:hidden;resize:none;font-size:1rem;padding:.5rem;box-sizing:border-box;border-radius:.5rem;line-height:1.4;transition:border .2s ease}.expand-textarea-mobile[_ngcontent-%COMP%]:focus{border-color:#888;outline:none}.upload-section[_ngcontent-%COMP%]{padding:1.3rem;padding-top:0;border-radius:10px;text-align:center}.upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{background-color:#31313b;border-radius:10px;margin:1rem auto;width:80%;aspect-ratio:1/1;display:flex;justify-content:center;align-items:center;position:relative;cursor:pointer}.upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:18rem;height:18rem;cursor:pointer}.upload-section[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:17rem;height:17rem;object-fit:contain;border-radius:.7rem}.upload-section[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{margin:1.5rem}.upload-section[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#31313b;color:#46945b;border:none;border-radius:20px;padding:.5rem 1rem;font-size:1rem;cursor:pointer}.arrow[_ngcontent-%COMP%]{width:3rem;height:3rem;display:inline-block;position:relative;border:.1rem solid #98989d;border-radius:2.5rem}.arrow[_ngcontent-%COMP%]:before{content:"";display:block;width:.75rem;height:.75rem;top:65%;left:63%;border-style:solid;border-color:#98989d;border-width:.2rem .2rem 0 0;position:absolute;transform-origin:50% 50%}.arrow.left[_ngcontent-%COMP%]:before{transform:rotate(-135deg);margin:-.9rem 0 0 -.6rem}.wrapper_icons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1rem;align-items:center}.wrapper_icons[_ngcontent-%COMP%]   .games-select[_ngcontent-%COMP%]{margin-top:1rem}.wrapper_icons[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]{position:relative}.wrapper_icons[_ngcontent-%COMP%]   .info-container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#bf3c65}.wrapper_icons[_ngcontent-%COMP%]   .wrapper_qrCode[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:3rem;height:.5rem;border-radius:50%;margin:0 .2rem}.wrapper_icons[_ngcontent-%COMP%]   .wrapper_qrCode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:4rem;height:4rem;object-fit:cover}input[disabled][_ngcontent-%COMP%], textarea[disabled][_ngcontent-%COMP%], select[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}']});let e=n;return e})();var ri=si(mi());var Dn=["video"],Ln=["image"];function qn(e,n){if(e&1&&(s(0,"div")(1,"h2"),c(2,"Your QR Code:"),o(),_(3,"img",7),o()),e&2){let r=d();m(3),l("src",r.qrCodeUrl,Z)}}var ai=(()=>{let n=class n{constructor(t){this.gameService=t,this.imageSrc=null,this.qrCodeString="",this.qrCodeUrl=null}generateQRCode(){this.gameService.generateQRCode(this.qrCodeString).subscribe(t=>{this.qrCodeUrl=t.url,console.log("QR Code generated:",t.url)})}ngAfterViewInit(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.startCamera()}startCamera(){navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(t=>{try{this.videoElement.nativeElement.srcObject=t,this.videoElement.nativeElement.play(),requestAnimationFrame(this.tick.bind(this))}catch(i){alert(i)}}).catch(t=>{alert(t),console.log(t)})}tick(){let t=this.videoElement.nativeElement;if(t.readyState===t.HAVE_ENOUGH_DATA){this.context?.drawImage(t,0,0,this.canvas.width,this.canvas.height);let i=this.context?.getImageData(0,0,this.canvas.width,this.canvas.height);if(i){let a=(0,ri.default)(i.data,i.width,i.height);if(a){console.log("QR Code detected:",a.data),t.remove();let g={imageData:a.data};this.gameService.upload(a.data).pipe(vt(1)).subscribe(b=>{console.log("result -> ",b),alert("QR Code detected: "+a.data)})}}requestAnimationFrame(this.tick.bind(this))}else setTimeout(this.tick.bind(this),10)}capture(){}};n.\u0275fac=function(i){return new(i||n)(p(P))},n.\u0275cmp=w({type:n,selectors:[["app-qr-code"]],viewQuery:function(i,a){if(i&1&&(Te(Dn,5),Te(Ln,5)),i&2){let g;Ee(g=Ge())&&(a.videoElement=g.first),Ee(g=Ge())&&(a.imageElement=g.first)}},decls:16,vars:3,consts:[["video",""],["image",""],["type","text","placeholder","Enter text for QR Code",3,"ngModelChange","ngModel"],[3,"click"],[4,"ngIf"],["width","640","height","480","autoplay",""],["alt","Alternate Text",3,"src"],["alt","QR Code",3,"src"]],template:function(i,a){if(i&1){let g=C();s(0,"h1"),c(1,"Generate QR Code"),o(),s(2,"div")(3,"input",2),Ue("ngModelChange",function(y){return u(g),je(a.qrCodeString,y)||(a.qrCodeString=y),h(y)}),o(),s(4,"button",3),v("click",function(){return u(g),h(a.generateQRCode())}),c(5,"Generate"),o()(),f(6,qn,4,1,"div",4),s(7,"div")(8,"h2"),c(9,"Captured Frame"),o(),_(10,"video",5,0),s(12,"button",3),v("click",function(){return u(g),h(a.capture())}),c(13,"Capture QR Code"),o(),_(14,"img",6,1),o()}i&2&&(m(3),Qe("ngModel",a.qrCodeString),m(3),l("ngIf",a.qrCodeUrl),m(8),l("src",a.imageSrc,Z))},dependencies:[O,fe,K,We],encapsulation:2});let e=n;return e})();var Fn=[{path:"",component:ti,children:[{path:"library",component:ke},{path:"library/:id",component:ke},{path:"categories",component:ei},{path:"new",component:ii}]},{path:"qr-code",component:ai},{path:"add",component:De},{path:":id/update",component:De},{path:"add-existing-game",component:De},{path:":id/add-existing-game",component:De},{path:":id/details",component:$t},{path:":id/availability",component:Yt},{path:":id/reviews",component:Kt}],oi=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=Ve({type:n}),n.\u0275inj=qe({imports:[mt.forChild(Fn),mt]});let e=n;return e})();var vo=(()=>{let n=class n{};n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=Ve({type:n}),n.\u0275inj=qe({imports:[At,xt,Ft,Nt,oi,Tt,kt,Pt,Qt,Lt,jt]});let e=n;return e})();export{vo as GamesLibraryModule};
