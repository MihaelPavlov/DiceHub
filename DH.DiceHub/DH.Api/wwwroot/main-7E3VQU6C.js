import{a as yu}from"./chunk-SZZXTDUL.js";import{a as Ut}from"./chunk-W43YP37E.js";import{a as Ze}from"./chunk-5HEUILBE.js";import{a as du}from"./chunk-3YFOIB2Z.js";import{a as hu}from"./chunk-RG3YGCS2.js";import{a as lr}from"./chunk-ZNCIGRRM.js";import{a as pu,b as mu,c as gu,d as _u}from"./chunk-257RNC4W.js";import{a as fu}from"./chunk-B6POORFO.js";import{a as Se,b as On,c as qt}from"./chunk-4XCZJEOQ.js";import{a as $e}from"./chunk-PQJ34A2R.js";import{a as Xe}from"./chunk-ELPMLOTJ.js";import{d as vu}from"./chunk-S4L6UGIL.js";import{$ as St,$a as or,$b as un,A as tr,Aa as an,Ab as nu,Bb as iu,C as nr,Ca as we,Cb as cn,E as Ds,Ea as V,Fa as L,Fb as ru,G as Fc,Gb as Nt,Gc as Nn,Hb as Ae,Hc as ur,I as Os,Ia as pi,Ib as Dt,Ic as Ft,J as di,Jb as Ot,Jc as ou,Ka as zc,Kb as Ne,Kc as ie,L as ee,La as Gc,Lc as au,M as j,Ma as rr,Mb as xt,Mc as cu,N as He,Na as sr,Nc as vi,O as H,Oa as mi,Oc as ce,P as Uc,Pa as k,Pb as Mt,Q as be,Qa as ke,Ra as Fe,Rb as Vt,S as Z,Sc as uu,T as $,Tc as lu,Ua as Pt,Uc as Dn,Va as Rt,Vb as Lt,Vc as De,W as se,Wa as kt,X as oe,Y as te,Ya as Wc,Z as ve,Zb as Ms,_a as gi,_b as _i,a as Nc,ab as Kc,b as Dc,ba as ir,ca as qc,cb as Ye,cc as yi,db as ct,dc as su,ea as Bc,eb as Hc,f as At,fa as fi,g,ga as jc,gb as xs,h as As,hb as Qc,i as Oc,ia as P,ib as Yc,j as er,ja as N,jb as Jc,kb as ar,l as xc,lb as Xc,m as Mc,ma as Qe,na as Ct,o as Ss,oa as z,ob as Je,p as Cs,pb as cr,q as Ps,qa as R,qb as ae,r as Ke,rb as Zc,s as Rs,t as sn,tb as Rn,u as Vc,ub as eu,v as ks,va as $c,w as Lc,wa as b,xa as S,xb as tu,y as Ns,ya as x,yc as W,za as on,zb as kn}from"./chunk-JJGLVIRE.js";var rf=(t,e)=>({success:t,error:e});function sf(t,e){t&1&&(b(0,"div",9)(1,"p"),k(2,"Confirming your email, please wait..."),S()())}function of(t,e){if(t&1){let n=we();b(0,"a",14),V("click",function(){se(n);let s=L(2);return oe(s.resendConfirmationEmail())}),k(1,"Resend email from here"),S()}}function af(t,e){if(t&1){let n=we();b(0,"button",15),V("click",function(){se(n);let s=L(2);return oe(s.navigateToLogin())}),k(1," Click here if you are not redirected automatically "),S()}}function cf(t,e){if(t&1&&(b(0,"div",10),x(1,"h2",11),z(2,of,2,0,"a",12)(3,af,2,0,"button",13),S()),t&2){let n=L();R("ngClass",or(4,rf,n.isSuccess,!n.isSuccess)),P(),R("innerHTML",n.message,Bc),P(),R("ngIf",!n.isSuccess),P(),R("ngIf",n.isSuccess)}}var wu=(()=>{let e=class e{constructor(i,s,a,u,h){this.toastService=i,this.route=s,this.router=a,this.authService=u,this.tenantSettingsService=h,this.message="Confirming...",this.isSuccess=!1,this.email=null,this.clubName=null}ngOnInit(){this.route.queryParams.subscribe(i=>{this.email=i.email;let s=i.token;this.email&&s?this.confirmEmail(this.email,s):this.message="Invalid confirmation link."}),this.tenantSettingsService.getClubName().subscribe({next:i=>{this.clubName=i}})}navigateToLogin(){this.router.navigateByUrl("login")}resendConfirmationEmail(){this.email&&this.authService.sendEmailConfirmationRequest(this.email).subscribe({next:i=>{i&&i===!0?(this.toastService.success({message:"Confirmation email sent successfully!",type:W.Success}),this.message="Email sent successfully! Please check your inbox.",this.isSuccess=!0):this.toastService.error({message:"Failed to send confirmation email.",type:W.Error})},error:()=>{this.toastService.error({message:"Failed to send confirmation email.",type:W.Error})}})}confirmEmail(i,s){this.authService.confirmEmail(i,s).subscribe({next:a=>{if(this.isSuccess=!!a,!this.isSuccess)this.message="Email confirmation failed.";else{this.message='Your email has been confirmed successfully! <br/>You will be redirected to your account in <span class="dot-loader">3</span> seconds...';let u=3,h=setInterval(()=>{u--;let I=document.querySelector(".dot-loader");I&&(I.textContent=u.toString()),u===0&&clearInterval(h)},1e3);setTimeout(()=>{this.authService.authenticateUser(a.accessToken,a.refreshToken),this.authService.initiateNotifications(i),this.router.navigateByUrl(On.GAMES.LIBRARY)},3e3)}},error:a=>{console.log("error",a),this.isSuccess=!1,this.message="Email confirmation failed."}})}};e.\u0275fac=function(s){return new(s||e)(N(Xe),N(Ft),N(ie),N(ce),N(Ze))},e.\u0275cmp=Z({type:e,selectors:[["app-confirm-email"]],decls:10,vars:3,consts:[[1,"wrapper"],[1,"interactive-option"],[1,"icon_wrapper"],["viewBox","0 -960 960 960",1,"icon"],["d","M750.54-116.15 638.15-229.31l-88 88-11.07-11.07q-26.39-26.39-26.39-63.47 0-37.07 26.39-63.46l145.61-145.61q26.39-26.39 63.46-26.39 37.08 0 63.47 26.39l11.07 11.07-88 88 113.16 113.39q13.69 13.69 13.69 31.61 0 17.93-13.69 31.62l-33.08 33.08q-13.69 13.69-32.12 13.69-18.42 0-32.11-13.69ZM853-735.92 408.31-290.46l24.61 25.38q16.39 26.39 13.39 57.46-3 31.08-26.39 54.47l-11.07 11.07-88-88-113.39 114.16q-13.69 13.69-31.61 13.69-17.93 0-31.62-13.69L110.15-150q-13.69-13.69-13.69-31.62 0-17.92 13.69-31.61l114.16-113.39-88-88 11.07-11.07q23.39-23.39 54.97-26.39 31.57-3 57.96 14.39l26.15 25.38L731.92-857H853v121.08ZM333-601l14.23-15.77 14-14-14 14L333-601Zm-46.31 45.54L107-735.92V-857h121.08L407-677.31l-45.77 46.54L201-791h-28v28l160 162-46.31 45.54ZM363-337l424-426v-28h-28L334-366l29 29Zm0 0-13.23-15.77L334-366l15.77 13.23L363-337Z"],[1,"header"],[1,"confirmation-container"],["class","spinner-wrapper",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"spinner-wrapper"],[3,"ngClass"],[3,"innerHTML"],["class","resend-link",3,"click",4,"ngIf"],["class","fallback-btn",3,"click",4,"ngIf"],[1,"resend-link",3,"click"],[1,"fallback-btn",3,"click"]],template:function(s,a){if(s&1&&(b(0,"div",0)(1,"div",1)(2,"div",2),te(),b(3,"svg",3),x(4,"path",4),S()()(),ve(),b(5,"span",5),k(6),S(),b(7,"div",6),z(8,sf,3,0,"div",7)(9,cf,4,7,"div",8),S()()),s&2){let u;P(6),ke((u=a.clubName)!==null&&u!==void 0?u:"Club"),P(2),R("ngIf",a.message==="Confirming..."),P(),R("ngIf",a.message!=="Confirming...")}},dependencies:[Je,ae],styles:[".confirmation-container[_ngcontent-%COMP%]{margin-top:100px;text-align:center;font-family:Arial,sans-serif}.spinner-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px}.success[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60}.error[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e74c3c}.markup[_ngcontent-%COMP%]{color:#75a0ff}.interactive-option[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}.interactive-option[_ngcontent-%COMP%]   .icon_wrapper[_ngcontent-%COMP%]{width:5rem;height:5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);display:flex;justify-content:center;align-items:center}.interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#fff}.header[_ngcontent-%COMP%]{margin:1rem;display:flex;justify-content:center;font-size:1.5rem}.dot-loader[_ngcontent-%COMP%]{font-weight:700;animation:_ngcontent-%COMP%_blink 1s step-start infinite}@keyframes _ngcontent-%COMP%_blink{50%{opacity:0}}.fallback-btn[_ngcontent-%COMP%]{margin-top:20px;background-color:#007bff;color:#fff;padding:10px 20px;border:none;border-radius:6px;cursor:pointer}.resend-link[_ngcontent-%COMP%]{color:#46945b;border-bottom:.15rem solid #46945b;padding-top:1rem;display:inline-block;font-size:1.2rem}"]});let t=e;return t})();var Iu=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[De]});let t=e;return t})();var xn={production:!1,firebase:{apiKey:"AIzaSyBSZ3ju-sFNOPAoLuw_q2PebmtQsQ3D13s",authDomain:"dicehub-8c63f.firebaseapp.com",projectId:"dicehub-8c63f",storageBucket:"dicehub-8c63f.appspot.com",messagingSenderId:"566204429306",appId:"1:566204429306:web:cda989326f8fd750d02a43",vapidKey:"BJe_JAbnZmMBiqvXy3XUYMzqdrV9r1JbslUXEf7a_PSDGWFXxQ-xNK5FlmxItWCVkPM_W9gnWaIvTdLIsVB6PCo"}};var Tu=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uf=function(t){let e=[],n=0,i=0;for(;n<t.length;){let s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){let a=t[n++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){let a=t[n++],u=t[n++],h=t[n++],I=((s&7)<<18|(a&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(I>>10)),e[i++]=String.fromCharCode(56320+(I&1023))}else{let a=t[n++],u=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},bu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){let a=t[s],u=s+1<t.length,h=u?t[s+1]:0,I=s+2<t.length,T=I?t[s+2]:0,A=a>>2,D=(a&3)<<4|h>>4,M=(h&15)<<2|T>>6,ne=T&63;I||(ne=64,u||(M=64)),i.push(n[A],n[D],n[M],n[ne])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uf(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){let a=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;let T=s<t.length?n[t.charAt(s)]:64;++s;let D=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||h==null||T==null||D==null)throw new Ls;let M=a<<2|h>>4;if(i.push(M),T!==64){let ne=h<<4&240|T>>2;if(i.push(ne),D!==64){let q=T<<6&192|D;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ls=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lf=function(t){let e=Tu(t);return bu.encodeByteArray(e,!0)},wi=function(t){return lf(t).replace(/\./g,"")},Us=function(t){try{return bu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var df=()=>hf().__FIREBASE_DEFAULTS__,ff=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pf=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Us(t[1]);return e&&JSON.parse(e)},qs=()=>{try{return df()||ff()||pf()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bs=t=>{var e,n;return(n=(e=qs())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Au=t=>{let e=Bs(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},js=()=>{var t;return(t=qs())===null||t===void 0?void 0:t.config},$s=t=>{var e;return(e=qs())===null||e===void 0?void 0:e[`_${t}`]};var fr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Su(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wi(JSON.stringify(n)),wi(JSON.stringify(u)),""].join(".")}function he(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cu(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(he())}function Pu(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ru(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ku(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nu(){let t=he();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ii(){try{return typeof indexedDB=="object"}catch{return!1}}function pr(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function Du(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var mf="FirebaseError",Ce=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=mf,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}},Le=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?gf(a,i):"Error",h=`${this.serviceName}: ${u} (${s}).`;return new Ce(s,h,i)}};function gf(t,e){return t.replace(_f,(n,i)=>{let s=e[i];return s!=null?String(s):`<${i}?>`})}var _f=/\{\$([^}]+)}/g;function Ou(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ln(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let s of n){if(!i.includes(s))return!1;let a=t[s],u=e[s];if(Eu(a)&&Eu(u)){if(!ln(a,u))return!1}else if(a!==u)return!1}for(let s of i)if(!n.includes(s))return!1;return!0}function Eu(t){return t!==null&&typeof t=="object"}function Ei(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xu(t,e){let n=new Fs(t,e);return n.subscribe.bind(n)}var Fs=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");yf(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Vs),s.error===void 0&&(s.error=Vs),s.complete===void 0&&(s.complete=Vs);let a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yf(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vs(){}var Wv=4*60*60*1e3;function Ue(t){return t&&t._delegate?t._delegate:t}var ue=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var hn="[DEFAULT]";var zs=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new fr;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wf(e))try{this.getOrInitializeService({instanceIdentifier:hn})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(n);try{let a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=hn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return g(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=hn){return this.instances.has(e)}getOptions(e=hn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[a,u]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(a);i===h&&u.resolve(s)}return s}onInit(e,n){var i;let s=this.normalizeInstanceIdentifier(n),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);let u=this.instances.get(s);return u&&e(u,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vf(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hn){return this.component?this.component.multipleInstances?e:hn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function vf(t){return t===hn?void 0:t}function wf(t){return t.instantiationMode==="EAGER"}var mr=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new zs(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var If=[],G=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(G||{}),Ef={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},Tf=G.INFO,bf={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},Af=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),s=bf[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},jt=class{constructor(e){this.name=e,this._logLevel=Tf,this._logHandler=Af,this._userLogHandler=null,If.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ef[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...e),this._logHandler(this,G.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...e),this._logHandler(this,G.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,G.INFO,...e),this._logHandler(this,G.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,G.WARN,...e),this._logHandler(this,G.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...e),this._logHandler(this,G.ERROR,...e)}};var Sf=(t,e)=>e.some(n=>t instanceof n),Mu,Vu;function Cf(){return Mu||(Mu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pf(){return Vu||(Vu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Lu=new WeakMap,Ws=new WeakMap,Fu=new WeakMap,Gs=new WeakMap,Hs=new WeakMap;function Rf(t){let e=new Promise((n,i)=>{let s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(ze(t.result)),s()},u=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&Lu.set(n,t)}).catch(()=>{}),Hs.set(e,t),e}function kf(t){if(Ws.has(t))return;let e=new Promise((n,i)=>{let s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),s()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Ws.set(t,e)}var Ks={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ws.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Fu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ze(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Uu(t){Ks=t(Ks)}function Nf(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(gr(this),e,...n);return Fu.set(i,e.sort?e.sort():[e]),ze(i)}:Pf().includes(t)?function(...e){return t.apply(gr(this),e),ze(Lu.get(this))}:function(...e){return ze(t.apply(gr(this),e))}}function Df(t){return typeof t=="function"?Nf(t):(t instanceof IDBTransaction&&kf(t),Sf(t,Cf())?new Proxy(t,Ks):t)}function ze(t){if(t instanceof IDBRequest)return Rf(t);if(Gs.has(t))return Gs.get(t);let e=Df(t);return e!==t&&(Gs.set(t,e),Hs.set(e,t)),e}var gr=t=>Hs.get(t);function dn(t,e,{blocked:n,upgrade:i,blocking:s,terminated:a}={}){let u=indexedDB.open(t,e),h=ze(u);return i&&u.addEventListener("upgradeneeded",I=>{i(ze(u.result),I.oldVersion,I.newVersion,ze(u.transaction),I)}),n&&u.addEventListener("blocked",I=>n(I.oldVersion,I.newVersion,I)),h.then(I=>{a&&I.addEventListener("close",()=>a()),s&&I.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),h}function _r(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",i=>e(i.oldVersion,i)),ze(n).then(()=>{})}var Of=["get","getKey","getAll","getAllKeys","count"],xf=["put","add","delete","clear"],Qs=new Map;function qu(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qs.get(e))return Qs.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,s=xf.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Of.includes(n)))return;let a=function(u,...h){return g(this,null,function*(){let I=this.transaction(u,s?"readwrite":"readonly"),T=I.store;return i&&(T=T.index(h.shift())),(yield Promise.all([T[n](...h),s&&I.done]))[0]})};return Qs.set(e,a),a}Uu(t=>Dc(Nc({},t),{get:(e,n,i)=>qu(e,n)||t.get(e,n,i),has:(e,n)=>!!qu(e,n)||t.has(e,n)}));var Js=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mf(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function Mf(t){let e=t.getComponent();return e?.type==="VERSION"}var Xs="@firebase/app",Bu="0.10.13";var ht=new jt("@firebase/app"),Vf="@firebase/app-compat",Lf="@firebase/analytics-compat",Ff="@firebase/analytics",Uf="@firebase/app-check-compat",qf="@firebase/app-check",Bf="@firebase/auth",jf="@firebase/auth-compat",$f="@firebase/database",zf="@firebase/data-connect",Gf="@firebase/database-compat",Wf="@firebase/functions",Kf="@firebase/functions-compat",Hf="@firebase/installations",Qf="@firebase/installations-compat",Yf="@firebase/messaging",Jf="@firebase/messaging-compat",Xf="@firebase/performance",Zf="@firebase/performance-compat",ep="@firebase/remote-config",tp="@firebase/remote-config-compat",np="@firebase/storage",ip="@firebase/storage-compat",rp="@firebase/firestore",sp="@firebase/vertexai-preview",op="@firebase/firestore-compat",ap="firebase",cp="10.14.1";var Zs="[DEFAULT]",up={[Xs]:"fire-core",[Vf]:"fire-core-compat",[Ff]:"fire-analytics",[Lf]:"fire-analytics-compat",[qf]:"fire-app-check",[Uf]:"fire-app-check-compat",[Bf]:"fire-auth",[jf]:"fire-auth-compat",[$f]:"fire-rtdb",[zf]:"fire-data-connect",[Gf]:"fire-rtdb-compat",[Wf]:"fire-fn",[Kf]:"fire-fn-compat",[Hf]:"fire-iid",[Qf]:"fire-iid-compat",[Yf]:"fire-fcm",[Jf]:"fire-fcm-compat",[Xf]:"fire-perf",[Zf]:"fire-perf-compat",[ep]:"fire-rc",[tp]:"fire-rc-compat",[np]:"fire-gcs",[ip]:"fire-gcs-compat",[rp]:"fire-fst",[op]:"fire-fst-compat",[sp]:"fire-vertex","fire-js":"fire-js",[ap]:"fire-js-all"};var Ti=new Map,lp=new Map,eo=new Map;function ju(t,e){try{t.container.addComponent(e)}catch(n){ht.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oe(t){let e=t.name;if(eo.has(e))return ht.debug(`There were multiple attempts to register component ${e}.`),!1;eo.set(e,t);for(let n of Ti.values())ju(n,t);for(let n of lp.values())ju(n,t);return!0}function et(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dt(t){return t.settings!==void 0}var hp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$t=new Le("app","Firebase",hp);var to=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ue("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $t.create("app-deleted",{appName:this._name})}};var zt=cp;function ro(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Zs,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw $t.create("bad-app-name",{appName:String(s)});if(n||(n=js()),!n)throw $t.create("no-options");let a=Ti.get(s);if(a){if(ln(n,a.options)&&ln(i,a.config))return a;throw $t.create("duplicate-app",{appName:s})}let u=new mr(s);for(let I of eo.values())u.addComponent(I);let h=new to(n,i,u);return Ti.set(s,h),h}function ft(t=Zs){let e=Ti.get(t);if(!e&&t===Zs&&js())return ro();if(!e)throw $t.create("no-app",{appName:t});return e}function yr(){return Array.from(Ti.values())}function Q(t,e,n){var i;let s=(i=up[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);let a=s.match(/\s|\//),u=e.match(/\s|\//);if(a||u){let h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ht.warn(h.join(" "));return}Oe(new ue(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var dp="firebase-heartbeat-database",fp=1,bi="firebase-heartbeat-store",Ys=null;function Wu(){return Ys||(Ys=dn(dp,fp,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bi)}catch(n){console.warn(n)}}}}).catch(t=>{throw $t.create("idb-open",{originalErrorMessage:t.message})})),Ys}function pp(t){return g(this,null,function*(){try{let n=(yield Wu()).transaction(bi),i=yield n.objectStore(bi).get(Ku(t));return yield n.done,i}catch(e){if(e instanceof Ce)ht.warn(e.message);else{let n=$t.create("idb-get",{originalErrorMessage:e?.message});ht.warn(n.message)}}})}function $u(t,e){return g(this,null,function*(){try{let i=(yield Wu()).transaction(bi,"readwrite");yield i.objectStore(bi).put(e,Ku(t)),yield i.done}catch(n){if(n instanceof Ce)ht.warn(n.message);else{let i=$t.create("idb-set",{originalErrorMessage:n?.message});ht.warn(i.message)}}})}function Ku(t){return`${t.name}!${t.options.appId}`}var mp=1024,gp=30*24*60*60*1e3,no=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new io(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return g(this,null,function*(){var e,n;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=zu();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{let h=new Date(u.date).valueOf();return Date.now()-h<=gp}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ht.warn(i)}})}getHeartbeatsHeader(){return g(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=zu(),{heartbeatsToSend:i,unsentEntries:s}=_p(this._heartbeatsCache.heartbeats),a=wi(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return ht.warn(n),""}})}};function zu(){return new Date().toISOString().substring(0,10)}function _p(t,e=mp){let n=[],i=t.slice();for(let s of t){let a=n.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),Gu(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Gu(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var io=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(this,null,function*(){return Ii()?pr().then(()=>!0).catch(()=>!1):!1})}read(){return g(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield pp(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return $u(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return g(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return $u(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return})}};function Gu(t){return wi(JSON.stringify({version:2,heartbeats:t})).length}function yp(t){Oe(new ue("platform-logger",e=>new Js(e),"PRIVATE")),Oe(new ue("heartbeat",e=>new no(e),"PRIVATE")),Q(Xs,Bu,t),Q(Xs,Bu,"esm2017"),Q("fire-js","")}yp("");var Yu="@firebase/installations",co="0.6.9";var Ju=1e4,Xu=`w:${co}`,Zu="FIS_v2",vp="https://firebaseinstallations.googleapis.com/v1",wp=60*60*1e3,Ip="installations",Ep="Installations";var Tp={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},pn=new Le(Ip,Ep,Tp);function el(t){return t instanceof Ce&&t.code.includes("request-failed")}function tl({projectId:t}){return`${vp}/projects/${t}/installations`}function nl(t){return{token:t.token,requestStatus:2,expiresIn:Ap(t.expiresIn),creationTime:Date.now()}}function il(t,e){return g(this,null,function*(){let i=(yield e.json()).error;return pn.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function rl({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bp(t,{refreshToken:e}){let n=rl(t);return n.append("Authorization",Sp(e)),n}function sl(t){return g(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Ap(t){return Number(t.replace("s","000"))}function Sp(t){return`${Zu} ${t}`}function Cp(i,s){return g(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let a=tl(t),u=rl(t),h=e.getImmediate({optional:!0});if(h){let D=yield h.getHeartbeatsHeader();D&&u.append("x-firebase-client",D)}let I={fid:n,authVersion:Zu,appId:t.appId,sdkVersion:Xu},T={method:"POST",headers:u,body:JSON.stringify(I)},A=yield sl(()=>fetch(a,T));if(A.ok){let D=yield A.json();return{fid:D.fid||n,registrationStatus:2,refreshToken:D.refreshToken,authToken:nl(D.authToken)}}else throw yield il("Create Installation",A)})}function ol(t){return new Promise(e=>{setTimeout(e,t)})}function Pp(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var Rp=/^[cdef][\w-]{21}$/,ao="";function kp(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=Np(t);return Rp.test(n)?n:ao}catch{return ao}}function Np(t){return Pp(t).substr(0,22)}function wr(t){return`${t.appName}!${t.appId}`}var al=new Map;function cl(t,e){let n=wr(t);ul(n,e),Dp(n,e)}function ul(t,e){let n=al.get(t);if(n)for(let i of n)i(e)}function Dp(t,e){let n=Op();n&&n.postMessage({key:t,fid:e}),xp()}var fn=null;function Op(){return!fn&&"BroadcastChannel"in self&&(fn=new BroadcastChannel("[Firebase] FID Change"),fn.onmessage=t=>{ul(t.data.key,t.data.fid)}),fn}function xp(){al.size===0&&fn&&(fn.close(),fn=null)}var Mp="firebase-installations-database",Vp=1,mn="firebase-installations-store",so=null;function uo(){return so||(so=dn(Mp,Vp,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(mn)}}})),so}function vr(t,e){return g(this,null,function*(){let n=wr(t),s=(yield uo()).transaction(mn,"readwrite"),a=s.objectStore(mn),u=yield a.get(n);return yield a.put(e,n),yield s.done,(!u||u.fid!==e.fid)&&cl(t,e.fid),e})}function ll(t){return g(this,null,function*(){let e=wr(t),i=(yield uo()).transaction(mn,"readwrite");yield i.objectStore(mn).delete(e),yield i.done})}function Ir(t,e){return g(this,null,function*(){let n=wr(t),s=(yield uo()).transaction(mn,"readwrite"),a=s.objectStore(mn),u=yield a.get(n),h=e(u);return h===void 0?yield a.delete(n):yield a.put(h,n),yield s.done,h&&(!u||u.fid!==h.fid)&&cl(t,h.fid),h})}function lo(t){return g(this,null,function*(){let e,n=yield Ir(t.appConfig,i=>{let s=Lp(i),a=Fp(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===ao?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Lp(t){let e=t||{fid:kp(),registrationStatus:0};return hl(e)}function Fp(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let s=Promise.reject(pn.create("app-offline"));return{installationEntry:e,registrationPromise:s}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Up(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qp(t)}:{installationEntry:e}}function Up(t,e){return g(this,null,function*(){try{let n=yield Cp(t,e);return vr(t.appConfig,n)}catch(n){throw el(n)&&n.customData.serverCode===409?yield ll(t.appConfig):yield vr(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function qp(t){return g(this,null,function*(){let e=yield Hu(t.appConfig);for(;e.registrationStatus===1;)yield ol(100),e=yield Hu(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield lo(t);return i||n}return e})}function Hu(t){return Ir(t,e=>{if(!e)throw pn.create("installation-not-found");return hl(e)})}function hl(t){return Bp(t)?{fid:t.fid,registrationStatus:0}:t}function Bp(t){return t.registrationStatus===1&&t.registrationTime+Ju<Date.now()}function jp(i,s){return g(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let a=$p(t,n),u=bp(t,n),h=e.getImmediate({optional:!0});if(h){let D=yield h.getHeartbeatsHeader();D&&u.append("x-firebase-client",D)}let I={installation:{sdkVersion:Xu,appId:t.appId}},T={method:"POST",headers:u,body:JSON.stringify(I)},A=yield sl(()=>fetch(a,T));if(A.ok){let D=yield A.json();return nl(D)}else throw yield il("Generate Auth Token",A)})}function $p(t,{fid:e}){return`${tl(t)}/${e}/authTokens:generate`}function ho(t,e=!1){return g(this,null,function*(){let n,i=yield Ir(t.appConfig,a=>{if(!dl(a))throw pn.create("not-registered");let u=a.authToken;if(!e&&Wp(u))return a;if(u.requestStatus===1)return n=zp(t,e),a;{if(!navigator.onLine)throw pn.create("app-offline");let h=Hp(a);return n=Gp(t,h),h}});return n?yield n:i.authToken})}function zp(t,e){return g(this,null,function*(){let n=yield Qu(t.appConfig);for(;n.authToken.requestStatus===1;)yield ol(100),n=yield Qu(t.appConfig);let i=n.authToken;return i.requestStatus===0?ho(t,e):i})}function Qu(t){return Ir(t,e=>{if(!dl(e))throw pn.create("not-registered");let n=e.authToken;return Qp(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Gp(t,e){return g(this,null,function*(){try{let n=yield jp(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield vr(t.appConfig,i),n}catch(n){if(el(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield ll(t.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield vr(t.appConfig,i)}throw n}})}function dl(t){return t!==void 0&&t.registrationStatus===2}function Wp(t){return t.requestStatus===2&&!Kp(t)}function Kp(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+wp}function Hp(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Qp(t){return t.requestStatus===1&&t.requestTime+Ju<Date.now()}function Yp(t){return g(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:i}=yield lo(e);return i?i.catch(console.error):ho(e).catch(console.error),n.fid})}function Jp(t,e=!1){return g(this,null,function*(){let n=t;return yield Xp(n),(yield ho(n,e)).token})}function Xp(t){return g(this,null,function*(){let{registrationPromise:e}=yield lo(t);e&&(yield e)})}function Zp(t){if(!t||!t.options)throw oo("App Configuration");if(!t.name)throw oo("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw oo(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function oo(t){return pn.create("missing-app-config-values",{valueName:t})}var fl="installations",em="installations-internal",tm=t=>{let e=t.getProvider("app").getImmediate(),n=Zp(e),i=et(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},nm=t=>{let e=t.getProvider("app").getImmediate(),n=et(e,fl).getImmediate();return{getId:()=>Yp(n),getToken:s=>Jp(n,s)}};function im(){Oe(new ue(fl,tm,"PUBLIC")),Oe(new ue(em,nm,"PRIVATE"))}im();Q(Yu,co);Q(Yu,co,"esm2017");var rm="/firebase-messaging-sw.js",sm="/firebase-cloud-messaging-push-scope",vl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",om="https://fcmregistrations.googleapis.com/v1",wl="google.c.a.c_id",am="google.c.a.c_l",cm="google.c.a.ts",um="google.c.a.e";var Er=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Er||{});function pt(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lm(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),s=new Uint8Array(i.length);for(let a=0;a<i.length;++a)s[a]=i.charCodeAt(a);return s}var fo="fcm_token_details_db",hm=5,pl="fcm_token_object_Store";function dm(t){return g(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(a=>a.name).includes(fo))return null;let e=null;return(yield dn(fo,hm,{upgrade:(i,s,a,u)=>g(this,null,function*(){var h;if(s<2||!i.objectStoreNames.contains(pl))return;let I=u.objectStore(pl),T=yield I.index("fcmSenderId").get(t);if(yield I.clear(),!!T){if(s===2){let A=T;if(!A.auth||!A.p256dh||!A.endpoint)return;e={token:A.fcmToken,createTime:(h=A.createTime)!==null&&h!==void 0?h:Date.now(),subscriptionOptions:{auth:A.auth,p256dh:A.p256dh,endpoint:A.endpoint,swScope:A.swScope,vapidKey:typeof A.vapidKey=="string"?A.vapidKey:pt(A.vapidKey)}}}else if(s===3){let A=T;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:pt(A.auth),p256dh:pt(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:pt(A.vapidKey)}}}else if(s===4){let A=T;e={token:A.fcmToken,createTime:A.createTime,subscriptionOptions:{auth:pt(A.auth),p256dh:pt(A.p256dh),endpoint:A.endpoint,swScope:A.swScope,vapidKey:pt(A.vapidKey)}}}}})})).close(),yield _r(fo),yield _r("fcm_vapid_details_db"),yield _r("undefined"),fm(e)?e:null})}function fm(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var pm="firebase-messaging-database",mm=1,Ai="firebase-messaging-store",po=null;function Il(){return po||(po=dn(pm,mm,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ai)}}})),po}function gm(t){return g(this,null,function*(){let e=El(t),i=yield(yield Il()).transaction(Ai).objectStore(Ai).get(e);if(i)return i;{let s=yield dm(t.appConfig.senderId);if(s)return yield _o(t,s),s}})}function _o(t,e){return g(this,null,function*(){let n=El(t),s=(yield Il()).transaction(Ai,"readwrite");return yield s.objectStore(Ai).put(e,n),yield s.done,e})}function El({appConfig:t}){return t.appId}var _m={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ie=new Le("messaging","Messaging",_m);function ym(t,e){return g(this,null,function*(){let n=yield vo(t),i=Tl(e),s={method:"POST",headers:n,body:JSON.stringify(i)},a;try{a=yield(yield fetch(yo(t.appConfig),s)).json()}catch(u){throw Ie.create("token-subscribe-failed",{errorInfo:u?.toString()})}if(a.error){let u=a.error.message;throw Ie.create("token-subscribe-failed",{errorInfo:u})}if(!a.token)throw Ie.create("token-subscribe-no-token");return a.token})}function vm(t,e){return g(this,null,function*(){let n=yield vo(t),i=Tl(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(i)},a;try{a=yield(yield fetch(`${yo(t.appConfig)}/${e.token}`,s)).json()}catch(u){throw Ie.create("token-update-failed",{errorInfo:u?.toString()})}if(a.error){let u=a.error.message;throw Ie.create("token-update-failed",{errorInfo:u})}if(!a.token)throw Ie.create("token-update-no-token");return a.token})}function wm(t,e){return g(this,null,function*(){let i={method:"DELETE",headers:yield vo(t)};try{let a=yield(yield fetch(`${yo(t.appConfig)}/${e}`,i)).json();if(a.error){let u=a.error.message;throw Ie.create("token-unsubscribe-failed",{errorInfo:u})}}catch(s){throw Ie.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}})}function yo({projectId:t}){return`${om}/projects/${t}/registrations`}function vo(n){return g(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function Tl({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let s={web:{endpoint:n,auth:e,p256dh:t}};return i!==vl&&(s.web.applicationPubKey=i),s}var Im=7*24*60*60*1e3;function Em(t){return g(this,null,function*(){let e=yield bm(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:pt(e.getKey("auth")),p256dh:pt(e.getKey("p256dh"))},i=yield gm(t.firebaseDependencies);if(i){if(Am(i.subscriptionOptions,n))return Date.now()>=i.createTime+Im?Tm(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield wm(t.firebaseDependencies,i.token)}catch(s){console.warn(s)}return ml(t.firebaseDependencies,n)}else return ml(t.firebaseDependencies,n)})}function Tm(t,e){return g(this,null,function*(){try{let n=yield vm(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield _o(t.firebaseDependencies,i),n}catch(n){throw n}})}function ml(t,e){return g(this,null,function*(){let i={token:yield ym(t,e),createTime:Date.now(),subscriptionOptions:e};return yield _o(t,i),i.token})}function bm(t,e){return g(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lm(e)})})}function Am(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,s=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&i&&s&&a}function gl(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Sm(e,t),Cm(e,t),Pm(e,t),e}function Sm(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let s=e.notification.image;s&&(t.notification.image=s);let a=e.notification.icon;a&&(t.notification.icon=a)}function Cm(t,e){e.data&&(t.data=e.data)}function Pm(t,e){var n,i,s,a,u;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let h=(s=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(a=e.notification)===null||a===void 0?void 0:a.click_action;h&&(t.fcmOptions.link=h);let I=(u=e.fcmOptions)===null||u===void 0?void 0:u.analytics_label;I&&(t.fcmOptions.analyticsLabel=I)}function Rm(t){return typeof t=="object"&&!!t&&wl in t}km("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function km(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function Nm(t){if(!t||!t.options)throw mo("App Configuration Object");if(!t.name)throw mo("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw mo(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function mo(t){return Ie.create("missing-app-config-values",{valueName:t})}var go=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let s=Nm(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function Dm(t){return g(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(rm,{scope:sm}),t.swRegistration.update().catch(()=>{})}catch(e){throw Ie.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function Om(t,e){return g(this,null,function*(){if(!e&&!t.swRegistration&&(yield Dm(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ie.create("invalid-sw-registration");t.swRegistration=e}})}function xm(t,e){return g(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=vl)})}function bl(t,e){return g(this,null,function*(){if(!navigator)throw Ie.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Ie.create("permission-blocked");return yield xm(t,e?.vapidKey),yield Om(t,e?.serviceWorkerRegistration),Em(t)})}function Mm(t,e,n){return g(this,null,function*(){let i=Vm(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[wl],message_name:n[am],message_time:n[cm],message_device_time:Math.floor(Date.now()/1e3)})})}function Vm(t){switch(t){case Er.NOTIFICATION_CLICKED:return"notification_open";case Er.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Lm(t,e){return g(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Er.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(gl(n)):t.onMessageHandler.next(gl(n)));let i=n.data;Rm(i)&&i[um]==="1"&&(yield Mm(t,n.messageType,i))})}var _l="@firebase/messaging",yl="0.12.12";var Fm=t=>{let e=new go(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Lm(e,n)),e},Um=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>bl(e,i)}};function qm(){Oe(new ue("messaging",Fm,"PUBLIC")),Oe(new ue("messaging-internal",Um,"PRIVATE")),Q(_l,yl),Q(_l,yl,"esm2017")}function wo(){return g(this,null,function*(){try{yield pr()}catch{return!1}return typeof window<"u"&&Ii()&&Du()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Bm(t,e){if(!navigator)throw Ie.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function Al(t=ft()){return wo().then(e=>{if(!e)throw Ie.create("unsupported-browser")},e=>{throw Ie.create("indexed-db-unsupported")}),et(Ue(t),"messaging").getImmediate()}function Tr(t,e){return g(this,null,function*(){return t=Ue(t),bl(t,e)})}function Io(t,e){return t=Ue(t),Bm(t,e)}qm();var jm="firebase",$m="10.14.1";Q(jm,$m,"app");var mt=new Qc("ANGULARFIRE2_VERSION"),Sl=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Ln(t,e,n){if(e){if(e.length===1)return e[0];let a=e.filter(u=>u.app===n);if(a.length===1)return a[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _n=(t,e)=>{let n=e?[e]:yr(),i=[];return n.forEach(s=>{s.container.getProvider(t).instances.forEach(u=>{i.includes(u)||i.push(u)})}),i},Vn=class{constructor(){return _n(zm)}},zm="app-check";function Mn(){}var br=class{zone;delegate;constructor(e,n=Mc){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let s=this.zone,a=function(u){s.runGuarded(()=>{e.apply(this,[u])})};return this.delegate.schedule(a,n,i)}},Eo=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mn,{},Mn,Mn)),n.pipe(di({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Gt=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new br(Zone.current)),this.insideAngular=n.run(()=>new br(Zone.current,xc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(H(Qe))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ar(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Gm(t){return Ar().ngZone.runOutsideAngular(()=>t())}function gn(t){return Ar().ngZone.run(()=>t())}function Wm(t){return Km(Ar())(t)}function Km(t){return function(n){return n=n.lift(new Eo(t.ngZone)),n.pipe(Ps(t.outsideAngular),Cs(t.insideAngular))}}var Hm=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),gn(()=>t.apply(void 0,i))},Wt=(t,e)=>function(){let n,i=arguments;for(let a=0;a<arguments.length;a++)typeof i[a]=="function"&&(e&&(n||=gn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Mn,{},Mn,Mn))),i[a]=Hm(i[a],n));let s=Gm(()=>t.apply(this,i));if(!e)if(s instanceof As){let a=Ar();return s.pipe(Ps(a.outsideAngular),Cs(a.insideAngular))}else return gn(()=>s);return s instanceof As?s.pipe(Wm):s instanceof Promise?gn(()=>new Promise((a,u)=>s.then(h=>gn(()=>a(h)),h=>gn(()=>u(h))))):typeof s=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),s.apply(this,arguments)}:gn(()=>s)};var Ge=class{constructor(e){return e}},gt=class{constructor(){return yr()}};function Qm(t){return t&&t.length===1?t[0]:new Ge(ft())}var To=new He("angularfire2._apps"),Ym={provide:Ge,useFactory:Qm,deps:[[new be,To]]},Jm={provide:gt,deps:[[new be,To]]};function Xm(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ge(i)}}var Zm=(()=>{class t{constructor(n){Q("angularfire",mt.full,"core"),Q("angularfire",mt.full,"app"),Q("angular",Yc.full,n.toString())}static \u0275fac=function(i){return new(i||t)(H(qc))};static \u0275mod=$({type:t});static \u0275inj=j({providers:[Ym,Jm]})}return t})();function Cl(t,...e){return{ngModule:Zm,providers:[{provide:To,useFactory:Xm(t),multi:!0,deps:[Qe,St,Gt,...e]}]}}var Pl=Wt(ro,!0);var _t=class{constructor(e){return e}},Rl="messaging",bo=class{constructor(){return _n(Rl)}};var kl="__angularfire_symbol__messagingIsSupported",Ao="__angularfire_symbol__messagingIsSupportedValue";globalThis[kl]||=wo().then(t=>globalThis[Ao]=t).catch(()=>globalThis[Ao]=!1);var Sr={async:()=>globalThis[kl],sync:()=>{let t=globalThis[Ao];if(t===void 0)throw new Error(Sl("Messaging"));return t}},So=new He("angularfire2.messaging-instances");function eg(t,e){if(!Sr.sync())return null;let n=Ln(Rl,t,e);return n&&new _t(n)}function tg(t){return(e,n)=>{if(!Sr.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new _t(i)}}var ng={provide:bo,deps:[[new be,So]]},ig={provide:_t,useFactory:eg,deps:[[new be,So],Ge]},rg=(()=>{class t{constructor(){Q("angularfire",mt.full,"fcm")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$({type:t});static \u0275inj=j({providers:[ig,ng,{provide:Jc,useValue:Sr.async,multi:!0}]})}return t})();function Nl(t,...e){return{ngModule:rg,providers:[{provide:So,useFactory:tg(t),multi:!0,deps:[Qe,St,Gt,gt,...e]}]}}var tw=Sr.async;var Dl=Wt(Al,!0);var Fn=(()=>{let e=class e{constructor(i,s){this.api=i,this.authService=s,this._messaging=Uc(_t),this._env=xn}getDeviceToken(){return g(this,null,function*(){try{let i=yield Tr(this._messaging,{vapidKey:this._env.firebase.vapidKey});console.log("Device token retrieved:",i),this.authService.getUser&&this.authService.saveToken(i).subscribe()}catch(i){console.warn("Error retrieving device token",i)}})}getDeviceTokenForRegistration(){return g(this,null,function*(){try{return yield Tr(this._messaging,{vapidKey:this._env.firebase.vapidKey})}catch(i){console.warn("Error retrieving device token",i)}return""})}};e.\u0275fac=function(s){return new(s||e)(H(Nn),H(ce))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Un=(()=>{let e=class e{constructor(i){this.api=i}getUserNotificationList(){return this.api.get("/notifications")}areAnyActiveNotifications(){return this.api.get("/notifications/are-any-active",{},!0)}markNotificationAsViewed(i){return this.api.post("/notifications/marked-as-viewed",i)}markedAsViewAllUserNotification(){return this.api.post("/notifications/mark-all",{})}clearUserAllNotification(){return this.api.post("/notifications/clear-all",{})}};e.\u0275fac=function(s){return new(s||e)(H(Nn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var og=["interactiveOption"],xl=t=>({active:t});function ag(t,e){if(t&1&&(on(0),x(1,"img",24),an()),t&2){let n=L(2).$implicit;P(),pi("alt",n.label),R("src",n.icon_color,fi)}}function cg(t,e){if(t&1&&x(0,"img",24),t&2){let n=L(2).$implicit;pi("alt",n.label),R("src",n.icon,fi)}}function ug(t,e){t&1&&x(0,"span",25)}function lg(t,e){if(t&1&&(b(0,"a",21,1),z(2,ag,2,2,"ng-container",22)(3,cg,1,2,"ng-template",null,2,xs),b(5,"span"),k(6),S(),z(7,ug,1,0,"span",23),S()),t&2){let n=mi(1),i=mi(4),s=L().$implicit,a=L();R("routerLinkActive",s.class)("routerLink",s.route)("ngClass",gi(7,xl,n.isActive&&!a.menuItemWithForceActiveExists||s.forceActive)),P(2),R("ngIf",n.isActive&&!a.menuItemWithForceActiveExists||s.forceActive)("ngIfElse",i),P(4),Fe(" ",s.label," "),P(),R("ngIf",s.isAlertActive)}}function hg(t,e){if(t&1&&(on(0),z(1,lg,8,9,"a",20),an()),t&2){let n=e.$implicit;P(),R("ngIf",n.visible)}}function dg(t,e){if(t&1&&(on(0),x(1,"img",24),an()),t&2){let n=L(2).$implicit;P(),pi("alt",n.label),R("src",n.icon_color,fi)}}function fg(t,e){if(t&1&&x(0,"img",24),t&2){let n=L(2).$implicit;pi("alt",n.label),R("src",n.icon,fi)}}function pg(t,e){if(t&1&&(b(0,"a",21,1),z(2,dg,2,2,"ng-container",22)(3,fg,1,2,"ng-template",null,2,xs),b(5,"span"),k(6),S()()),t&2){let n=mi(1),i=mi(4),s=L().$implicit,a=L();R("routerLinkActive",s.class)("routerLink",s.route)("ngClass",gi(6,xl,n.isActive&&!a.menuItemWithForceActiveExists||s.forceActive)),P(2),R("ngIf",n.isActive&&!a.menuItemWithForceActiveExists||s.forceActive)("ngIfElse",i),P(4),Fe(" ",s.label," ")}}function mg(t,e){if(t&1&&(on(0),z(1,pg,7,8,"a",20),an()),t&2){let n=e.$implicit;P(),R("ngIf",n.visible)}}var Ml=(()=>{let e=class e{constructor(i,s,a,u,h,I){this.router=i,this.menuTabsService=s,this.authService=a,this.cd=u,this.spaceManagementService=h,this.gameService=I,this.leftMenuItems=[],this.rightMenuItems=[],this.menuItemWithForceActiveExists=!1,this.destroy$=new Oc,this.activeLink=Ut.GAMES,this.updateMenuItems(),this.authService.getUser?.role!==lr.User&&this.refreshForAnyActiveReservations()}ngOnInit(){this.menuTabsService.activeTab$.pipe(Os(this.destroy$)).subscribe(i=>{this.setActiveTab(i),this.cd.detectChanges()}),this.router.events.pipe(Os(this.destroy$),tr(i=>i instanceof ur)).subscribe(i=>{this.activeLink=i.url.split("/")[1]}),this.authService.getUser?.role!==lr.User&&(this.subscriptionRefreshForAnyActiveReservations=setInterval(()=>this.refreshForAnyActiveReservations(),1e4))}ngAfterViewInit(){this.interactiveOption.nativeElement.addEventListener("click",i=>{i.stopPropagation(),this.interactiveOption.nativeElement.classList.toggle("active")}),document.documentElement.addEventListener("click",i=>{this.interactiveOption.nativeElement.contains(i.target)||this.interactiveOption.nativeElement.classList.remove("active")})}refreshForAnyActiveReservations(){Vc([this.gameService.getReservations_BackgroundRequest(),this.spaceManagementService.getActiveReservedTableList_BackgroundRequest()]).subscribe({next:([i,s])=>{let a=this.filterActiveReservations(i),u=this.filterActiveReservations(s),h=a.length>0||u.length>0;this.updateLeftMenuItems(h),this.cd.detectChanges()}})}updateLeftMenuItems(i){let a=location.pathname.split("/")[1]==="reservations";this.leftMenuItems=this.leftMenuItems.filter(u=>u.route!=="/reservations"),this.leftMenuItems.push({label:Ut.RESERVATIONS,class:a?"active":"",forceActive:a,isAlertActive:i,enabled:!0,visible:!0,icon:"/shared/assets/images/icons/menu_book-icon.svg",icon_color:"/shared/assets/images/icons/menu_book-icon-blue.svg",route:"/reservations"})}filterActiveReservations(i){return i?.filter(s=>s.isActive)||[]}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe(),this.subscriptionRefreshForAnyActiveReservations&&clearInterval(this.subscriptionRefreshForAnyActiveReservations)}navigateToSpaceManagement(){this.router.navigate(["/space/home"])}navigateToChallenges(){this.router.navigate(["/challenges/home"])}setActiveTab(i){let s=this.leftMenuItems.concat(this.rightMenuItems).find(a=>a.label.toString().toLowerCase()===i.toString().toLowerCase());s?(s.forceActive=!0,this.menuItemWithForceActiveExists=!0):(this.leftMenuItems.forEach(a=>a.forceActive=!1),this.rightMenuItems.forEach(a=>a.forceActive=!1),this.menuItemWithForceActiveExists=!1)}updateMenuItemsWithPage(i){this.leftMenuItems=[{label:Ut.GAMES,class:i==="/games/library"?"active":"",isAlertActive:!1,enabled:!0,visible:!0,icon:"/shared/assets/images/icons/kid_star-icon.svg",icon_color:"/shared/assets/images/icons/kid_star-icon-blue.svg",route:"/games/library"}],this.authService.getUser?.role!==lr.User?this.leftMenuItems.push({label:Ut.RESERVATIONS,class:i==="/reservations"?"active":"",isAlertActive:!0,enabled:!0,visible:!0,icon:"/shared/assets/images/icons/menu_book-icon.svg",icon_color:"/shared/assets/images/icons/menu_book-icon-blue.svg",route:"/reservations"}):this.leftMenuItems.push({label:Ut.MEEPLE,class:i==="/meeples/find"?"active":"",isAlertActive:!1,enabled:!0,visible:!0,icon:"/shared/assets/images/icons/group-icon.svg",icon_color:"/shared/assets/images/icons/group-icon-blue.svg",route:"/meeples/find"}),this.rightMenuItems=[{label:Ut.EVENTS,class:i==="/events/home"?"active":"",isAlertActive:!1,enabled:!0,visible:!0,icon:"/shared/assets/images/icons/stadium-icon.svg",icon_color:"/shared/assets/images/icons/stadium-icon-blue.svg",route:"/events/home"},{label:Ut.PROFILE,class:i==="/profile"?"active":"",isAlertActive:!1,enabled:!0,visible:!0,icon:"/shared/assets/images/icons/account_circle-icon.svg",icon_color:"/shared/assets/images/icons/account_circle-icon-blue.svg",route:"/profile"}]}navigateToQrCodeScanner(){this.router.navigateByUrl(Se.QR_CODE_SCANNER)}updateMenuItems(){let i=location.pathname.split("/")[1];this.updateMenuItemsWithPage(i)}};e.\u0275fac=function(s){return new(s||e)(N(ie),N(hu),N(ce),N(ar),N(du),N(fu))},e.\u0275cmp=Z({type:e,selectors:[["app-navigation-menu"]],viewQuery:function(s,a){if(s&1&&Gc(og,5),s&2){let u;rr(u=sr())&&(a.interactiveOption=u.first)}},decls:22,vars:2,consts:[["interactiveOption",""],["rla","routerLinkActive"],["defaultIcon",""],[1,"wrapper_nav"],[4,"ngFor","ngForTrackByIndex","ngForOf"],[1,"interactive-option"],[1,"wrapper"],[1,"svg_wrapper","icon__resize"],["viewBox","0 -960 960 960"],["d","M750.54-116.15 638.15-229.31l-88 88-11.07-11.07q-26.39-26.39-26.39-63.47 0-37.07 26.39-63.46l145.61-145.61q26.39-26.39 63.46-26.39 37.08 0 63.47 26.39l11.07 11.07-88 88 113.16 113.39q13.69 13.69 13.69 31.61 0 17.93-13.69 31.62l-33.08 33.08q-13.69 13.69-32.12 13.69-18.42 0-32.11-13.69ZM853-735.92 408.31-290.46l24.61 25.38q16.39 26.39 13.39 57.46-3 31.08-26.39 54.47l-11.07 11.07-88-88-113.39 114.16q-13.69 13.69-31.61 13.69-17.93 0-31.62-13.69L110.15-150q-13.69-13.69-13.69-31.62 0-17.92 13.69-31.61l114.16-113.39-88-88 11.07-11.07q23.39-23.39 54.97-26.39 31.57-3 57.96 14.39l26.15 25.38L731.92-857H853v121.08ZM333-601l14.23-15.77 14-14-14 14L333-601Zm-46.31 45.54L107-735.92V-857h121.08L407-677.31l-45.77 46.54L201-791h-28v28l160 162-46.31 45.54ZM363-337l424-426v-28h-28L334-366l29 29Zm0 0-13.23-15.77L334-366l15.77 13.23L363-337Z"],[1,"icons-container"],[1,"icon",2,"--index","0",3,"click"],["version","1.1","id","Layer_1","x","0px","y","0px","width","122.88px","height","119.853px","viewBox","0 0 512 512","enable-background","new 0 0 122.88 119.853",0,"xml","space","preserve",1,"icon-svg"],["d","M128 32c-12.442 0-21.39 6.583-26.559 14.852-4.622 7.394-6.544 15.974-6.92 23.486-14.104 6.974-29.73 14.006-42.31 21.195-6.6 3.771-12.353 7.562-16.684 11.639-4.33 4.075-7.527 8.665-7.527 14.08 0 2.304 1.125 4.183 2.393 5.56 1.269 1.378 2.79 2.449 4.521 3.448 3.463 1.998 7.83 3.663 12.633 5.103 7.135 2.141 15.124 3.734 22.072 4.414-6.91 11.908-16.106 22.845-24.168 33.325C36.135 181.213 28 192.827 28 205.73c0 1.844-.019 3.283.145 4.729.163 1.446.577 3.252 2.03 4.682 1.455 1.43 3.235 1.813 4.684 1.97 1.45.16 2.91.141 4.784.141h51.402c3.731 0 6.463.227 9.273-1.58 2.811-1.807 3.835-4.274 5.838-7.961l.041-.074.037-.076s4.48-9.11 9.827-18.15c2.672-4.52 5.575-9.022 8.1-12.212 1.262-1.594 2.443-2.86 3.294-3.574.26-.218.377-.257.545-.35.167.093.285.132.545.35.85.714 2.032 1.98 3.295 3.574 2.524 3.19 5.427 7.691 8.1 12.211 5.345 9.04 9.826 18.15 9.826 18.15l.037.077.04.072c2.004 3.687 3.019 6.14 5.811 7.951s5.519 1.59 9.198 1.59h51.627c1.843 0 3.28.021 4.72-.139s3.226-.557 4.664-1.996c1.438-1.438 1.835-3.225 1.994-4.664.16-1.439.143-2.877.143-4.72 0-12.904-8.135-24.52-17.451-36.631-8.061-10.48-17.257-21.416-24.168-33.325 6.948-.68 14.937-2.27 22.072-4.412 4.803-1.44 9.17-3.108 12.633-5.105 1.732-1 3.253-2.068 4.521-3.445 1.27-1.378 2.393-3.257 2.393-5.561 0-5.415-3.196-10.005-7.527-14.08-4.331-4.077-10.085-7.87-16.684-11.64-12.58-7.19-28.206-14.222-42.31-21.196-.376-7.512-2.299-16.09-6.92-23.484C149.39 38.582 140.442 32 128 32zm256 0c-12.442 0-21.39 6.583-26.559 14.852-4.622 7.394-6.544 15.974-6.92 23.486-14.104 6.974-29.73 14.006-42.31 21.195-6.6 3.771-12.353 7.562-16.684 11.639-4.33 4.075-7.527 8.665-7.527 14.08 0 2.304 1.125 4.183 2.393 5.56 1.269 1.378 2.79 2.449 4.521 3.448 3.463 1.998 7.83 3.663 12.633 5.103 7.135 2.141 15.124 3.734 22.072 4.414-6.91 11.908-16.106 22.845-24.168 33.325C292.135 181.213 284 192.827 284 205.73c0 1.844-.019 3.283.145 4.729.163 1.446.577 3.252 2.03 4.682 1.455 1.43 3.235 1.813 4.684 1.97 1.45.16 2.91.141 4.784.141h51.402c3.731 0 6.463.227 9.273-1.58 2.811-1.807 3.836-4.274 5.838-7.961l.041-.074.037-.076s4.48-9.11 9.827-18.15c2.672-4.52 5.575-9.022 8.1-12.212 1.262-1.594 2.443-2.86 3.294-3.574.26-.218.377-.257.545-.35.167.093.285.132.545.35.85.714 2.032 1.98 3.295 3.574 2.524 3.19 5.427 7.691 8.1 12.211 5.345 9.04 9.826 18.15 9.826 18.15l.037.077.04.072c2.003 3.687 3.019 6.14 5.811 7.951s5.519 1.59 9.198 1.59h51.627c1.843 0 3.28.021 4.72-.139s3.226-.557 4.664-1.996c1.438-1.438 1.835-3.225 1.994-4.664.16-1.439.143-2.877.143-4.72 0-12.904-8.135-24.52-17.451-36.631-8.061-10.48-17.257-21.416-24.168-33.325 6.948-.68 14.937-2.27 22.072-4.412 4.803-1.44 9.17-3.108 12.633-5.105 1.732-1 3.253-2.068 4.521-3.445 1.27-1.378 2.393-3.257 2.393-5.561 0-5.415-3.197-10.005-7.527-14.08-4.331-4.077-10.085-7.87-16.684-11.64-12.58-7.19-28.206-14.222-42.31-21.196-.376-7.512-2.299-16.09-6.92-23.484C405.39 38.582 396.442 32 384 32zM128 294c-12.442 0-21.39 6.583-26.559 14.852-4.622 7.394-6.544 15.974-6.92 23.486-14.104 6.974-29.73 14.006-42.31 21.195-6.6 3.771-12.353 7.562-16.684 11.639-4.33 4.075-7.527 8.665-7.527 14.08 0 2.304 1.125 4.183 2.393 5.56 1.269 1.378 2.79 2.449 4.521 3.448 3.463 1.998 7.83 3.663 12.633 5.103 7.135 2.141 15.124 3.734 22.072 4.414-6.91 11.908-16.106 22.845-24.168 33.325C36.135 443.213 28 454.827 28 467.73c0 1.844-.019 3.283.145 4.729.163 1.446.577 3.25 2.03 4.68 1.455 1.43 3.235 1.815 4.684 1.972 1.45.16 2.91.141 4.784.141h51.402c3.731 0 6.463.227 9.273-1.58 2.811-1.807 3.835-4.274 5.838-7.961l.041-.074.037-.076s4.48-9.11 9.827-18.15c2.672-4.52 5.575-9.022 8.1-12.212 1.262-1.594 2.443-2.86 3.294-3.574.26-.218.377-.257.545-.35.167.093.285.132.545.35.85.714 2.032 1.98 3.295 3.574 2.524 3.19 5.427 7.691 8.1 12.211 5.345 9.04 9.826 18.15 9.826 18.15l.037.077.04.072c2.004 3.687 3.019 6.14 5.811 7.951s5.519 1.59 9.198 1.59h51.627c1.843 0 3.28.021 4.72-.139s3.226-.559 4.664-1.998c1.438-1.438 1.835-3.223 1.994-4.662.16-1.439.143-2.877.143-4.72 0-12.904-8.135-24.52-17.451-36.631-8.061-10.48-17.257-21.416-24.168-33.325 6.948-.68 14.937-2.27 22.072-4.412 4.803-1.44 9.17-3.108 12.633-5.105 1.732-1 3.253-2.068 4.521-3.445 1.27-1.378 2.393-3.257 2.393-5.561 0-5.415-3.196-10.005-7.527-14.08-4.331-4.077-10.085-7.87-16.684-11.64-12.58-7.19-28.206-14.222-42.31-21.196-.376-7.512-2.299-16.09-6.92-23.484C149.39 300.582 140.442 294 128 294zm256 0c-12.442 0-21.39 6.583-26.559 14.852-4.622 7.394-6.544 15.974-6.92 23.486-14.104 6.974-29.73 14.004-42.31 21.193-6.6 3.771-12.353 7.564-16.684 11.64-4.33 4.076-7.527 8.666-7.527 14.081 0 2.304 1.125 4.183 2.393 5.56 1.269 1.378 2.79 2.449 4.521 3.448 3.463 1.998 7.83 3.663 12.633 5.103 7.135 2.141 15.124 3.734 22.072 4.414-6.91 11.908-16.106 22.845-24.168 33.325C292.135 443.213 284 454.827 284 467.73c0 1.844-.019 3.283.145 4.729.163 1.446.577 3.25 2.03 4.68 1.455 1.43 3.235 1.815 4.684 1.972 1.45.16 2.91.141 4.784.141h51.402c3.731 0 6.463.227 9.273-1.58 2.811-1.807 3.836-4.274 5.838-7.961l.041-.074.037-.076s4.48-9.11 9.827-18.15c2.672-4.52 5.575-9.022 8.1-12.212 1.262-1.594 2.443-2.86 3.294-3.574.26-.218.377-.257.545-.35.167.093.285.132.545.35.85.714 2.032 1.98 3.295 3.574 2.524 3.19 5.427 7.691 8.1 12.211 5.345 9.04 9.826 18.15 9.826 18.15l.037.077.04.072c2.003 3.687 3.019 6.14 5.811 7.951s5.519 1.59 9.198 1.59h51.627c1.843 0 3.28.021 4.72-.139s3.226-.559 4.664-1.998c1.438-1.438 1.835-3.223 1.994-4.662.16-1.439.143-2.877.143-4.72 0-12.904-8.135-24.52-17.451-36.631-8.061-10.48-17.257-21.416-24.168-33.325 6.948-.68 14.937-2.273 22.072-4.414 4.803-1.44 9.17-3.106 12.633-5.103 1.732-1 3.253-2.068 4.521-3.445 1.27-1.378 2.393-3.257 2.393-5.561 0-5.415-3.197-10.005-7.527-14.08-4.331-4.077-10.085-7.87-16.684-11.64-12.58-7.19-28.206-14.222-42.31-21.196-.376-7.512-2.299-16.09-6.92-23.484C405.39 300.582 396.442 294 384 294z"],[1,"icon",2,"--index","1",3,"click"],["version","1.1","id","Layer_1","x","0px","y","0px","viewBox","0 0 121.17 122.88",0,"xml","space","preserve",1,"icon-svg",2,"enable-background","new 0 0 121.17 122.88"],["d","M7.23,0h106.7c1.98,0,3.78,0.81,5.1,2.12l0.02,0.02c1.31,1.31,2.12,3.12,2.12,5.09v108.41c0,1.98-0.81,3.78-2.12,5.1 l-0.02,0.02c-1.32,1.31-3.12,2.11-5.09,2.11H7.23c-1.98,0-3.78-0.81-5.1-2.12l-0.02-0.02C0.81,119.42,0,117.62,0,115.64V7.24 c0-1.98,0.81-3.78,2.12-5.1l0.02-0.02C3.46,0.81,5.26,0,7.23,0L7.23,0z M113.53,7.64H87.65v26.69l-27.09,0V7.64H33.47v26.68h27.04 v27.09H33.47h0V88.5H7.64v26.74h25.88V88.5h27.04l0,0V61.41h27.09V88.5H60.61v26.74H87.7V88.5h25.83V61.41H87.7l0,0V34.33h25.83 V7.64L113.53,7.64z M7.64,34.33v27.09h25.79V34.33L7.64,34.33L7.64,34.33z"],[1,"icon",2,"--index","2",3,"click"],["fill","#000000","width","256px","height","256px","viewBox","0 0 24.00 24.00","stroke","#000000","stroke-width","0.00024000000000000003",1,"icon-svg"],["d","M4,4h6v6H4V4M20,4v6H14V4h6M14,15h2V13H14V11h2v2h2V11h2v2H18v2h2v3H18v2H16V18H13v2H11V16h3V15m2,0v3h2V15H16M4,20V14h6v6H4M6,6V8H8V6H6M16,6V8h2V6H16M6,16v2H8V16H6M4,11H6v2H4V11m5,0h4v4H11V13H9V11m2-5h2v4H11V6M2,2V6H0V2A2,2,0,0,1,2,0H6V2H2M22,0a2,2,0,0,1,2,2V6H22V2H18V0h4M2,18v4H6v2H2a2,2,0,0,1-2-2V18H2m20,4V18h2v4a2,2,0,0,1-2,2H18V22Z"],["id","side-nav","class","option",3,"routerLinkActive","routerLink","ngClass",4,"ngIf"],["id","side-nav",1,"option",3,"routerLinkActive","routerLink","ngClass"],[4,"ngIf","ngIfElse"],["class","icon-button__badge",4,"ngIf"],[1,"menu-icon",3,"src","alt"],[1,"icon-button__badge"]],template:function(s,a){if(s&1){let u=we();b(0,"nav")(1,"div",3),z(2,hg,2,1,"ng-container",4),b(3,"a",5,0)(5,"span",6)(6,"div",7),te(),b(7,"svg",8),x(8,"path",9),S()(),ve(),b(9,"div",10)(10,"div",11),V("click",function(){return se(u),oe(a.navigateToSpaceManagement())}),te(),b(11,"svg",12)(12,"g"),x(13,"path",13),S()()(),ve(),b(14,"div",14),V("click",function(){return se(u),oe(a.navigateToChallenges())}),te(),b(15,"svg",15)(16,"g"),x(17,"path",16),S()()(),ve(),b(18,"div",17),V("click",function(){return se(u),oe(a.navigateToQrCodeScanner())}),te(),b(19,"svg",18),x(20,"path",19),S()()()()(),z(21,mg,2,1,"ng-container",4),S()()}s&2&&(P(2),R("ngForOf",a.leftMenuItems),P(19),R("ngForOf",a.rightMenuItems))},dependencies:[Je,cr,ae,au,cu],styles:["nav[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:4rem;background-color:#31313b;z-index:1000}.menu-icon[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:#fff}.wrapper_nav[_ngcontent-%COMP%]{display:flex;justify-content:center}.wrapper_nav[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;align-items:center;width:20%;position:relative;top:.5rem}.wrapper_nav[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{color:#75a0ff;transition:color .5s ease}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]{--size: 75px;position:relative;display:flex;bottom:1.5rem;align-items:center;justify-content:center;width:3.5rem;height:3.5rem;border-radius:50%}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:var(--icon-size);width:var(--icon-size);cursor:pointer}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:var(--icon-size);width:var(--icon-size);fill:#fff}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);transition:height .2s ease,margin .2s ease;overflow:hidden}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .svg_wrapper[_ngcontent-%COMP%]{display:inline-block;width:3.5rem;height:4.5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);transition:height .2s ease,margin .2s ease;overflow:hidden}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .svg_wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;fill:#fff}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{--icon-size: 24px;cursor:pointer;transition:transform .32s ease,opacity .2s ease}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icon__resize[_ngcontent-%COMP%]{position:relative;top:1rem;text-align:center}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]{width:100%;height:calc(2 * var(--size));position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{background:#ccdcff40;width:calc(1.8 * var(--icon-size));height:calc(1.8 * var(--icon-size));border-radius:50%;display:flex;justify-content:center;align-items:center;position:absolute;padding-left:.9px;left:50%;top:calc(-25% + var(--index) * 40%);transform:translate(-50%,100%) rotate(-45deg);transition:transform .3s cubic-bezier(.65,-.55,.25,1.25);transition-delay:calc(var(--index) * 55ms)}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{background:#ccdcff73}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option.active[_ngcontent-%COMP%]{border:none;outline:none;color:#75a0ff}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option.active[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{height:calc(2.6 * var(--size));margin-top:calc(-1.6 * var(--size))}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option.active[_ngcontent-%COMP%]   .icon__resize[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#75a0ff}.wrapper_nav[_ngcontent-%COMP%]   .interactive-option.active[_ngcontent-%COMP%]   .icons-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{transform:translate(-50%,-50%) rotate(0)}.active[_ngcontent-%COMP%]{border:none;outline:none;color:#75a0ff}.icon-button__badge[_ngcontent-%COMP%]{position:absolute;background:#bf3c65;border-radius:50%;width:.5rem;height:.5rem;right:1.3rem;animation:_ngcontent-%COMP%_breathing 2s infinite}@keyframes _ngcontent-%COMP%_breathing{0%,to{transform:scale(1);opacity:1;box-shadow:0 0 .2rem #ff4d4f}50%{transform:scale(1.4);opacity:.9;box-shadow:0 0 .5rem #ff4d4f}}"],changeDetection:0});let t=e;return t})();var yg=t=>({disable:t});function vg(t,e){t&1&&(b(0,"div",8)(1,"p"),k(2,'\u{1F389} "You\u2019re all caught up, Champion! \u{1F389}'),S(),k(3,' No new notifications for now \u2014 stay sharp, the next challenge could be just around the corner!" \u{1F3C6}\u2728 '),S())}function wg(t,e){if(t&1){let n=we();b(0,"div",13),V("click",function(){let s=se(n).$implicit,a=L(2);return oe(a.markedAsViewed(s.id,s.hasBeenViewed))}),b(1,"p",14),k(2),S(),b(3,"span",15),k(4),Ye(5,"date"),S(),b(6,"span",16),k(7),Ye(8,"parseDateTag"),S()()}if(t&2){let n=e.$implicit,i=L(2);R("ngClass",n.hasBeenViewed?"item-viewed":""),P(2),ke(n.messageTitle),P(2),ke(Hc(5,4,n.createdDate,i.DATE_TIME_FORMAT)),P(3),ke(ct(8,7,n.messageBody))}}function Ig(t,e){if(t&1){let n=we();on(0),b(1,"div",9)(2,"a",10),V("click",function(){se(n);let s=L();return oe(s.markAll())}),k(3,"Read All"),S(),b(4,"a",11),V("click",function(){se(n);let s=L();return oe(s.clearAll())}),k(5,"Clear"),S()(),z(6,wg,9,9,"div",12),an()}if(t&2){let n=L();P(2),R("ngClass",gi(2,yg,n.isAllMarkedAsViewed)),P(4),R("ngForOf",n.userNotifications)}}var Vl=(()=>{let e=class e{constructor(i,s,a){this.data=i,this.dialogRef=s,this.notificationService=a,this.notificationsUpdated=new ir,this.userNotifications=[],this.DATE_TIME_FORMAT=uu.DATE_TIME_FORMAT}ngOnInit(){this.notificationService.getUserNotificationList().subscribe({next:i=>{this.userNotifications=i,console.log(this.userNotifications)}})}get isAllMarkedAsViewed(){return this.userNotifications.every(i=>i.hasBeenViewed)}markedAsViewed(i,s){s||this.notificationService.markNotificationAsViewed(i).subscribe({next:()=>{this.notificationService.getUserNotificationList().subscribe({next:a=>{this.userNotifications=a,this.notificationsUpdated.emit()}})}})}clearAll(){this.notificationService.clearUserAllNotification().subscribe({next:()=>{this.notificationService.getUserNotificationList().subscribe({next:i=>{this.userNotifications=i,this.notificationsUpdated.emit()}})}})}markAll(){this.notificationService.markedAsViewAllUserNotification().subscribe({next:()=>{this.notificationService.getUserNotificationList().subscribe({next:i=>{this.userNotifications=i,this.notificationsUpdated.emit()}})}})}closeDialog(){document.getElementsByClassName("animate__animated")[0].classList.remove("animate__slideInLeft"),document.getElementsByClassName("animate__animated")[0].classList.add("animate__slideOutRight"),setTimeout(()=>{this.dialogRef.close()},1e3)}};e.\u0275fac=function(s){return new(s||e)(N(mu),N(pu),N(Un))},e.\u0275cmp=Z({type:e,selectors:[["app-notifications-dialog"]],decls:9,vars:3,consts:[[1,"dialog-container"],[1,"header"],[1,"dialog-container__header"],["mat-dialog-close","","viewBox","0 -960 960 960",1,"dialog-container__close"],["d","m334-287.69 146-146 146 146L672.31-334l-146-146 146-146L626-672.31l-146 146-146-146L287.69-626l146 146-146 146L334-287.69ZM480.13-88q-81.31 0-152.89-30.86-71.57-30.86-124.52-83.76-52.95-52.9-83.83-124.42Q88-398.55 88-479.87q0-81.56 30.92-153.37 30.92-71.8 83.92-124.91 53-53.12 124.42-83.48Q398.67-872 479.87-872q81.55 0 153.35 30.34 71.79 30.34 124.92 83.42 53.13 53.08 83.49 124.84Q872-561.64 872-480.05q0 81.59-30.34 152.83-30.34 71.23-83.41 124.28-53.07 53.05-124.81 84Q561.7-88 480.13-88Zm-.13-66q136.51 0 231.26-94.74Q806-343.49 806-480t-94.74-231.26Q616.51-806 480-806t-231.26 94.74Q154-616.51 154-480t94.74 231.26Q343.49-154 480-154Zm0-326Z"],[1,"items"],["class","no-items",4,"ngIf"],[4,"ngIf"],[1,"no-items"],[1,"links"],[1,"link",3,"click","ngClass"],[1,"link",3,"click"],["class","item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"item",3,"click","ngClass"],[1,"type"],[1,"date"],[1,"text"]],template:function(s,a){s&1&&(b(0,"div",0)(1,"div",1)(2,"span",2),k(3,"Notifications"),S(),te(),b(4,"svg",3),x(5,"path",4),S()(),ve(),b(6,"div",5),z(7,vg,4,0,"div",6)(8,Ig,7,4,"ng-container",7),S()()),s&2&&(R("@dialogAnimation",void 0),P(7),R("ngIf",a.userNotifications.length===0),P(),R("ngIf",a.userNotifications.length!==0))},dependencies:[Je,cr,ae,_u,eu,lu],styles:[".dialog-container[_ngcontent-%COMP%]{color:#fff;background-color:#31313b}.dialog-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:1rem;padding-bottom:.2rem;border-bottom:.2rem solid #98989d;display:flex;justify-content:space-between;align-items:center;position:sticky}.dialog-container__header[_ngcontent-%COMP%]{font-size:1.5rem}.dialog-container__close[_ngcontent-%COMP%]{width:2rem;fill:#fff}.dialog-container[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:end}.dialog-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:.4rem}.dialog-container[_ngcontent-%COMP%]   .no-items[_ngcontent-%COMP%]{margin:1rem;display:flex;justify-content:center;flex-direction:column;text-align:center}.dialog-container[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{overflow:auto;height:25rem}.dialog-container[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.dialog-container[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{border-bottom:.2rem solid #75a0ff;text-decoration:none}.dialog-container[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .disable[_ngcontent-%COMP%]{pointer-events:none;cursor:default;opacity:.5}.dialog-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:1rem;display:flex;flex-direction:column;background-color:#505061;padding:1rem;border-radius:1rem}.dialog-container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{word-wrap:break-word}.dialog-container[_ngcontent-%COMP%]   .item-viewed[_ngcontent-%COMP%]{opacity:.5}"],data:{animation:[Ms("dialogAnimation",[yi(":enter",[un({transform:"scaleY(0.005) scaleX(0)"}),_i("1s cubic-bezier(0.165, 0.84, 0.44, 1)",un({transform:"scaleY(1) scaleX(1)"}))]),yi(":leave",[_i("1s cubic-bezier(0.165, 0.84, 0.44, 1)",un({transform:"scaleY(0.005) scaleX(0)"}))])]),Ms("modalAnimation",[yi(":enter",[un({transform:"scale(0)"}),_i("0.5s 0.8s cubic-bezier(0.165, 0.84, 0.44, 1)",un({transform:"scale(1)"}))]),yi(":leave",[_i("0.5s cubic-bezier(0.165, 0.84, 0.44, 1)",un({transform:"scale(0)"}))])])]}});let t=e;return t})();var Eg=(t,e,n)=>({top:t,left:e,opacity:n});function Tg(t,e){if(t&1&&x(0,"span",5),t&2){let n=L();R("ngClass",n.isLeftAligned?"icon-button__badge-right":"icon-button__badge-left")}}var Ll=(()=>{let e=class e{constructor(i,s,a){this.dialog=i,this.tenantUserSettingsService=s,this.notificationService=a,this.buttonOpacity=1,this.updateUserNotifications=new ir,this.assistiveTouchSettings=null,this.positionY=this.assistiveTouchSettings?Number(this.assistiveTouchSettings.positionY):135,this.positionX=0,this.isLeftAligned=this.assistiveTouchSettings?this.assistiveTouchSettings.isLeftAligned:!0,this.isDragging=!1,this.dragOffsetX=0,this.dragOffsetY=0,this.dialogOpened=!1,this.dragThreshold=1,this.initialX=0,this.initialY=0,this.canOpenPanel=!1,this.resetInactivityTimer()}ngOnInit(){this.refreshForAnyActiveNotifications(),this.subscriptionRefreshForAnyActiveNotifications=setInterval(()=>this.refreshForAnyActiveNotifications(),1e4)}refreshForAnyActiveNotifications(){this.notificationService.areAnyActiveNotifications().subscribe({next:i=>{this.areAnyActiveNotifications.next(i)}})}ngOnDestroy(){this.inactivityTimer?.unsubscribe(),this.subscriptionRefreshForAnyActiveNotifications&&clearInterval(this.subscriptionRefreshForAnyActiveNotifications)}openNotifications(){if(this.dialogOpened)return;this.resetInactivityTimer(),this.dialogOpened=!0;let i=this.dialog.open(Vl);i.componentInstance.notificationsUpdated.subscribe(()=>{this.updateUserNotifications.emit()}),i.afterClosed().subscribe(()=>{this.dialogOpened=!1,this.resetInactivityTimer()})}startDragging(i){this.canOpenPanel=!1,this.isDragging=!0,i instanceof MouseEvent?(this.initialX=i.clientX,this.initialY=i.clientY,this.dragOffsetX=i.clientX-this.positionX,this.dragOffsetY=i.clientY-this.positionY):i instanceof TouchEvent&&(this.initialX=i.touches[0].clientX,this.initialY=i.touches[0].clientY,this.dragOffsetX=i.touches[0].clientX-this.positionX,this.dragOffsetY=i.touches[0].clientY-this.positionY)}stopDragging(i){if(!this.isDragging)return;this.isDragging=!1,Math.sqrt(Math.pow(i.clientX-this.initialX,2)+Math.pow(i.clientY-this.initialY,2))>this.dragThreshold?(this.snapToEdge(),Ns(400).subscribe(()=>{this.canOpenPanel=!0})):(this.canOpenPanel=!0,this.openNotifications()),this.resetInactivityTimer()}updatePosition(i,s){let h=window.innerWidth,T=window.innerHeight-38.4-76.8,A=76.8;this.positionX=i-this.dragOffsetX,this.positionY=s-this.dragOffsetY,this.positionX=Math.max(0,Math.min(this.positionX,h-38.4)),this.positionY=Math.max(A,Math.min(this.positionY,T)),console.log(this.positionX,this.positionY)}resetInactivityTimer(){this.inactivityTimer?.unsubscribe(),this.buttonOpacity=1,this.inactivityTimer=Ns(3e3).subscribe(()=>{this.buttonOpacity=.5})}snapToEdge(){let i=window.innerWidth,s=i/2;this.positionX<s?(this.positionX=0,this.isLeftAligned=!0,this.tenantUserSettingsService.updateAssistiveTouchSettings({positionY:this.positionY.toString(),isLeftAligned:!0})):(this.positionX=i-38.4,this.isLeftAligned=!1,this.tenantUserSettingsService.updateAssistiveTouchSettings({positionY:this.positionY.toString(),isLeftAligned:!1}))}initiatePosition(){let i=window.innerWidth,u=window.innerHeight-38.4-76.8,h=76.8;this.assistiveTouchSettings&&(this.isLeftAligned=this.assistiveTouchSettings.isLeftAligned),this.positionY=Math.max(h,Math.min(Number(this.assistiveTouchSettings?.positionY),u)),this.assistiveTouchSettings?.isLeftAligned?this.positionX=0:this.positionX=i-38.4}};e.\u0275fac=function(s){return new(s||e)(N(gu),N(yu),N(Un))},e.\u0275cmp=Z({type:e,selectors:[["app-assistive-touch"]],inputs:{areAnyActiveNotifications:"areAnyActiveNotifications"},outputs:{updateUserNotifications:"updateUserNotifications"},decls:6,vars:8,consts:[["assistive_btn",""],[1,"assistive_btn",3,"click","ngStyle"],["height","32px","viewBox","0 -960 960 960","width","32px","fill","#e8eaed",1,"icon"],["d","M228-216q-5.45 0-8.98-3.54-3.52-3.53-3.52-9 0-5.46 3.52-9.21 3.53-3.75 8.98-3.75h45V-565q0-76.5 49.61-134.5T447-771v-19.06q0-14.11 9.38-23.52 9.38-9.42 23.5-9.42t23.62 9.42q9.5 9.41 9.5 23.52V-771q75 13.5 124.75 71.5T687.5-565v323.5h44.75q4.98 0 8.87 3.79 3.88 3.78 3.88 9.25 0 5.46-3.78 8.96-3.77 3.5-9.22 3.5H228Zm251.82 98q-24.32 0-41.57-17.38Q421-152.75 421-177h118q0 24.5-17.43 41.75Q504.15-118 479.82-118Z"],["class","icon-button__badge",3,"ngClass",4,"ngIf"],[1,"icon-button__badge",3,"ngClass"]],template:function(s,a){if(s&1){let u=we();b(0,"div",1,0),V("click",function(){return se(u),oe(a.openNotifications())}),te(),b(2,"svg",2),x(3,"path",3),S(),z(4,Tg,1,1,"span",4),Ye(5,"async"),S()}s&2&&(R("ngStyle",Kc(4,Eg,a.positionY+"px",a.positionX+"px",a.buttonOpacity)),P(4),R("ngIf",ct(5,2,a.areAnyActiveNotifications)))},dependencies:[Je,ae,Zc,Rn],styles:['.assistive_btn[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out;position:fixed;padding:1.2rem;background:#75a0ff;border-radius:.5rem;z-index:1000;cursor:pointer}.assistive_btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;font-size:2rem;bottom:.2rem;right:.2rem;font-variation-settings:"FILL" 1}.assistive_btn[_ngcontent-%COMP%]   .icon-button__badge[_ngcontent-%COMP%]{position:absolute;background:#bf3c65;border-radius:50%;width:1rem;height:1rem}.assistive_btn[_ngcontent-%COMP%]   .icon-button__badge-right[_ngcontent-%COMP%]{bottom:1.7rem;left:1.8rem}.assistive_btn[_ngcontent-%COMP%]   .icon-button__badge-left[_ngcontent-%COMP%]{bottom:1.7rem;right:1.8rem}.assistive_btn.open[_ngcontent-%COMP%]{opacity:1}.assistive_btn.open[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.assistive_btn.open[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.assistive_btn.open[_ngcontent-%COMP%]   .assistive_option[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.assistive_btn.open[_ngcontent-%COMP%]   .assistive_option[_ngcontent-%COMP%]:first-of-type{left:80px}.assistive_btn.open[_ngcontent-%COMP%]   .assistive_option[_ngcontent-%COMP%]:nth-of-type(2){top:80px;left:20px;transition-delay:.05s}.assistive_btn.open[_ngcontent-%COMP%]   .assistive_option[_ngcontent-%COMP%]:last-of-type{bottom:80px;left:20px;transition-delay:.1s}.assistive_option[_ngcontent-%COMP%]{padding:1.3rem;border-radius:10px;cursor:pointer;background:#75a0ff;position:absolute;bottom:0;right:0;opacity:0;pointer-events:none;box-shadow:inherit;transition:.2s cubic-bezier(.18,.89,.32,1.28),.2s ease opacity,.2s cubic-bezier(.08,.82,.17,1) transform;z-index:-1}.assistive_option[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.assistive_option[_ngcontent-%COMP%]:first-of-type{background:url(https://assets.codepen.io/3537853/cam.svg) no-repeat 50%/50% #75a0ff}.assistive_option[_ngcontent-%COMP%]:nth-of-type(2){background:url(https://assets.codepen.io/3537853/img.svg) no-repeat 50%/50% #75a0ff}.assistive_option[_ngcontent-%COMP%]:last-of-type{background:url(https://assets.codepen.io/3537853/music.svg) no-repeat 50% 45%/50% 45% #75a0ff}']});let t=e;return t})();var Cr=(()=>{let e=class e{constructor(){this.loadingSubject=new er(!1),this.loading$=this.loadingSubject.asObservable()}loadingOn(){this.loadingSubject.next(!0)}loadingOff(){this.loadingSubject.next(!1)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ag=["loading"];function Sg(t,e){t&1&&(b(0,"div",0)(1,"div",1),x(2,"div",2),S()())}var Ul=(()=>{let e=class e{constructor(i){this.loadingService=i,this.detectRouteTransitions=!1,this.customLoadingIndicator=null,this.loading$=this.loadingService.loading$}};e.\u0275fac=function(s){return new(s||e)(N(Cr))},e.\u0275cmp=Z({type:e,selectors:[["loading-indicator"]],contentQueries:function(s,a,u){if(s&1&&zc(u,Ag,5),s&2){let h;rr(h=sr())&&(a.customLoadingIndicator=h.first)}},inputs:{detectRouteTransitions:"detectRouteTransitions"},standalone:!0,features:[Wc],decls:2,vars:3,consts:[[1,"loading-overlay"],[1,"dice-container"],[1,"dice"]],template:function(s,a){s&1&&(z(0,Sg,3,0,"div",0),Ye(1,"async")),s&2&&$c(0,ct(1,1,a.loading$)?0:-1)},dependencies:[Rn],styles:['.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.dice[_ngcontent-%COMP%]{width:10rem;height:10rem;background-image:url("./media/dice-SYRNZPPW.png");background-size:cover;animation:_ngcontent-%COMP%_spinLeft 1s infinite linear}.dice-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_moveLeftCenterRightCenter 4s linear infinite}@keyframes _ngcontent-%COMP%_spinLeft{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_moveLeftCenterRightCenter{0%{transform:translate(-50%)}15%{transform:translate(-25%)}30%{transform:translate(0)}45%{transform:translate(25%)}60%{transform:translate(50%)}75%{transform:translate(0)}90%{transform:translate(-25%)}to{transform:translate(-50%)}}'],changeDetection:0});let t=e;return t})();var Pg=(t,e)=>({show:t,hide:e}),ql=(()=>{let e=class e{constructor(){this.lastScrollPosition=0,this.scrollAmount=0,this.showArrow=!1}onScroll(i){let s=window.scrollY,a=400;s>this.lastScrollPosition?this.scrollAmount+=s-this.lastScrollPosition:this.scrollAmount-=this.lastScrollPosition-s,this.scrollAmount>a?this.showArrow=!0:this.showArrow=!1,this.lastScrollPosition=s}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"}),this.showArrow=!1}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=Z({type:e,selectors:[["app-scroll-to-top"]],hostBindings:function(s,a){s&1&&V("scroll",function(h){return a.onScroll(h)},!1,jc)},decls:5,vars:4,consts:[["viewBox","0 0 24 24",1,"scroll-to-top",3,"click","ngClass"],["fill","none","height","24","width","24"],["d","M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20 M11,12l0,4h2l0-4h3l-4-4l-4,4H11z","opacity",".3"],["d","M12,20c-4.41,0-8-3.59-8-8s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20 M12,22c5.52,0,10-4.48,10-10c0-5.52-4.48-10-10-10 C6.48,2,2,6.48,2,12C2,17.52,6.48,22,12,22L12,22z M11,12l0,4h2l0-4h3l-4-4l-4,4H11z"]],template:function(s,a){s&1&&(te(),b(0,"svg",0),V("click",function(){return a.scrollToTop()}),b(1,"g"),x(2,"rect",1)(3,"path",2)(4,"path",3),S()()),s&2&&R("ngClass",or(1,Pg,a.showArrow,!a.showArrow))},dependencies:[Je],styles:[".scroll-to-top[_ngcontent-%COMP%]{z-index:10000;position:fixed;bottom:5.5rem;right:1.25rem;width:3.5rem;opacity:0;transform:translate(0);transition:opacity .3s ease,transform .3s ease;filter:invert(52%) sepia(100%) saturate(681%) hue-rotate(196deg) brightness(102%) contrast(101%)}.scroll-to-top.show[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.scroll-to-top.hide[_ngcontent-%COMP%]{opacity:0;transform:translate(100%)}"]});let t=e;return t})();function kg(t,e){if(t&1){let n=we();b(0,"app-assistive-touch",2),V("updateUserNotifications",function(){se(n);let s=L();return oe(s.onUpdateUserNotifications())}),S()}if(t&2){let n=L();R("areAnyActiveNotifications",n.areAnyActiveNotificationSubject)}}function Ng(t,e){t&1&&x(0,"app-navigation-menu")}var Bl=(()=>{let e=class e{constructor(i,s,a,u,h,I,T){this.authService=i,this._messaging=s,this.messagingService=a,this.notificationService=u,this.cd=h,this.router=I,this.activatedRoute=T,this.title="DH.WebUI",this._env=xn,this.userInfo=this.authService.userInfo$,this.areAnyActiveNotificationSubject=new er(!1),this.hideMenu=!1,this.router.events.pipe(tr(A=>A instanceof ur),sn(()=>{let A=this.activatedRoute;for(;A.firstChild;)A=A.firstChild;return A}),sn(A=>A.snapshot.data.hideMenu)).subscribe(A=>{this.hideMenu=A})}ngOnInit(){this._initializeFCM()}_initializeFCM(){console.log("Initializing Firebase Cloud Messaging..."),this._requestNotificationPermission(),this.messagingService.getDeviceToken(),this._listenForMessages()}onUpdateUserNotifications(){this.notificationService.areAnyActiveNotifications().subscribe({next:i=>{this.areAnyActiveNotificationSubject.next(i)}})}_listenForMessages(){Io(this._messaging,{next:()=>{this.notificationService.areAnyActiveNotifications().subscribe({next:i=>{this.areAnyActiveNotificationSubject.next(i),this.cd.detectChanges()}})},error:i=>{},complete:()=>{console.log("Done listening for messages.")}})}_requestNotificationPermission(){return g(this,null,function*(){try{let i=yield Notification.requestPermission();i==="granted"?console.log("Notification permission granted."):console.warn("Notification permission denied:",i)}catch(i){this._logError("Notification permission request error",i)}})}_logError(i,s){console.error(i,s)}};e.\u0275fac=function(s){return new(s||e)(N(ce),N(_t),N(Fn),N(Un),N(ar),N(ie),N(Ft))},e.\u0275cmp=Z({type:e,selectors:[["app-root"]],decls:7,vars:6,consts:[[3,"areAnyActiveNotifications","updateUserNotifications",4,"ngIf"],[4,"ngIf"],[3,"updateUserNotifications","areAnyActiveNotifications"]],template:function(s,a){s&1&&(x(0,"router-outlet")(1,"loading-indicator"),z(2,kg,1,1,"app-assistive-touch",0),Ye(3,"async"),x(4,"app-scroll-to-top"),z(5,Ng,1,0,"app-navigation-menu",1),Ye(6,"async")),s&2&&(P(2),R("ngIf",ct(3,2,a.userInfo)),P(3),R("ngIf",ct(6,4,a.userInfo)&&!a.hideMenu))},dependencies:[ou,ae,Ml,Ll,Ul,ql,Rn]});let t=e;return t})();var jl=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[De,vi]});let t=e;return t})();function Dg(t,e){if(t&1){let n=we();b(0,"span"),k(1," Or "),b(2,"a",27),V("click",function(){se(n);let s=L(2);return oe(s.resendConfirmationEmail())}),k(3,"click here to resend"),S()()}}function Og(t,e){if(t&1&&(b(0,"div",25),k(1),z(2,Dg,4,0,"span",26),S()),t&2){let n=L();P(),Fe(" ",n.getFirstErrorMessage()," "),P(),R("ngIf",n.showResend)}}function xg(t,e){if(t&1&&(b(0,"div",28),k(1),S()),t&2){let n=L();P(),Fe(" ",n.getMessageFromRedirect," ")}}var zl=(()=>{let e=class e extends qt{constructor(i,s,a,u,h,I,T){super(i),this.toastService=i,this.router=s,this.authService=a,this.messagingService=u,this.fb=h,this.route=I,this.tenantSettingsService=T,this.showPassword=!1,this.getMessageFromRedirect=null,this.showResend=!1,this.clubName=null,this.route.queryParams.subscribe(A=>{A.fromRegister==="true"&&(this.getMessageFromRedirect="Registration successful! Please check your email to confirm your account."),A.fromForgotPassword==="true"&&(this.getMessageFromRedirect="Password reset email sent successfully! Please check your email."),A.fromResetPassword==="true"&&(this.getMessageFromRedirect="Password reset was successfully! Please use your new password to sign in.")}),this.form=this.initFormGroup(),this.form.valueChanges.subscribe(()=>{this.getServerErrorMessage&&this.clearServerErrorMessage(),this.getMessageFromRedirect=null})}ngOnInit(){this.tenantSettingsService.getClubName().subscribe({next:i=>{this.clubName=i}})}navigateToRegister(){this.router.navigateByUrl(Se.REGISTER)}navigateToForgotPassword(){this.router.navigateByUrl(Se.FORGOT_PASSWORD)}clearServerErrorMessage(){this.getServerErrorMessage=null}getControlDisplayName(i){switch(i){case"email":return"Email";case"password":return"Password";default:return i}}navigateToGameDetails(){this.router.navigateByUrl("games/1/details")}resendConfirmationEmail(){this.form.controls.email.valid&&this.authService.sendEmailConfirmationRequest(this.form.controls.email.value).subscribe({next:i=>{i&&i===!0?(this.toastService.success({message:"Confirmation email sent successfully!",type:W.Success}),this.clearServerErrorMessage(),this.showResend=!1):this.toastService.error({message:"Failed to send confirmation email.",type:W.Error})},error:()=>{this.toastService.error({message:"Failed to send confirmation email.",type:W.Error})}})}onLogin(){return g(this,null,function*(){if(this.form.valid){let i=yield this.messagingService.getDeviceTokenForRegistration();this.authService.login({email:this.form.controls.email.value,password:this.form.controls.password.value,deviceToken:i}).subscribe({next:s=>{s&&(this.authService.authenticateUser(s.accessToken,s.refreshToken),this.router.navigateByUrl(On.GAMES.LIBRARY))},error:s=>{s.error.errors.Email&&(this.getServerErrorMessage=s.error.errors.Email[0]),s.error.errors.EmailNotConfirmed&&(this.getServerErrorMessage=s.error.errors.EmailNotConfirmed[0],this.showResend=!0),this.toastService.error({message:$e.SomethingWrong,type:W.Error})}})}})}loginUser(){this.authService.login({email:"rap4obg@abv.bg",password:"1qaz!QAZ"}).subscribe({next:i=>{i&&(this.authService.authenticateUser(i.accessToken,i.refreshToken),this.router.navigateByUrl("games/library"))},error:i=>{this.handleServerErrors(i),this.toastService.error({message:$e.FailedToSaveChanges,type:W.Error})}})}loginUser2(){this.authService.login({email:"rap4obg88@abv.bg",password:"1qaz!QAZ"}).subscribe({next:i=>{i&&(this.authService.authenticateUser(i.accessToken,i.refreshToken),this.router.navigateByUrl("games/library"))},error:i=>{this.handleServerErrors(i),this.toastService.error({message:$e.FailedToSaveChanges,type:W.Error})}})}loginUser3(){this.authService.login({email:"rap4obg4@abv.bg",password:"123456789Mm!"}).subscribe({next:i=>{i&&(this.authService.authenticateUser(i.accessToken,i.refreshToken),this.router.navigateByUrl("games/library"))},error:i=>{this.handleServerErrors(i),this.toastService.error({message:$e.FailedToSaveChanges,type:W.Error})}})}loginUser4(){this.authService.login({email:"rap4obg17@abv.bg",password:"123456789Mm!"}).subscribe({next:i=>{i&&(this.authService.authenticateUser(i.accessToken,i.refreshToken),this.router.navigateByUrl("games/library"))},error:i=>{this.handleServerErrors(i),this.toastService.error({message:$e.FailedToSaveChanges,type:W.Error})}})}loginAdmin(){this.authService.login({email:"sa@dicehub.com",password:"1qaz!QAZ"}).subscribe({next:i=>{i&&(this.authService.authenticateUser(i.accessToken,i.refreshToken),this.router.navigateByUrl("games/library"))},error:i=>{this.handleServerErrors(i),this.toastService.error({message:$e.FailedToSaveChanges,type:W.Error})}})}initFormGroup(){return this.fb.group({email:new Ne("",[Ae.required]),password:new Ne("",Ae.required),rememberMe:new Ne(!0)})}};e.\u0275fac=function(s){return new(s||e)(N(Xe),N(ie),N(ce),N(Fn),N(Lt),N(Ft),N(Ze))},e.\u0275cmp=Z({type:e,selectors:[["app-login"]],features:[Ct],decls:46,vars:7,consts:[[3,"click"],[1,"wrapper"],[1,"interactive-option"],[1,"icon_wrapper"],["viewBox","0 -960 960 960",1,"icon"],["d","M750.54-116.15 638.15-229.31l-88 88-11.07-11.07q-26.39-26.39-26.39-63.47 0-37.07 26.39-63.46l145.61-145.61q26.39-26.39 63.46-26.39 37.08 0 63.47 26.39l11.07 11.07-88 88 113.16 113.39q13.69 13.69 13.69 31.61 0 17.93-13.69 31.62l-33.08 33.08q-13.69 13.69-32.12 13.69-18.42 0-32.11-13.69ZM853-735.92 408.31-290.46l24.61 25.38q16.39 26.39 13.39 57.46-3 31.08-26.39 54.47l-11.07 11.07-88-88-113.39 114.16q-13.69 13.69-31.61 13.69-17.93 0-31.62-13.69L110.15-150q-13.69-13.69-13.69-31.62 0-17.92 13.69-31.61l114.16-113.39-88-88 11.07-11.07q23.39-23.39 54.97-26.39 31.57-3 57.96 14.39l26.15 25.38L731.92-857H853v121.08ZM333-601l14.23-15.77 14-14-14 14L333-601Zm-46.31 45.54L107-735.92V-857h121.08L407-677.31l-45.77 46.54L201-791h-28v28l160 162-46.31 45.54ZM363-337l424-426v-28h-28L334-366l29 29Zm0 0-13.23-15.77L334-366l15.77 13.23L363-337Z"],[1,"header"],[1,"container",3,"formGroup"],[1,"input-field"],["for","email",1,"required"],["placeholder","email..","type","text","formControlName","email"],[1,"input-field","password-field"],["for","password",1,"required"],["placeholder","password..","formControlName","password",3,"type"],[3,"isVisibleChange","isVisible"],[1,"input-checkbox"],["type","checkbox","value","lsRememberMe","id","rememberMe","formControlName","rememberMe"],[1,"remember-label"],["for","rememberMe"],[1,"markup",3,"click"],["class","errors",4,"ngIf"],["class","redirect-message",4,"ngIf"],[1,"btn-container"],["type","button",1,"btn","btn-gray","btn-border-blue","btn-font-blue",3,"click","disabled"],[1,"additional-link"],[1,"errors"],[4,"ngIf"],[1,"resend",3,"click"],[1,"redirect-message"]],template:function(s,a){if(s&1&&(b(0,"button",0),V("click",function(){return a.loginUser()}),k(1,"Login USER"),S(),b(2,"button",0),V("click",function(){return a.loginUser2()}),k(3,"Login user 2"),S(),b(4,"button",0),V("click",function(){return a.loginUser3()}),k(5,"Login user 3"),S(),b(6,"button",0),V("click",function(){return a.loginUser4()}),k(7,"Login user 4"),S(),b(8,"button",0),V("click",function(){return a.loginAdmin()}),k(9,"Login ADMIN"),S(),b(10,"div",1)(11,"div",2)(12,"div",3),te(),b(13,"svg",4),x(14,"path",5),S()()(),ve(),b(15,"span",6),k(16),S(),b(17,"form",7)(18,"div",8)(19,"label",9),k(20,"Email"),S(),x(21,"input",10),S(),b(22,"div",11)(23,"label",12),k(24,"Password"),S(),x(25,"input",13),b(26,"app-password-visibility-toggle",14),kt("isVisibleChange",function(h){return Rt(a.showPassword,h)||(a.showPassword=h),h}),S()(),b(27,"div",15),x(28,"input",16),b(29,"div",17)(30,"label",18),k(31,"Remember me"),S(),b(32,"span",19),V("click",function(){return a.navigateToForgotPassword()}),k(33,"Lost your way?"),S()()(),z(34,Og,3,2,"div",20)(35,xg,2,1,"div",21),b(36,"div",22)(37,"button",23),V("click",function(){return a.onLogin()}),k(38," Login "),S()(),b(39,"div",24)(40,"p"),k(41,"Still a stranger to this realm?"),S(),b(42,"p")(43,"strong",19),V("click",function(){return a.navigateToRegister()}),k(44,"Sign up"),S(),k(45," and embark on your journey! "),S()()()()),s&2){let u;P(16),ke((u=a.clubName)!==null&&u!==void 0?u:"Club"),P(),R("formGroup",a.form),P(8),R("type",a.showPassword?"text":"password"),P(),Pt("isVisible",a.showPassword),P(8),R("ngIf",a.getFirstErrorMessage()),P(),R("ngIf",a.getMessageFromRedirect),P(2),R("disabled",a.form.invalid)}},dependencies:[ae,xt,Nt,ru,Dt,Ot,Mt,Vt,Dn],styles:[".wrapper[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;justify-content:center}.markup[_ngcontent-%COMP%]{color:#75a0ff}.interactive-option[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}.interactive-option[_ngcontent-%COMP%]   .icon_wrapper[_ngcontent-%COMP%]{width:5rem;height:5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);display:flex;justify-content:center;align-items:center}.interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#fff}.header[_ngcontent-%COMP%]{margin:1rem;display:flex;justify-content:center;font-size:1.5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 2rem 8rem;font-size:#ffffff}.input-checkbox[_ngcontent-%COMP%]{margin-left:.5rem;display:flex}.input-checkbox[_ngcontent-%COMP%]   .remember-label[_ngcontent-%COMP%]{display:flex;width:95%;justify-content:space-between}.input-checkbox[_ngcontent-%COMP%]   .remember-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1rem}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem}.btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60%}.additional-link[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;flex-direction:column}.errors[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem;margin-bottom:0;font-size:1.1rem;flex-wrap:wrap}.redirect-message[_ngcontent-%COMP%]{display:flex;justify-content:center;text-align:center;margin-top:1rem;margin-bottom:0;font-size:1.1rem;color:#46945b}.resend[_ngcontent-%COMP%]{font-weight:600;border-bottom:.15rem solid #bf3c65}"]});let t=e;return t})();var qn=new He("JWT_OPTIONS"),Kt=(()=>{class t{constructor(n=null){this.tokenGetter=n&&n.tokenGetter||function(){}}urlBase64Decode(n){let i=n.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:{i+="==";break}case 3:{i+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(i)}b64decode(n){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="";if(n=String(n).replace(/=+$/,""),n.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let a=0,u,h,I=0;h=n.charAt(I++);~h&&(u=a%4?u*64+h:h,a++%4)?s+=String.fromCharCode(255&u>>(-2*a&6)):0)h=i.indexOf(h);return s}b64DecodeUnicode(n){return decodeURIComponent(Array.prototype.map.call(this.b64decode(n),i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(n=this.tokenGetter()){return n instanceof Promise?n.then(i=>this._decodeToken(i)):this._decodeToken(n)}_decodeToken(n){if(!n||n==="")return null;let i=n.split(".");if(i.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let s=this.urlBase64Decode(i[1]);if(!s)throw new Error("Cannot decode the token.");return JSON.parse(s)}getTokenExpirationDate(n=this.tokenGetter()){return n instanceof Promise?n.then(i=>this._getTokenExpirationDate(i)):this._getTokenExpirationDate(n)}_getTokenExpirationDate(n){let i;if(i=this.decodeToken(n),!i||!i.hasOwnProperty("exp"))return null;let s=new Date(0);return s.setUTCSeconds(i.exp),s}isTokenExpired(n=this.tokenGetter(),i){return n instanceof Promise?n.then(s=>this._isTokenExpired(s,i)):this._isTokenExpired(n,i)}_isTokenExpired(n,i){if(!n||n==="")return!0;let s=this.getTokenExpirationDate(n);return i=i||0,s===null?!1:!(s.valueOf()>new Date().valueOf()+i*1e3)}getAuthScheme(n,i){return typeof n=="function"?n(i):n}}return t.\u0275fac=function(n){return new(n||t)(H(qn))},t.\u0275prov=ee({token:t,factory:t.\u0275fac}),t})(),Gl=t=>t instanceof Promise?Lc(()=>t):Ke(t),Mg=(()=>{class t{constructor(n,i,s){this.jwtHelper=i,this.document=s,this.standardPorts=["80","443"],this.tokenGetter=n.tokenGetter,this.headerName=n.headerName||"Authorization",this.authScheme=n.authScheme||n.authScheme===""?n.authScheme:"Bearer ",this.allowedDomains=n.allowedDomains||[],this.disallowedRoutes=n.disallowedRoutes||[],this.throwNoTokenError=n.throwNoTokenError||!1,this.skipWhenExpired=n.skipWhenExpired}isAllowedDomain(n){let i=new URL(n.url,this.document.location.origin);if(i.host===this.document.location.host)return!0;let s=`${i.hostname}${i.port&&!this.standardPorts.includes(i.port)?":"+i.port:""}`;return this.allowedDomains.findIndex(a=>typeof a=="string"?a===s:a instanceof RegExp?a.test(s):!1)>-1}isDisallowedRoute(n){let i=new URL(n.url,this.document.location.origin);return this.disallowedRoutes.findIndex(s=>{if(typeof s=="string"){let a=new URL(s,this.document.location.origin);return a.hostname===i.hostname&&a.pathname===i.pathname}return s instanceof RegExp?s.test(n.url):!1})>-1}handleInterception(n,i,s){let a=this.jwtHelper.getAuthScheme(this.authScheme,i);if(!n&&this.throwNoTokenError)throw new Error("Could not get token from tokenGetter function.");let u=Ke(!1);return this.skipWhenExpired&&(u=n?Gl(this.jwtHelper.isTokenExpired(n)):Ke(!0)),n?u.pipe(sn(h=>h&&this.skipWhenExpired?i.clone():i.clone({setHeaders:{[this.headerName]:`${a}${n}`}})),ks(h=>s.handle(h))):s.handle(i)}intercept(n,i){if(!this.isAllowedDomain(n)||this.isDisallowedRoute(n))return i.handle(n);let s=this.tokenGetter(n);return Gl(s).pipe(ks(a=>this.handleInterception(a,n,i)))}}return t.\u0275fac=function(n){return new(n||t)(H(qn),H(Kt),H(Xc))},t.\u0275prov=ee({token:t,factory:t.\u0275fac}),t})(),Wl=(()=>{class t{constructor(n){if(n)throw new Error("JwtModule is already loaded. It should only be imported in your application's main module.")}static forRoot(n){return{ngModule:t,providers:[{provide:kn,useClass:Mg,multi:!0},n.jwtOptionsProvider||{provide:qn,useValue:n.config},Kt]}}}return t.\u0275fac=function(n){return new(n||t)(H(t,12))},t.\u0275mod=$({type:t}),t.\u0275inj=j({}),t})();var qe=(()=>{let e=class e{constructor(i,s,a,u){this.router=i,this.jwtHelper=s,this.api=a,this.authService=u}canActivate(i,s){let a=localStorage.getItem("jwt");return a&&!this.jwtHelper.isTokenExpired(a)?(console.log(this.jwtHelper.decodeToken(a)),Ke(!0)):this.tryRefreshingTokens(a).pipe(Ds(1),di(u=>{u?this.authService.userinfo():(console.log("redirect to login"),this.authService.logout(),this.router.navigateByUrl("login"))}))}tryRefreshingTokens(i){let s=localStorage.getItem("refreshToken");if(!i||!s)return Ke(!1);let a={accessToken:i,refreshToken:s};return this.api.post("/user/refresh",a,{options:{headers:new tu({"Content-Type":"application/json"})}}).pipe(Ds(1),di(u=>{u&&(localStorage.setItem("jwt",u.accessToken),localStorage.setItem("refreshToken",u.refreshToken))}),sn(()=>!0),nr(u=>(console.log(u),this.authService.logout(),Ke(!1))))}};e.\u0275fac=function(s){return new(s||e)(H(ie),H(Kt),H(Nn),H(ce))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Vg(t,e){if(t&1){let n=we();b(0,"span")(1,"a",25),V("click",function(){se(n);let s=L(2);return oe(s.resendConfirmationEmail())}),k(2,"click here to resend"),S()()}}function Lg(t,e){if(t&1&&(b(0,"div",23),k(1),z(2,Vg,3,0,"span",24),S()),t&2){let n=L();P(),Fe(" ",n.getFirstErrorMessage()," "),P(),R("ngIf",n.showResend)}}var Hl=(()=>{let e=class e extends qt{constructor(i,s,a,u,h,I){super(u),this.router=i,this.authService=s,this.messagingService=a,this.toastService=u,this.fb=h,this.tenantSettingsService=I,this.showPassword=!1,this.showConfirmPassword=!1,this.showResend=!1,this.clubName=null,this.form=this.initFormGroup(),this.form.valueChanges.subscribe(()=>{this.getServerErrorMessage&&this.clearServerErrorMessage()})}ngOnInit(){this.tenantSettingsService.getClubName().subscribe({next:i=>{this.clubName=i}})}clearServerErrorMessage(){this.getServerErrorMessage=null}navigateToLogin(){this.router.navigateByUrl(Se.LOGIN)}register(){return g(this,null,function*(){if(this.form.valid)try{let i=yield this.messagingService.getDeviceTokenForRegistration();this.authService.register({username:this.form.controls.username.value,email:this.form.controls.email.value,password:this.form.controls.password.value,confirmPassword:this.form.controls.confirmPassword.value,deviceToken:i}).subscribe({next:s=>{s&&s.isEmailConfirmationSendedSuccessfully===!0&&s.isRegistrationSuccessfully===!0?(this.toastService.success({message:"Registration successful! Please check your email to confirm your account.",type:W.Success}),setTimeout(()=>{this.router.navigate(["/login"],{queryParams:{fromRegister:"true"}})},5e3)):s&&s.isRegistrationSuccessfully===!0&&s.isEmailConfirmationSendedSuccessfully===!1?(this.toastService.success({message:`Registration successful, but we couldn't send the confirmation email. 
                    Please try resending it or contact support.`,type:W.Success}),this.getServerErrorMessage=`We couldn't send the confirmation email. 
                    Please try resending it or contact support.`,this.showResend=!0):this.toastService.error({message:"Registration failed. Please try again.",type:W.Error})},error:s=>this.handleRegistrationError(s)})}catch{}})}resendConfirmationEmail(){this.form.controls.email.valid&&this.authService.sendEmailConfirmationRequest(this.form.controls.email.value).subscribe({next:i=>{i&&i===!0?(this.toastService.success({message:"Confirmation email sent successfully!",type:W.Success}),this.clearServerErrorMessage(),setTimeout(()=>{this.router.navigate(["/login"],{queryParams:{fromRegister:"true"}})},4e3)):this.toastService.error({message:"Failed to send confirmation email.",type:W.Error})},error:()=>{this.toastService.error({message:"Failed to send confirmation email.",type:W.Error})}})}handleRegistrationError(i){i.error?.errors?.Exist?this.getServerErrorMessage=i.error.errors.Exist[0]:this.handleServerErrors(i),this.toastService.error({message:$e.SomethingWrong,type:W.Error})}getControlDisplayName(i){switch(i){case"email":return"Email";case"password":return"Password";case"username":return"Username";case"confirmPassword":return"Confirm Password";default:return i}}initFormGroup(){return this.fb.group({username:new Ne("",[Ae.required,Ae.minLength(3)]),email:new Ne("",[Ae.required,Ae.minLength(3)]),password:new Ne("",Ae.required),confirmPassword:new Ne("",Ae.required)})}};e.\u0275fac=function(s){return new(s||e)(N(ie),N(ce),N(Fn),N(Xe),N(Lt),N(Ze))},e.\u0275cmp=Z({type:e,selectors:[["app-register"]],features:[Ct],decls:37,vars:8,consts:[[1,"wrapper"],[1,"interactive-option"],[1,"icon_wrapper"],["viewBox","0 -960 960 960",1,"icon"],["d","M750.54-116.15 638.15-229.31l-88 88-11.07-11.07q-26.39-26.39-26.39-63.47 0-37.07 26.39-63.46l145.61-145.61q26.39-26.39 63.46-26.39 37.08 0 63.47 26.39l11.07 11.07-88 88 113.16 113.39q13.69 13.69 13.69 31.61 0 17.93-13.69 31.62l-33.08 33.08q-13.69 13.69-32.12 13.69-18.42 0-32.11-13.69ZM853-735.92 408.31-290.46l24.61 25.38q16.39 26.39 13.39 57.46-3 31.08-26.39 54.47l-11.07 11.07-88-88-113.39 114.16q-13.69 13.69-31.61 13.69-17.93 0-31.62-13.69L110.15-150q-13.69-13.69-13.69-31.62 0-17.92 13.69-31.61l114.16-113.39-88-88 11.07-11.07q23.39-23.39 54.97-26.39 31.57-3 57.96 14.39l26.15 25.38L731.92-857H853v121.08ZM333-601l14.23-15.77 14-14-14 14L333-601Zm-46.31 45.54L107-735.92V-857h121.08L407-677.31l-45.77 46.54L201-791h-28v28l160 162-46.31 45.54ZM363-337l424-426v-28h-28L334-366l29 29Zm0 0-13.23-15.77L334-366l15.77 13.23L363-337Z"],[1,"header"],[1,"container",3,"formGroup"],[1,"input-field"],["for","username",1,"required"],["placeholder","username..","type","text","formControlName","username"],["for","email",1,"required"],["placeholder","email..","type","text","formControlName","email"],[1,"input-field","password-field"],["for","password",1,"required"],["placeholder","password..","formControlName","password",3,"type"],[3,"isVisibleChange","isVisible"],["for","confirmPassword",1,"required"],["placeholder","confirm your password","formControlName","confirmPassword",3,"type"],["class","errors",4,"ngIf"],[1,"btn-container"],["type","button",1,"btn","btn-gray","btn-border-blue","btn-font-blue",3,"click","disabled"],[1,"additional-link"],[1,"markup",3,"click"],[1,"errors"],[4,"ngIf"],[1,"resend",3,"click"]],template:function(s,a){if(s&1&&(b(0,"div",0)(1,"div",1)(2,"div",2),te(),b(3,"svg",3),x(4,"path",4),S()()(),ve(),b(5,"span",5),k(6),S(),b(7,"form",6)(8,"div",7)(9,"label",8),k(10,"Username"),S(),x(11,"input",9),S(),b(12,"div",7)(13,"label",10),k(14,"Email"),S(),x(15,"input",11),S(),b(16,"div",12)(17,"label",13),k(18,"Password"),S(),x(19,"input",14),b(20,"app-password-visibility-toggle",15),kt("isVisibleChange",function(h){return Rt(a.showPassword,h)||(a.showPassword=h),h}),S()(),b(21,"div",12)(22,"label",16),k(23,"Confirm Password"),S(),x(24,"input",17),b(25,"app-password-visibility-toggle",15),kt("isVisibleChange",function(h){return Rt(a.showConfirmPassword,h)||(a.showConfirmPassword=h),h}),S()(),z(26,Lg,3,2,"div",18),b(27,"div",19)(28,"button",20),V("click",function(){return a.register()}),k(29," Register "),S()(),b(30,"div",21)(31,"p"),k(32,"You're already part of the guild!"),S(),b(33,"p")(34,"strong",22),V("click",function(){return a.navigateToLogin()}),k(35,"Sign in"),S(),k(36," to jump back into the action! "),S()()()()),s&2){let u;P(6),ke((u=a.clubName)!==null&&u!==void 0?u:"Club"),P(),R("formGroup",a.form),P(12),R("type",a.showPassword?"text":"password"),P(),Pt("isVisible",a.showPassword),P(4),R("type",a.showConfirmPassword?"text":"password"),P(),Pt("isVisible",a.showConfirmPassword),P(),R("ngIf",a.getFirstErrorMessage()),P(2),R("disabled",a.form.invalid)}},dependencies:[ae,xt,Nt,Dt,Ot,Mt,Vt,Dn],styles:[".wrapper[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;justify-content:center}.markup[_ngcontent-%COMP%]{color:#75a0ff}.interactive-option[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}.interactive-option[_ngcontent-%COMP%]   .icon_wrapper[_ngcontent-%COMP%]{width:5rem;height:5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);display:flex;justify-content:center;align-items:center}.interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#fff}.header[_ngcontent-%COMP%]{margin:1rem;display:flex;justify-content:center;font-size:1.5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 2rem 3rem;font-size:#ffffff}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem}.btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60%}.additional-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;text-align:center}.errors[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem;margin-bottom:0;font-size:1.1rem;text-align:center;flex-wrap:wrap}.resend[_ngcontent-%COMP%]{font-weight:600;color:#75a0ff;border-bottom:.15rem solid #75a0ff}"]});let t=e;return t})();function Fg(t,e){if(t&1&&(b(0,"div",15),k(1),S()),t&2){let n=L();P(),Fe(" ",n.getFirstErrorMessage()," ")}}var Ql=(()=>{let e=class e extends qt{constructor(i,s,a,u,h){super(a),this.router=i,this.authService=s,this.toastService=a,this.fb=u,this.tenantSettingsService=h,this.clubName=null,this.form=this.initFormGroup(),this.form.valueChanges.subscribe(()=>{this.getServerErrorMessage&&this.clearServerErrorMessage()})}ngOnInit(){this.tenantSettingsService.getClubName().subscribe({next:i=>{this.clubName=i}})}onSubmit(){this.form.valid&&this.authService.forgotPassword(this.form.controls.email.value).subscribe({next:()=>{this.toastService.success({type:W.Success,message:"Password reset email sent successfully!"}),setTimeout(()=>{this.router.navigate([Se.LOGIN],{queryParams:{fromForgotPassword:"true"}})},5e3)},error:i=>{i.error.errors.Email&&(this.getServerErrorMessage=i.error.errors.Email[0]),this.toastService.error({type:W.Error,message:"Password reset email was not successfully!"})}})}navigateToLogin(){this.router.navigateByUrl(Se.LOGIN)}getControlDisplayName(i){switch(i){case"email":return"Email";default:return i}}clearServerErrorMessage(){this.getServerErrorMessage=null}initFormGroup(){return this.fb.group({email:new Ne("",[Ae.required])})}};e.\u0275fac=function(s){return new(s||e)(N(ie),N(ce),N(Xe),N(Lt),N(Ze))},e.\u0275cmp=Z({type:e,selectors:[["app-forgot-password"]],features:[Ct],decls:23,vars:4,consts:[[1,"wrapper"],[1,"interactive-option"],[1,"icon_wrapper"],["viewBox","0 -960 960 960",1,"icon"],["d","M750.54-116.15 638.15-229.31l-88 88-11.07-11.07q-26.39-26.39-26.39-63.47 0-37.07 26.39-63.46l145.61-145.61q26.39-26.39 63.46-26.39 37.08 0 63.47 26.39l11.07 11.07-88 88 113.16 113.39q13.69 13.69 13.69 31.61 0 17.93-13.69 31.62l-33.08 33.08q-13.69 13.69-32.12 13.69-18.42 0-32.11-13.69ZM853-735.92 408.31-290.46l24.61 25.38q16.39 26.39 13.39 57.46-3 31.08-26.39 54.47l-11.07 11.07-88-88-113.39 114.16q-13.69 13.69-31.61 13.69-17.93 0-31.62-13.69L110.15-150q-13.69-13.69-13.69-31.62 0-17.92 13.69-31.61l114.16-113.39-88-88 11.07-11.07q23.39-23.39 54.97-26.39 31.57-3 57.96 14.39l26.15 25.38L731.92-857H853v121.08ZM333-601l14.23-15.77 14-14-14 14L333-601Zm-46.31 45.54L107-735.92V-857h121.08L407-677.31l-45.77 46.54L201-791h-28v28l160 162-46.31 45.54ZM363-337l424-426v-28h-28L334-366l29 29Zm0 0-13.23-15.77L334-366l15.77 13.23L363-337Z"],[1,"header"],[1,"container",3,"formGroup"],[1,"input-field"],["for","email",1,"required"],["placeholder","email..","type","text","formControlName","email"],["class","errors",4,"ngIf"],[1,"btn-container"],["type","button",1,"btn","btn-gray","btn-border-blue","btn-font-blue",3,"click","disabled"],[1,"additional-link"],[1,"markup",3,"click"],[1,"errors"]],template:function(s,a){if(s&1&&(b(0,"div",0)(1,"div",1)(2,"div",2),te(),b(3,"svg",3),x(4,"path",4),S()()(),ve(),b(5,"span",5),k(6),S(),b(7,"form",6)(8,"div",7)(9,"label",8),k(10,"Email"),S(),x(11,"input",9),S(),z(12,Fg,2,1,"div",10),b(13,"div",11)(14,"button",12),V("click",function(){return a.onSubmit()}),k(15," Send "),S()(),b(16,"div",13)(17,"p"),k(18,"You remembered your key!"),S(),b(19,"p")(20,"strong",14),V("click",function(){return a.navigateToLogin()}),k(21,"Sign in"),S(),k(22," to jump back into the action! "),S()()()()),s&2){let u;P(6),ke((u=a.clubName)!==null&&u!==void 0?u:"Club"),P(),R("formGroup",a.form),P(5),R("ngIf",a.getFirstErrorMessage()),P(2),R("disabled",a.form.invalid)}},dependencies:[ae,xt,Nt,Dt,Ot,Mt,Vt],styles:[".wrapper[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;justify-content:center}.markup[_ngcontent-%COMP%]{color:#75a0ff}.interactive-option[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}.interactive-option[_ngcontent-%COMP%]   .icon_wrapper[_ngcontent-%COMP%]{width:5rem;height:5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);display:flex;justify-content:center;align-items:center}.interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#fff}.header[_ngcontent-%COMP%]{margin:1rem;display:flex;justify-content:center;font-size:1.5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 2rem 8rem;font-size:#ffffff}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem}.btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60%}.additional-link[_ngcontent-%COMP%]{display:flex;text-align:center;justify-content:center;flex-direction:column}.errors[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem;margin-bottom:0;font-size:1.1rem}"]});let t=e;return t})();function Ug(t,e){if(t&1&&(b(0,"div",16),k(1),S()),t&2){let n=L();P(),Fe(" ",n.getFirstErrorMessage()," ")}}var Yl=(()=>{let e=class e extends qt{constructor(i,s,a,u,h,I){super(u),this.router=i,this.route=s,this.authService=a,this.toastService=u,this.fb=h,this.tenantSettingsService=I,this.showNewPassword=!1,this.showConfirmPassword=!1,this.email=null,this.token=null,this.clubName=null,this.form=this.initFormGroup(),this.form.valueChanges.subscribe(()=>{this.getServerErrorMessage&&this.clearServerErrorMessage()})}ngOnInit(){this.route.queryParams.subscribe(i=>{this.email=i.email,this.token=i.token}),this.tenantSettingsService.getClubName().subscribe({next:i=>{this.clubName=i}})}toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){this.form.valid&&this.email&&this.token?this.authService.resetPassword({newPassword:this.form.controls.newPassword.value,confirmPassword:this.form.controls.confirmPassword.value,token:this.token,email:this.email}).subscribe({next:()=>{this.toastService.success({type:W.Success,message:"Password reset was successfully!"}),setTimeout(()=>{this.router.navigate([Se.LOGIN],{queryParams:{fromResetPassword:"true"}})},4e3)},error:i=>{i.error.errors.Password&&(this.getServerErrorMessage=i.error.errors.Password[0]),this.toastService.error({type:W.Error,message:"Password reset was unsuccessfully!"})}}):this.toastService.error({type:W.Error,message:$e.SomethingWrong})}getControlDisplayName(i){switch(i){case"newPassword":return"New Password";case"confirmPassword":return"Confirm Password";default:return i}}clearServerErrorMessage(){this.getServerErrorMessage=null}initFormGroup(){return this.fb.group({newPassword:new Ne("",[Ae.required]),confirmPassword:new Ne("",[Ae.required])})}};e.\u0275fac=function(s){return new(s||e)(N(ie),N(Ft),N(ce),N(Xe),N(Lt),N(Ze))},e.\u0275cmp=Z({type:e,selectors:[["app-reset-password"]],features:[Ct],decls:22,vars:8,consts:[[1,"wrapper"],[1,"interactive-option"],[1,"icon_wrapper"],["viewBox","0 -960 960 960",1,"icon"],["d","M750.54-116.15 638.15-229.31l-88 88-11.07-11.07q-26.39-26.39-26.39-63.47 0-37.07 26.39-63.46l145.61-145.61q26.39-26.39 63.46-26.39 37.08 0 63.47 26.39l11.07 11.07-88 88 113.16 113.39q13.69 13.69 13.69 31.61 0 17.93-13.69 31.62l-33.08 33.08q-13.69 13.69-32.12 13.69-18.42 0-32.11-13.69ZM853-735.92 408.31-290.46l24.61 25.38q16.39 26.39 13.39 57.46-3 31.08-26.39 54.47l-11.07 11.07-88-88-113.39 114.16q-13.69 13.69-31.61 13.69-17.93 0-31.62-13.69L110.15-150q-13.69-13.69-13.69-31.62 0-17.92 13.69-31.61l114.16-113.39-88-88 11.07-11.07q23.39-23.39 54.97-26.39 31.57-3 57.96 14.39l26.15 25.38L731.92-857H853v121.08ZM333-601l14.23-15.77 14-14-14 14L333-601Zm-46.31 45.54L107-735.92V-857h121.08L407-677.31l-45.77 46.54L201-791h-28v28l160 162-46.31 45.54ZM363-337l424-426v-28h-28L334-366l29 29Zm0 0-13.23-15.77L334-366l15.77 13.23L363-337Z"],[1,"header"],[1,"container",3,"formGroup"],[1,"input-field","password-field"],["for","newPassword",1,"required"],["placeholder","new password..","formControlName","newPassword",3,"type"],[3,"isVisibleChange","isVisible"],["for","confirmPassword",1,"required"],["placeholder","confirm password..","formControlName","confirmPassword",3,"type"],["class","errors",4,"ngIf"],[1,"btn-container"],["type","button",1,"btn","btn-gray","btn-border-blue","btn-font-blue",3,"click","disabled"],[1,"errors"]],template:function(s,a){if(s&1&&(b(0,"div",0)(1,"div",1)(2,"div",2),te(),b(3,"svg",3),x(4,"path",4),S()()(),ve(),b(5,"span",5),k(6),S(),b(7,"form",6)(8,"div",7)(9,"label",8),k(10,"New Password"),S(),x(11,"input",9),b(12,"app-password-visibility-toggle",10),kt("isVisibleChange",function(h){return Rt(a.showNewPassword,h)||(a.showNewPassword=h),h}),S()(),b(13,"div",7)(14,"label",11),k(15,"Confirm Password"),S(),x(16,"input",12),b(17,"app-password-visibility-toggle",10),kt("isVisibleChange",function(h){return Rt(a.showConfirmPassword,h)||(a.showConfirmPassword=h),h}),S()(),z(18,Ug,2,1,"div",13),b(19,"div",14)(20,"button",15),V("click",function(){return a.onSubmit()}),k(21," Send "),S()()()()),s&2){let u;P(6),ke((u=a.clubName)!==null&&u!==void 0?u:"Club"),P(),R("formGroup",a.form),P(4),R("type",a.showNewPassword?"text":"password"),P(),Pt("isVisible",a.showNewPassword),P(4),R("type",a.showConfirmPassword?"text":"password"),P(),Pt("isVisible",a.showConfirmPassword),P(),R("ngIf",a.getFirstErrorMessage()),P(2),R("disabled",a.form.invalid)}},dependencies:[ae,xt,Nt,Dt,Ot,Mt,Vt,Dn],styles:[".wrapper[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;justify-content:center}.markup[_ngcontent-%COMP%]{color:#75a0ff}.interactive-option[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:3rem}.interactive-option[_ngcontent-%COMP%]   .icon_wrapper[_ngcontent-%COMP%]{width:5rem;height:5rem;border-radius:50px;background:#75a0ff;box-shadow:0 0 0 12px var(--background-color);display:flex;justify-content:center;align-items:center}.interactive-option[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:3rem;height:3rem;fill:#fff}.header[_ngcontent-%COMP%]{margin:1rem;display:flex;justify-content:center;font-size:1.5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2rem 2rem 8rem;font-size:#ffffff}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:1rem}.btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60%}.errors[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem;margin-bottom:0;font-size:1.1rem}"]});let t=e;return t})();var Ht=(()=>{let e=class e{constructor(i,s){this.router=i,this.jwtHelper=s}canActivate(i,s){let a=localStorage.getItem("jwt");return a&&!this.jwtHelper.isTokenExpired(a)?(console.log(this.jwtHelper.decodeToken(a)),this.router.parseUrl(On.GAMES.LIBRARY)):Ke(!0)}};e.\u0275fac=function(s){return new(s||e)(H(ie),H(Kt))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jl=[{path:"",children:[{path:"games",loadChildren:()=>import("./chunk-5DZ5T3IQ.js").then(t=>t.GamesLibraryModule),canActivate:[qe]},{path:"reservations",loadChildren:()=>import("./chunk-BRZXZECP.js").then(t=>t.ReservationManagementModule),canActivate:[qe]},{path:Se.EVENTS.CORE,loadChildren:()=>import("./chunk-EWFR6G4B.js").then(t=>t.EventsLibraryModule),canActivate:[qe]},{path:"meeples",loadChildren:()=>import("./chunk-EHU7QMQP.js").then(t=>t.FindMeepleManagementModule),canActivate:[qe]},{path:Se.CHALLENGES.CORE,loadChildren:()=>import("./chunk-JMIGWLG6.js").then(t=>t.ChallengesManagementModule),canActivate:[qe]},{path:"space",loadChildren:()=>import("./chunk-KWFVMMV5.js").then(t=>t.ClubSpaceManagementModule),canActivate:[qe]},{path:"admin-space",loadChildren:()=>import("./chunk-Y4LBQOSX.js").then(t=>t.AdminSpaceModule)},{path:"qr-code-scanner",loadChildren:()=>import("./chunk-TMW7NRYE.js").then(t=>t.QrCodeScannerModule),canActivate:[qe]},{path:"profile",loadChildren:()=>import("./chunk-P33KKX3K.js").then(t=>t.ProfileModule),canActivate:[qe]},{path:"charts",loadChildren:()=>import("./chunk-GEDZUJMP.js").then(t=>t.ChartAppModule),canActivate:[qe]}]},{path:"instructions",loadChildren:()=>import("./chunk-XPLWFUM5.js").then(t=>t.InstructionManagementModule),data:{hideMenu:!0}},{path:"login",component:zl,canActivate:[Ht],data:{hideMenu:!0}},{path:"register",component:Hl,canActivate:[Ht],data:{hideMenu:!0}},{path:"confirm-email",component:wu,canActivate:[Ht],data:{hideMenu:!0}},{path:"forgot-password",component:Ql,canActivate:[Ht],data:{hideMenu:!0}},{path:"reset-password",component:Yl,canActivate:[Ht],data:{hideMenu:!0}},{path:"unauthorized",loadChildren:()=>import("./chunk-ZEA4X2E7.js").then(t=>t.UnauthorizedModule)},{path:"forbidden",loadChildren:()=>import("./chunk-3VWJGQXU.js").then(t=>t.ForbiddenModule)},{path:"server-error",loadChildren:()=>import("./chunk-6APZ6G3A.js").then(t=>t.ServerErrorModule)},{path:"not-found",loadChildren:()=>import("./chunk-4OKT3FCE.js").then(t=>t.NotFoundModule)}];var Xl=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[vi.forRoot(Jl),vi]});let t=e;return t})();var Zl=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[De]});let t=e;return t})();var eh=(()=>{let e=class e{intercept(i,s){let a=localStorage.getItem("jwt"),u=i.headers;return i.body instanceof FormData||(u=u.set("Content-Type","application/json")),a&&(u=u.set("Authorization",`Bearer ${a}`)),i=i.clone({headers:u}),s.handle(i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();var th=(()=>{let e=class e{constructor(i){this.router=i}intercept(i,s){return s.handle(i).pipe(nr(a=>{let u="An unknown error occurred!";if(a.error instanceof ErrorEvent)return Rs(()=>a);switch(a.status){case 400:u="Bad Request: "+a.error.detail;break;case 401:this.router.navigate(["/unauthorized"]);break;case 403:this.router.navigate(["/forbidden"]);break;case 404:this.router.navigate(["/not-found"]);break;case 0:this.router.navigate(["/server-error"]);break}return Rs(()=>a)}))}};e.\u0275fac=function(s){return new(s||e)(H(ie))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function gh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _h=gh,yh=new Le("auth","Firebase",gh());var Or=new jt("@firebase/auth");function qg(t,...e){Or.logLevel<=G.WARN&&Or.warn(`Auth (${zt}): ${t}`,...e)}function Rr(t,...e){Or.logLevel<=G.ERROR&&Or.error(`Auth (${zt}): ${t}`,...e)}function Yt(t,...e){throw Qo(t,...e)}function vn(t,...e){return Qo(t,...e)}function vh(t,e,n){let i=Object.assign(Object.assign({},_h()),{[e]:n});return new Le("auth","Firebase",i).create(e,{appName:t.name})}function yn(t){return vh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qo(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return yh.create(t,...e)}function O(t,e,...n){if(!t)throw Qo(e,...n)}function yt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Rr(e),new Error(e)}function Jt(t,e){t||yt(e)}function Oo(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Bg(){return nh()==="http:"||nh()==="https:"}function nh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function jg(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Bg()||Ru()||"connection"in navigator)?navigator.onLine:!0}function $g(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var wn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jt(n>e,"Short delay should be less than long delay!"),this.isMobile=Cu()||ku()}get(){return jg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Yo(t,e){Jt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xr=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;yt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;yt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;yt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Gg=new wn(3e4,6e4);function Jo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function jn(a,u,h,I){return g(this,arguments,function*(t,e,n,i,s={}){return wh(t,s,()=>g(this,null,function*(){let T={},A={};i&&(e==="GET"?A=i:T={body:JSON.stringify(i)});let D=Ei(Object.assign({key:t.config.apiKey},A)).slice(1),M=yield t._getAdditionalHeaders();M["Content-Type"]="application/json",t.languageCode&&(M["X-Firebase-Locale"]=t.languageCode);let ne=Object.assign({method:e,headers:M},T);return Pu()||(ne.referrerPolicy="no-referrer"),xr.fetch()(Ih(t,t.config.apiHost,n,D),ne)}))})}function wh(t,e,n){return g(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},zg),e);try{let s=new xo(t),a=yield Promise.race([n(),s.promise]);s.clearNetworkTimeout();let u=yield a.json();if("needConfirmation"in u)throw Pr(t,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{let h=a.ok?u.errorMessage:u.error.message,[I,T]=h.split(" : ");if(I==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pr(t,"credential-already-in-use",u);if(I==="EMAIL_EXISTS")throw Pr(t,"email-already-in-use",u);if(I==="USER_DISABLED")throw Pr(t,"user-disabled",u);let A=i[I]||I.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw vh(t,A,T);Yt(t,A)}}catch(s){if(s instanceof Ce)throw s;Yt(t,"network-request-failed",{message:String(s)})}})}function Wg(a,u,h,I){return g(this,arguments,function*(t,e,n,i,s={}){let T=yield jn(t,e,n,i,s);return"mfaPendingCredential"in T&&Yt(t,"multi-factor-auth-required",{_serverResponse:T}),T})}function Ih(t,e,n,i){let s=`${e}${n}?${i}`;return t.config.emulator?Yo(t.config,s):`${t.config.apiScheme}://${s}`}var xo=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(vn(this.auth,"network-request-failed")),Gg.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Pr(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let s=vn(t,e,i);return s.customData._tokenResponse=n,s}function Kg(t,e){return g(this,null,function*(){return jn(t,"POST","/v1/accounts:delete",e)})}function Eh(t,e){return g(this,null,function*(){return jn(t,"POST","/v1/accounts:lookup",e)})}function Si(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Xo(t,e=!1){return g(this,null,function*(){let n=Ue(t),i=yield n.getIdToken(e),s=Zo(i);O(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");let a=typeof s.firebase=="object"?s.firebase:void 0,u=a?.sign_in_provider;return{claims:s,token:i,authTime:Si(ko(s.auth_time)),issuedAtTime:Si(ko(s.iat)),expirationTime:Si(ko(s.exp)),signInProvider:u||null,signInSecondFactor:a?.sign_in_second_factor||null}})}function ko(t){return Number(t)*1e3}function Zo(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Rr("JWT malformed, contained fewer than 3 sections"),null;try{let s=Us(n);return s?JSON.parse(s):(Rr("Failed to decode base64 JWT payload"),null)}catch(s){return Rr("Caught error parsing JWT payload as JSON",s?.toString()),null}}function ih(t){let e=Zo(t);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Pi(t,e,n=!1){return g(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof Ce&&Hg(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function Hg({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Mo=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>g(this,null,function*(){yield this.iteration()}),n)}iteration(){return g(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ri=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Si(this.lastLoginAt),this.creationTime=Si(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Mr(t){return g(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),s=yield Pi(t,Eh(n,{idToken:i}));O(s?.users.length,n,"internal-error");let a=s.users[0];t._notifyReloadListener(a);let u=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Th(a.providerUserInfo):[],h=Qg(t.providerData,u),I=t.isAnonymous,T=!(t.email&&a.passwordHash)&&!h?.length,A=I?T:!1,D={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Ri(a.createdAt,a.lastLoginAt),isAnonymous:A};Object.assign(t,D)})}function ea(t){return g(this,null,function*(){let e=Ue(t);yield Mr(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Qg(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Th(t){return t.map(e=>{var{providerId:n}=e,i=Ss(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Yg(t,e){return g(this,null,function*(){let n=yield wh(t,{},()=>g(this,null,function*(){let i=Ei({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,u=Ih(t,s,"/v1/token",`key=${a}`),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",xr.fetch()(u,{method:"POST",headers:h,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Jg(t,e){return g(this,null,function*(){return jn(t,"POST","/v2/accounts:revokeToken",Jo(t,e))})}var Ci=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ih(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){O(e.length!==0,"internal-error");let n=ih(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return g(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return g(this,null,function*(){let{accessToken:i,refreshToken:s,expiresIn:a}=yield Yg(e,n);this.updateTokensAndExpiration(i,s,Number(a))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:s,expirationTime:a}=n,u=new t;return i&&(O(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(O(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(O(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return yt("not implemented")}};function Qt(t,e){O(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Bn=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,a=Ss(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ri(a.createdAt||void 0,a.lastLoginAt||void 0)}getIdToken(e){return g(this,null,function*(){let n=yield Pi(this,this.stsTokenManager.getToken(this.auth,e));return O(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Xo(this,e)}reload(){return ea(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return g(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Mr(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return g(this,null,function*(){if(dt(this.auth.app))return Promise.reject(yn(this.auth));let e=yield this.getIdToken();return yield Pi(this,Kg(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,a,u,h,I,T,A;let D=(i=n.displayName)!==null&&i!==void 0?i:void 0,M=(s=n.email)!==null&&s!==void 0?s:void 0,ne=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,q=(u=n.photoURL)!==null&&u!==void 0?u:void 0,re=(h=n.tenantId)!==null&&h!==void 0?h:void 0,J=(I=n._redirectEventId)!==null&&I!==void 0?I:void 0,rt=(T=n.createdAt)!==null&&T!==void 0?T:void 0,Me=(A=n.lastLoginAt)!==null&&A!==void 0?A:void 0,{uid:pe,emailVerified:Be,isAnonymous:Zt,providerData:Re,stsTokenManager:v}=n;O(pe&&v,e,"internal-error");let d=Ci.fromJSON(this.name,v);O(typeof pe=="string",e,"internal-error"),Qt(D,e.name),Qt(M,e.name),O(typeof Be=="boolean",e,"internal-error"),O(typeof Zt=="boolean",e,"internal-error"),Qt(ne,e.name),Qt(q,e.name),Qt(re,e.name),Qt(J,e.name),Qt(rt,e.name),Qt(Me,e.name);let p=new t({uid:pe,auth:e,email:M,emailVerified:Be,displayName:D,isAnonymous:Zt,photoURL:q,phoneNumber:ne,tenantId:re,stsTokenManager:d,createdAt:rt,lastLoginAt:Me});return Re&&Array.isArray(Re)&&(p.providerData=Re.map(m=>Object.assign({},m))),J&&(p._redirectEventId=J),p}static _fromIdTokenResponse(e,n,i=!1){return g(this,null,function*(){let s=new Ci;s.updateFromServerResponse(n);let a=new t({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return yield Mr(a),a})}static _fromGetAccountInfoResponse(e,n,i){return g(this,null,function*(){let s=n.users[0];O(s.localId!==void 0,"internal-error");let a=s.providerUserInfo!==void 0?Th(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!a?.length,h=new Ci;h.updateFromIdToken(i);let I=new t({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:u}),T={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ri(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(I,T),I})}};var rh=new Map;function vt(t){Jt(t instanceof Function,"Expected a class definition");let e=rh.get(t);return e?(Jt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rh.set(t,e),e)}var Xg=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(this,null,function*(){return!0})}_set(n,i){return g(this,null,function*(){this.storage[n]=i})}_get(n){return g(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return g(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),Vo=Xg;function kr(t,e,n){return`firebase:${t}:${e}:${n}`}var Vr=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:s,name:a}=this.auth;this.fullUserKey=kr(this.userKey,s.apiKey,a),this.fullPersistenceKey=kr("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return g(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return g(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return g(this,null,function*(){if(!n.length)return new t(vt(Vo),e,i);let s=(yield Promise.all(n.map(T=>g(this,null,function*(){if(yield T._isAvailable())return T})))).filter(T=>T),a=s[0]||vt(Vo),u=kr(i,e.config.apiKey,e.name),h=null;for(let T of n)try{let A=yield T._get(u);if(A){let D=Bn._fromJSON(e,A);T!==a&&(h=D),a=T;break}}catch{}let I=s.filter(T=>T._shouldAllowMigration);return!a._shouldAllowMigration||!I.length?new t(a,e,i):(a=I[0],h&&(yield a._set(u,h.toJSON())),yield Promise.all(n.map(T=>g(this,null,function*(){if(T!==a)try{yield T._remove(u)}catch{}}))),new t(a,e,i))})}};function sh(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ch(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bh(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rh(e))return"Blackberry";if(kh(e))return"Webos";if(Ah(e))return"Safari";if((e.includes("chrome/")||Sh(e))&&!e.includes("edge/"))return"Chrome";if(Ph(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function bh(t=he()){return/firefox\//i.test(t)}function Ah(t=he()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sh(t=he()){return/crios\//i.test(t)}function Ch(t=he()){return/iemobile/i.test(t)}function Ph(t=he()){return/android/i.test(t)}function Rh(t=he()){return/blackberry/i.test(t)}function kh(t=he()){return/webos/i.test(t)}function ta(t=he()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zg(t=he()){var e;return ta(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e_(){return Nu()&&document.documentMode===10}function Nh(t=he()){return ta(t)||Ph(t)||kh(t)||Rh(t)||/windows phone/i.test(t)||Ch(t)}function Dh(t,e=[]){let n;switch(t){case"Browser":n=sh(he());break;case"Worker":n=`${sh(he())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zt}/${i}`}var Lo=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=a=>new Promise((u,h)=>{try{let I=e(a);u(I)}catch(I){h(I)}});i.onAbort=n,this.queue.push(i);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){return g(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function t_(n){return g(this,arguments,function*(t,e={}){return jn(t,"GET","/v2/passwordPolicy",Jo(t,e))})}var n_=6,Fo=class{constructor(e){var n,i,s,a;let u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:n_,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,a,u,h;let I={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,I),this.validatePasswordCharacterOptions(e,I),I.isValid&&(I.isValid=(n=I.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),I.isValid&&(I.isValid=(i=I.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),I.isValid&&(I.isValid=(s=I.containsLowercaseLetter)!==null&&s!==void 0?s:!0),I.isValid&&(I.isValid=(a=I.containsUppercaseLetter)!==null&&a!==void 0?a:!0),I.isValid&&(I.isValid=(u=I.containsNumericCharacter)!==null&&u!==void 0?u:!0),I.isValid&&(I.isValid=(h=I.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),I}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}};var Uo=class{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lr(this),this.idTokenSubscription=new Lr(this),this.beforeStateQueue=new Lo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vt(n)),this._initializationPromise=this.queue(()=>g(this,null,function*(){var i,s;if(!this._deleted&&(this.persistenceManager=yield Vr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return g(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return g(this,null,function*(){try{let n=yield Eh(this,{idToken:e}),i=yield Bn._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return g(this,null,function*(){var n;if(dt(this.app)){let u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),s=i,a=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s?._redirectEventId,I=yield this.tryRedirectSignIn(e);(!u||u===h)&&I?.user&&(s=I.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{yield this.beforeStateQueue.runMiddleware(s)}catch(u){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)})}tryRedirectSignIn(e){return g(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return g(this,null,function*(){try{yield Mr(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$g()}_delete(){return g(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return g(this,null,function*(){if(dt(this.app))return Promise.reject(yn(this));let n=e?Ue(e):null;return n&&O(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return g(this,null,function*(){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>g(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return g(this,null,function*(){return dt(this.app)?Promise.reject(yn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return dt(this.app)?Promise.reject(yn(this)):this.queue(()=>g(this,null,function*(){yield this.assertedPersistence.setPersistence(vt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return g(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return g(this,null,function*(){let e=yield t_(this),n=new Fo(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Le("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return g(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Jg(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return g(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return g(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&vt(e)||this._popupRedirectResolver;O(n,this,"argument-error"),this.redirectPersistenceManager=yield Vr.create(this,[vt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return g(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>g(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return g(this,null,function*(){if(e===this.currentUser)return this.queue(()=>g(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};let a=typeof n=="function"?n:n.next.bind(n),u=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(h,this,"internal-error"),h.then(()=>{u||a(this.currentUser)}),typeof n=="function"){let I=e.addObserver(n,i,s);return()=>{u=!0,I()}}else{let I=e.addObserver(n);return()=>{u=!0,I()}}}directlySetCurrentUser(e){return g(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return g(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let s=yield this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n})}_getAppCheckToken(){return g(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&qg(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function na(t){return Ue(t)}var Lr=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=xu(n=>this.observer=n)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ia={loadJS(){return g(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i_(t){ia=t}function r_(t){return ia.loadJS(t)}function s_(){return ia.gapiScript}function Oh(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function ra(t,e){let n=et(t,"auth");if(n.isInitialized()){let s=n.getImmediate(),a=n.getOptions();if(ln(a,e??{}))return s;Yt(s,"already-initialized")}return n.initialize({options:e})}function o_(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(vt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function sa(t,e,n){let i=na(t);O(i._canInitEmulator,i,"emulator-config-failed"),O(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let s=!!n?.disableWarnings,a=xh(e),{host:u,port:h}=a_(e),I=h===null?"":`:${h}`;i.config.emulator={url:`${a}//${u}${I}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||c_()}function xh(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function a_(t){let e=xh(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){let a=s[1];return{host:a,port:oh(i.substr(a.length+1))}}else{let[a,u]=i.split(":");return{host:a,port:oh(u)}}}function oh(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function c_(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Fr=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return yt("not implemented")}_getIdTokenResponse(e){return yt("not implemented")}_linkToIdToken(e,n){return yt("not implemented")}_getReauthenticationResolver(e){return yt("not implemented")}};function No(t,e){return g(this,null,function*(){return Wg(t,"POST","/v1/accounts:signInWithIdp",Jo(t,e))})}var Ur=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var qo=class extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ki=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,s=!1){return g(this,null,function*(){let a=yield Bn._fromIdTokenResponse(e,i,s),u=ah(i);return new t({user:a,providerId:u,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return g(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let s=ah(i);return new t({user:e,providerId:s,_tokenResponse:i,operationType:n})})}};function ah(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Bo=class t extends Ce{constructor(e,n,i,s){var a;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new t(e,n,i,s)}};function Mh(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Bo._fromErrorAndOperation(t,a,e,i):a})}function u_(t,e,n=!1){return g(this,null,function*(){let i=yield Pi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ki._forOperation(t,"link",i)})}function l_(t,e,n=!1){return g(this,null,function*(){let{auth:i}=t;if(dt(i.app))return Promise.reject(yn(i));let s="reauthenticate";try{let a=yield Pi(t,Mh(i,s,e,t),n);O(a.idToken,i,"internal-error");let u=Zo(a.idToken);O(u,i,"internal-error");let{sub:h}=u;return O(t.uid===h,i,"user-mismatch"),ki._forOperation(t,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&Yt(i,"user-mismatch"),a}})}function h_(t,e,n=!1){return g(this,null,function*(){if(dt(t.app))return Promise.reject(yn(t));let i="signIn",s=yield Mh(t,i,e),a=yield ki._fromIdTokenResponse(t,i,s);return n||(yield t._updateCurrentUser(a.user)),a})}function oa(t,e,n,i){return Ue(t).onIdTokenChanged(e,n,i)}function aa(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}var qr="__sak";var Br=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qr,"1"),this.storage.removeItem(qr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var d_=1e3,f_=10,p_=(()=>{class t extends Br{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nh(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let s=this.storage.getItem(i),a=this.localCache[i];s!==a&&n(i,a,s)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((h,I,T)=>{this.notifyListeners(h,T)});return}let s=n.key;i?this.detachListener():this.stopPolling();let a=()=>{let h=this.storage.getItem(s);!i&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);e_()&&u!==n.newValue&&n.newValue!==n.oldValue?setTimeout(a,f_):a()}notifyListeners(n,i){this.localCache[n]=i;let s=this.listeners[n];if(s)for(let a of Array.from(s))a(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:s}),!0)})},d_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return g(this,null,function*(){yield At(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return g(this,null,function*(){let i=yield At(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return g(this,null,function*(){yield At(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Vh=p_;var m_=(()=>{class t extends Br{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),ca=m_;function g_(t){return Promise.all(t.map(e=>g(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var __=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(a=>a.isListeningto(n));if(i)return i;let s=new t(n);return this.receivers.push(s),s}isListeningto(n){return this.eventTarget===n}handleEvent(n){return g(this,null,function*(){let i=n,{eventId:s,eventType:a,data:u}=i.data,h=this.handlersMap[a];if(!h?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:a});let I=Array.from(h).map(A=>g(this,null,function*(){return A(i.origin,u)})),T=yield g_(I);i.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:T})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Lh(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var jo=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return g(this,null,function*(){let s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((h,I)=>{let T=Lh("",20);s.port1.start();let A=setTimeout(()=>{I(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(D){let M=D;if(M.data.eventId===T)switch(M.data.status){case"ack":clearTimeout(A),a=setTimeout(()=>{I(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(M.data.response);break;default:clearTimeout(A),clearTimeout(a),I(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:T,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})})}};function tt(){return window}function y_(t){tt().location.href=t}function Fh(){return typeof tt().WorkerGlobalScope<"u"&&typeof tt().importScripts=="function"}function v_(){return g(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function w_(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function I_(){return Fh()?self:null}var Uh="firebaseLocalStorageDb",E_=1,jr="firebaseLocalStorage",qh="fbase_key",In=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function zr(t,e){return t.transaction([jr],e?"readwrite":"readonly").objectStore(jr)}function T_(){let t=indexedDB.deleteDatabase(Uh);return new In(t).toPromise()}function $o(){let t=indexedDB.open(Uh,E_);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(jr,{keyPath:qh})}catch(s){n(s)}}),t.addEventListener("success",()=>g(this,null,function*(){let i=t.result;i.objectStoreNames.contains(jr)?e(i):(i.close(),yield T_(),e(yield $o()))}))})}function ch(t,e,n){return g(this,null,function*(){let i=zr(t,!0).put({[qh]:e,value:n});return new In(i).toPromise()})}function b_(t,e){return g(this,null,function*(){let n=zr(t,!1).get(e),i=yield new In(n).toPromise();return i===void 0?null:i.value})}function uh(t,e){let n=zr(t,!0).delete(e);return new In(n).toPromise()}var A_=800,S_=3,C_=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return g(this,null,function*(){return this.db?this.db:(this.db=yield $o(),this.db)})}_withRetries(n){return g(this,null,function*(){let i=0;for(;;)try{let s=yield this._openDb();return yield n(s)}catch(s){if(i++>S_)throw s;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return g(this,null,function*(){return Fh()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return g(this,null,function*(){this.receiver=__._getInstance(I_()),this.receiver._subscribe("keyChanged",(n,i)=>g(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>g(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return g(this,null,function*(){var n,i;if(this.activeServiceWorker=yield v_(),!this.activeServiceWorker)return;this.sender=new jo(this.activeServiceWorker);let s=yield this.sender._send("ping",{},800);s&&!((n=s[0])===null||n===void 0)&&n.fulfilled&&!((i=s[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return g(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||w_()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return g(this,null,function*(){try{if(!indexedDB)return!1;let n=yield $o();return yield ch(n,qr,"1"),yield uh(n,qr),!0}catch{}return!1})}_withPendingWrite(n){return g(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(s=>ch(s,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return g(this,null,function*(){let i=yield this._withRetries(s=>b_(s,n));return this.localCache[n]=i,i})}_remove(n){return g(this,null,function*(){return this._withPendingWrite(()=>g(this,null,function*(){return yield this._withRetries(i=>uh(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return g(this,null,function*(){let n=yield this._withRetries(a=>{let u=zr(a,!1).getAll();return new In(u).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],s=new Set;if(n.length!==0)for(let{fbase_key:a,value:u}of n)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),i.push(a));for(let a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),i.push(a));return i})}notifyListeners(n,i){this.localCache[n]=i;let s=this.listeners[n];if(s)for(let a of Array.from(s))a(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>g(this,null,function*(){return this._poll()}),A_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Bh=C_;var s1=Oh("rcb"),o1=new wn(3e4,6e4);function P_(t,e){return e?vt(e):(O(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ni=class extends Fr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function R_(t){return h_(t.auth,new Ni(t),t.bypassAuthState)}function k_(t){let{auth:e,user:n}=t;return O(n,e,"internal-error"),l_(n,new Ni(t),t.bypassAuthState)}function N_(t){return g(this,null,function*(){let{auth:e,user:n}=t;return O(n,e,"internal-error"),u_(n,new Ni(t),t.bypassAuthState)})}var zo=class{constructor(e,n,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>g(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return g(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:s,tenantId:a,error:u,type:h}=e;if(u){this.reject(u);return}let I={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(h)(I))}catch(T){this.reject(T)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return R_;case"linkViaPopup":case"linkViaRedirect":return N_;case"reauthViaPopup":case"reauthViaRedirect":return k_;default:Yt(this.auth,"internal-error")}}resolve(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var a1=new wn(2e3,1e4);var D_="pendingRedirect",Nr=new Map,Go=class t extends zo{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return g(this,null,function*(){let e=Nr.get(this.auth._key());if(!e){try{let i=(yield O_(this.resolver,this.auth))?yield At(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Nr.set(this.auth._key(),e)}return this.bypassAuthState||Nr.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return g(this,null,function*(){if(e.type==="signInViaRedirect")return At(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,At(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return g(this,null,function*(){})}cleanUp(){}};function O_(t,e){return g(this,null,function*(){let n=V_(e),i=M_(t);if(!(yield i._isAvailable()))return!1;let s=(yield i._get(n))==="true";return yield i._remove(n),s})}function x_(t,e){Nr.set(t._key(),e)}function M_(t){return vt(t._redirectPersistence)}function V_(t){return kr(D_,t.config.apiKey,t.name)}function L_(t,e,n=!1){return g(this,null,function*(){if(dt(t.app))return Promise.reject(yn(t));let i=na(t),s=P_(i,e),u=yield new Go(i,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,yield i._persistUserIfCurrent(u.user),yield i._setRedirectUser(null,e)),u})}var F_=10*60*1e3,Wo=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!U_(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!jh(e)){let s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=F_&&this.cachedEventUids.clear(),this.cachedEventUids.has(lh(e))}saveEventToCache(e){this.cachedEventUids.add(lh(e)),this.lastProcessedEventTime=Date.now()}};function lh(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function jh({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function U_(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jh(t);default:return!1}}function q_(n){return g(this,arguments,function*(t,e={}){return jn(t,"GET","/v1/projects",e)})}var B_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j_=/^https?/;function $_(t){return g(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield q_(t);for(let n of e)try{if(z_(n))return}catch{}Yt(t,"unauthorized-domain")})}function z_(t){let e=Oo(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!j_.test(n))return!1;if(B_.test(t))return i===t;let s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var G_=new wn(3e4,6e4);function hh(){let t=tt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function W_(t){return new Promise((e,n)=>{var i,s,a;function u(){hh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hh(),n(vn(t,"network-request-failed"))},timeout:G_.get()})}if(!((s=(i=tt().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=tt().gapi)===null||a===void 0)&&a.load)u();else{let h=Oh("iframefcb");return tt()[h]=()=>{gapi.load?u():n(vn(t,"network-request-failed"))},r_(`${s_()}?onload=${h}`).catch(I=>n(I))}}).catch(e=>{throw Dr=null,e})}var Dr=null;function K_(t){return Dr=Dr||W_(t),Dr}var H_=new wn(5e3,15e3),Q_="__/auth/iframe",Y_="emulator/auth/iframe",J_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},X_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z_(t){let e=t.config;O(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Yo(e,Y_):`https://${t.config.authDomain}/${Q_}`,i={apiKey:e.apiKey,appName:t.name,v:zt},s=X_.get(t.config.apiHost);s&&(i.eid=s);let a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${Ei(i).slice(1)}`}function ey(t){return g(this,null,function*(){let e=yield K_(t),n=tt().gapi;return O(n,t,"internal-error"),e.open({where:document.body,url:Z_(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J_,dontclear:!0},i=>new Promise((s,a)=>g(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let u=vn(t,"network-request-failed"),h=tt().setTimeout(()=>{a(u)},H_.get());function I(){tt().clearTimeout(h),s(i)}i.ping(I).then(I,()=>{a(u)})})))})}var ty={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ny=500,iy=600,ry="_blank",sy="http://localhost",$r=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function oy(t,e,n,i=ny,s=iy){let a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),h="",I=Object.assign(Object.assign({},ty),{width:i.toString(),height:s.toString(),top:a,left:u}),T=he().toLowerCase();n&&(h=Sh(T)?ry:n),bh(T)&&(e=e||sy,I.scrollbars="yes");let A=Object.entries(I).reduce((M,[ne,q])=>`${M}${ne}=${q},`,"");if(Zg(T)&&h!=="_self")return ay(e||"",h),new $r(null);let D=window.open(e||"",h,A);O(D,t,"popup-blocked");try{D.focus()}catch{}return new $r(D)}function ay(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var cy="__/auth/handler",uy="emulator/auth/handler",ly=encodeURIComponent("fac");function dh(t,e,n,i,s,a){return g(this,null,function*(){O(t.config.authDomain,t,"auth-domain-config-required"),O(t.config.apiKey,t,"invalid-api-key");let u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:zt,eventId:s};if(e instanceof Ur){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",Ou(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(let[A,D]of Object.entries(a||{}))u[A]=D}if(e instanceof qo){let A=e.getScopes().filter(D=>D!=="");A.length>0&&(u.scopes=A.join(","))}t.tenantId&&(u.tid=t.tenantId);let h=u;for(let A of Object.keys(h))h[A]===void 0&&delete h[A];let I=yield t._getAppCheckToken(),T=I?`#${ly}=${encodeURIComponent(I)}`:"";return`${hy(t)}?${Ei(h).slice(1)}${T}`})}function hy({config:t}){return t.emulator?Yo(t,uy):`https://${t.authDomain}/${cy}`}var Do="webStorageSupport",Ko=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ca,this._completeRedirectFn=L_,this._overrideRedirectResult=x_}_openPopup(e,n,i,s){return g(this,null,function*(){var a;Jt((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");let u=yield dh(e,n,i,Oo(),s);return oy(e,u,Lh())})}_openRedirect(e,n,i,s){return g(this,null,function*(){yield this._originValidation(e);let a=yield dh(e,n,i,Oo(),s);return y_(a),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Jt(a,"If manager is not set, promise should be"),a)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return g(this,null,function*(){let n=yield ey(e),i=new Wo(e);return n.register("authEvent",s=>(O(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Do,{type:Do},s=>{var a;let u=(a=s?.[0])===null||a===void 0?void 0:a[Do];u!==void 0&&n(!!u),Yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$_(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nh()||Ah()||ta()}},$h=Ko;var fh="@firebase/auth",ph="1.7.9";var Ho=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return g(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dy(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fy(t){Oe(new ue("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;O(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});let I={apiKey:u,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dh(t)},T=new Uo(i,s,a,I);return o_(T,n),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Oe(new ue("auth-internal",e=>{let n=na(e.getProvider("auth").getImmediate());return(i=>new Ho(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Q(fh,ph,dy(t)),Q(fh,ph,"esm2017")}var py=5*60,my=$s("authIdTokenMaxAge")||py,mh=null,gy=t=>e=>g(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>my)return;let s=n?.token;mh!==s&&(mh=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});function ua(t=ft()){let e=et(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ra(t,{popupRedirectResolver:$h,persistence:[Bh,Vh,ca]}),i=$s("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let a=new URL(i,location.origin);if(location.origin===a.origin){let u=gy(a.toString());aa(n,u,()=>u(n.currentUser)),oa(n,h=>u(h))}}let s=Bs("auth");return s&&sa(n,`http://${s}`),n}function _y(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}i_({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{let a=vn("internal-error");a.customData=s,n(a)},i.type="text/javascript",i.charset="UTF-8",_y().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fy("Browser");var zh="auth",Di=class{constructor(e){return e}},Oi=class{constructor(){return _n(zh)}};var la=new He("angularfire2.auth-instances");function hv(t,e){let n=Ln(zh,t,e);return n&&new Di(n)}function dv(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Di(i)}}var fv={provide:Oi,deps:[[new be,la]]},pv={provide:Di,useFactory:hv,deps:[[new be,la],Ge]},mv=(()=>{class t{constructor(){Q("angularfire",mt.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$({type:t});static \u0275inj=j({providers:[pv,fv]})}return t})();function Gh(t,...e){return{ngModule:mv,providers:[{provide:la,useFactory:dv(t),multi:!0,deps:[Qe,St,Gt,gt,[new be,Vn],...e]}]}}var Wh=Wt(ua,!0);var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hh={};var ha,Qh;(function(){var t;function e(v,d){function p(){}p.prototype=d.prototype,v.D=d.prototype,v.prototype=new p,v.prototype.constructor=v,v.C=function(m,_,w){for(var f=Array(arguments.length-2),st=2;st<arguments.length;st++)f[st-2]=arguments[st];return d.prototype[_].apply(m,f)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,d,p){p||(p=0);var m=Array(16);if(typeof d=="string")for(var _=0;16>_;++_)m[_]=d.charCodeAt(p++)|d.charCodeAt(p++)<<8|d.charCodeAt(p++)<<16|d.charCodeAt(p++)<<24;else for(_=0;16>_;++_)m[_]=d[p++]|d[p++]<<8|d[p++]<<16|d[p++]<<24;d=v.g[0],p=v.g[1],_=v.g[2];var w=v.g[3],f=d+(w^p&(_^w))+m[0]+3614090360&4294967295;d=p+(f<<7&4294967295|f>>>25),f=w+(_^d&(p^_))+m[1]+3905402710&4294967295,w=d+(f<<12&4294967295|f>>>20),f=_+(p^w&(d^p))+m[2]+606105819&4294967295,_=w+(f<<17&4294967295|f>>>15),f=p+(d^_&(w^d))+m[3]+3250441966&4294967295,p=_+(f<<22&4294967295|f>>>10),f=d+(w^p&(_^w))+m[4]+4118548399&4294967295,d=p+(f<<7&4294967295|f>>>25),f=w+(_^d&(p^_))+m[5]+1200080426&4294967295,w=d+(f<<12&4294967295|f>>>20),f=_+(p^w&(d^p))+m[6]+2821735955&4294967295,_=w+(f<<17&4294967295|f>>>15),f=p+(d^_&(w^d))+m[7]+4249261313&4294967295,p=_+(f<<22&4294967295|f>>>10),f=d+(w^p&(_^w))+m[8]+1770035416&4294967295,d=p+(f<<7&4294967295|f>>>25),f=w+(_^d&(p^_))+m[9]+2336552879&4294967295,w=d+(f<<12&4294967295|f>>>20),f=_+(p^w&(d^p))+m[10]+4294925233&4294967295,_=w+(f<<17&4294967295|f>>>15),f=p+(d^_&(w^d))+m[11]+2304563134&4294967295,p=_+(f<<22&4294967295|f>>>10),f=d+(w^p&(_^w))+m[12]+1804603682&4294967295,d=p+(f<<7&4294967295|f>>>25),f=w+(_^d&(p^_))+m[13]+4254626195&4294967295,w=d+(f<<12&4294967295|f>>>20),f=_+(p^w&(d^p))+m[14]+2792965006&4294967295,_=w+(f<<17&4294967295|f>>>15),f=p+(d^_&(w^d))+m[15]+1236535329&4294967295,p=_+(f<<22&4294967295|f>>>10),f=d+(_^w&(p^_))+m[1]+4129170786&4294967295,d=p+(f<<5&4294967295|f>>>27),f=w+(p^_&(d^p))+m[6]+3225465664&4294967295,w=d+(f<<9&4294967295|f>>>23),f=_+(d^p&(w^d))+m[11]+643717713&4294967295,_=w+(f<<14&4294967295|f>>>18),f=p+(w^d&(_^w))+m[0]+3921069994&4294967295,p=_+(f<<20&4294967295|f>>>12),f=d+(_^w&(p^_))+m[5]+3593408605&4294967295,d=p+(f<<5&4294967295|f>>>27),f=w+(p^_&(d^p))+m[10]+38016083&4294967295,w=d+(f<<9&4294967295|f>>>23),f=_+(d^p&(w^d))+m[15]+3634488961&4294967295,_=w+(f<<14&4294967295|f>>>18),f=p+(w^d&(_^w))+m[4]+3889429448&4294967295,p=_+(f<<20&4294967295|f>>>12),f=d+(_^w&(p^_))+m[9]+568446438&4294967295,d=p+(f<<5&4294967295|f>>>27),f=w+(p^_&(d^p))+m[14]+3275163606&4294967295,w=d+(f<<9&4294967295|f>>>23),f=_+(d^p&(w^d))+m[3]+4107603335&4294967295,_=w+(f<<14&4294967295|f>>>18),f=p+(w^d&(_^w))+m[8]+1163531501&4294967295,p=_+(f<<20&4294967295|f>>>12),f=d+(_^w&(p^_))+m[13]+2850285829&4294967295,d=p+(f<<5&4294967295|f>>>27),f=w+(p^_&(d^p))+m[2]+4243563512&4294967295,w=d+(f<<9&4294967295|f>>>23),f=_+(d^p&(w^d))+m[7]+1735328473&4294967295,_=w+(f<<14&4294967295|f>>>18),f=p+(w^d&(_^w))+m[12]+2368359562&4294967295,p=_+(f<<20&4294967295|f>>>12),f=d+(p^_^w)+m[5]+4294588738&4294967295,d=p+(f<<4&4294967295|f>>>28),f=w+(d^p^_)+m[8]+2272392833&4294967295,w=d+(f<<11&4294967295|f>>>21),f=_+(w^d^p)+m[11]+1839030562&4294967295,_=w+(f<<16&4294967295|f>>>16),f=p+(_^w^d)+m[14]+4259657740&4294967295,p=_+(f<<23&4294967295|f>>>9),f=d+(p^_^w)+m[1]+2763975236&4294967295,d=p+(f<<4&4294967295|f>>>28),f=w+(d^p^_)+m[4]+1272893353&4294967295,w=d+(f<<11&4294967295|f>>>21),f=_+(w^d^p)+m[7]+4139469664&4294967295,_=w+(f<<16&4294967295|f>>>16),f=p+(_^w^d)+m[10]+3200236656&4294967295,p=_+(f<<23&4294967295|f>>>9),f=d+(p^_^w)+m[13]+681279174&4294967295,d=p+(f<<4&4294967295|f>>>28),f=w+(d^p^_)+m[0]+3936430074&4294967295,w=d+(f<<11&4294967295|f>>>21),f=_+(w^d^p)+m[3]+3572445317&4294967295,_=w+(f<<16&4294967295|f>>>16),f=p+(_^w^d)+m[6]+76029189&4294967295,p=_+(f<<23&4294967295|f>>>9),f=d+(p^_^w)+m[9]+3654602809&4294967295,d=p+(f<<4&4294967295|f>>>28),f=w+(d^p^_)+m[12]+3873151461&4294967295,w=d+(f<<11&4294967295|f>>>21),f=_+(w^d^p)+m[15]+530742520&4294967295,_=w+(f<<16&4294967295|f>>>16),f=p+(_^w^d)+m[2]+3299628645&4294967295,p=_+(f<<23&4294967295|f>>>9),f=d+(_^(p|~w))+m[0]+4096336452&4294967295,d=p+(f<<6&4294967295|f>>>26),f=w+(p^(d|~_))+m[7]+1126891415&4294967295,w=d+(f<<10&4294967295|f>>>22),f=_+(d^(w|~p))+m[14]+2878612391&4294967295,_=w+(f<<15&4294967295|f>>>17),f=p+(w^(_|~d))+m[5]+4237533241&4294967295,p=_+(f<<21&4294967295|f>>>11),f=d+(_^(p|~w))+m[12]+1700485571&4294967295,d=p+(f<<6&4294967295|f>>>26),f=w+(p^(d|~_))+m[3]+2399980690&4294967295,w=d+(f<<10&4294967295|f>>>22),f=_+(d^(w|~p))+m[10]+4293915773&4294967295,_=w+(f<<15&4294967295|f>>>17),f=p+(w^(_|~d))+m[1]+2240044497&4294967295,p=_+(f<<21&4294967295|f>>>11),f=d+(_^(p|~w))+m[8]+1873313359&4294967295,d=p+(f<<6&4294967295|f>>>26),f=w+(p^(d|~_))+m[15]+4264355552&4294967295,w=d+(f<<10&4294967295|f>>>22),f=_+(d^(w|~p))+m[6]+2734768916&4294967295,_=w+(f<<15&4294967295|f>>>17),f=p+(w^(_|~d))+m[13]+1309151649&4294967295,p=_+(f<<21&4294967295|f>>>11),f=d+(_^(p|~w))+m[4]+4149444226&4294967295,d=p+(f<<6&4294967295|f>>>26),f=w+(p^(d|~_))+m[11]+3174756917&4294967295,w=d+(f<<10&4294967295|f>>>22),f=_+(d^(w|~p))+m[2]+718787259&4294967295,_=w+(f<<15&4294967295|f>>>17),f=p+(w^(_|~d))+m[9]+3951481745&4294967295,v.g[0]=v.g[0]+d&4294967295,v.g[1]=v.g[1]+(_+(f<<21&4294967295|f>>>11))&4294967295,v.g[2]=v.g[2]+_&4294967295,v.g[3]=v.g[3]+w&4294967295}i.prototype.u=function(v,d){d===void 0&&(d=v.length);for(var p=d-this.blockSize,m=this.B,_=this.h,w=0;w<d;){if(_==0)for(;w<=p;)s(this,v,w),w+=this.blockSize;if(typeof v=="string"){for(;w<d;)if(m[_++]=v.charCodeAt(w++),_==this.blockSize){s(this,m),_=0;break}}else for(;w<d;)if(m[_++]=v[w++],_==this.blockSize){s(this,m),_=0;break}}this.h=_,this.o+=d},i.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var d=1;d<v.length-8;++d)v[d]=0;var p=8*this.o;for(d=v.length-8;d<v.length;++d)v[d]=p&255,p/=256;for(this.u(v),v=Array(16),d=p=0;4>d;++d)for(var m=0;32>m;m+=8)v[p++]=this.g[d]>>>m&255;return v};function a(v,d){var p=h;return Object.prototype.hasOwnProperty.call(p,v)?p[v]:p[v]=d(v)}function u(v,d){this.h=d;for(var p=[],m=!0,_=v.length-1;0<=_;_--){var w=v[_]|0;m&&w==d||(p[_]=w,m=!1)}this.g=p}var h={};function I(v){return-128<=v&&128>v?a(v,function(d){return new u([d|0],0>d?-1:0)}):new u([v|0],0>v?-1:0)}function T(v){if(isNaN(v)||!isFinite(v))return D;if(0>v)return J(T(-v));for(var d=[],p=1,m=0;v>=p;m++)d[m]=v/p|0,p*=4294967296;return new u(d,0)}function A(v,d){if(v.length==0)throw Error("number format error: empty string");if(d=d||10,2>d||36<d)throw Error("radix out of range: "+d);if(v.charAt(0)=="-")return J(A(v.substring(1),d));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=T(Math.pow(d,8)),m=D,_=0;_<v.length;_+=8){var w=Math.min(8,v.length-_),f=parseInt(v.substring(_,_+w),d);8>w?(w=T(Math.pow(d,w)),m=m.j(w).add(T(f))):(m=m.j(p),m=m.add(T(f)))}return m}var D=I(0),M=I(1),ne=I(16777216);t=u.prototype,t.m=function(){if(re(this))return-J(this).m();for(var v=0,d=1,p=0;p<this.g.length;p++){var m=this.i(p);v+=(0<=m?m:4294967296+m)*d,d*=4294967296}return v},t.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(q(this))return"0";if(re(this))return"-"+J(this).toString(v);for(var d=T(Math.pow(v,6)),p=this,m="";;){var _=Be(p,d).g;p=rt(p,_.j(d));var w=((0<p.g.length?p.g[0]:p.h)>>>0).toString(v);if(p=_,q(p))return w+m;for(;6>w.length;)w="0"+w;m=w+m}},t.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function q(v){if(v.h!=0)return!1;for(var d=0;d<v.g.length;d++)if(v.g[d]!=0)return!1;return!0}function re(v){return v.h==-1}t.l=function(v){return v=rt(this,v),re(v)?-1:q(v)?0:1};function J(v){for(var d=v.g.length,p=[],m=0;m<d;m++)p[m]=~v.g[m];return new u(p,~v.h).add(M)}t.abs=function(){return re(this)?J(this):this},t.add=function(v){for(var d=Math.max(this.g.length,v.g.length),p=[],m=0,_=0;_<=d;_++){var w=m+(this.i(_)&65535)+(v.i(_)&65535),f=(w>>>16)+(this.i(_)>>>16)+(v.i(_)>>>16);m=f>>>16,w&=65535,f&=65535,p[_]=f<<16|w}return new u(p,p[p.length-1]&-2147483648?-1:0)};function rt(v,d){return v.add(J(d))}t.j=function(v){if(q(this)||q(v))return D;if(re(this))return re(v)?J(this).j(J(v)):J(J(this).j(v));if(re(v))return J(this.j(J(v)));if(0>this.l(ne)&&0>v.l(ne))return T(this.m()*v.m());for(var d=this.g.length+v.g.length,p=[],m=0;m<2*d;m++)p[m]=0;for(m=0;m<this.g.length;m++)for(var _=0;_<v.g.length;_++){var w=this.i(m)>>>16,f=this.i(m)&65535,st=v.i(_)>>>16,Kn=v.i(_)&65535;p[2*m+2*_]+=f*Kn,Me(p,2*m+2*_),p[2*m+2*_+1]+=w*Kn,Me(p,2*m+2*_+1),p[2*m+2*_+1]+=f*st,Me(p,2*m+2*_+1),p[2*m+2*_+2]+=w*st,Me(p,2*m+2*_+2)}for(m=0;m<d;m++)p[m]=p[2*m+1]<<16|p[2*m];for(m=d;m<2*d;m++)p[m]=0;return new u(p,0)};function Me(v,d){for(;(v[d]&65535)!=v[d];)v[d+1]+=v[d]>>>16,v[d]&=65535,d++}function pe(v,d){this.g=v,this.h=d}function Be(v,d){if(q(d))throw Error("division by zero");if(q(v))return new pe(D,D);if(re(v))return d=Be(J(v),d),new pe(J(d.g),J(d.h));if(re(d))return d=Be(v,J(d)),new pe(J(d.g),d.h);if(30<v.g.length){if(re(v)||re(d))throw Error("slowDivide_ only works with positive integers.");for(var p=M,m=d;0>=m.l(v);)p=Zt(p),m=Zt(m);var _=Re(p,1),w=Re(m,1);for(m=Re(m,2),p=Re(p,2);!q(m);){var f=w.add(m);0>=f.l(v)&&(_=_.add(p),w=f),m=Re(m,1),p=Re(p,1)}return d=rt(v,_.j(d)),new pe(_,d)}for(_=D;0<=v.l(d);){for(p=Math.max(1,Math.floor(v.m()/d.m())),m=Math.ceil(Math.log(p)/Math.LN2),m=48>=m?1:Math.pow(2,m-48),w=T(p),f=w.j(d);re(f)||0<f.l(v);)p-=m,w=T(p),f=w.j(d);q(w)&&(w=M),_=_.add(w),v=rt(v,f)}return new pe(_,v)}t.A=function(v){return Be(this,v).h},t.and=function(v){for(var d=Math.max(this.g.length,v.g.length),p=[],m=0;m<d;m++)p[m]=this.i(m)&v.i(m);return new u(p,this.h&v.h)},t.or=function(v){for(var d=Math.max(this.g.length,v.g.length),p=[],m=0;m<d;m++)p[m]=this.i(m)|v.i(m);return new u(p,this.h|v.h)},t.xor=function(v){for(var d=Math.max(this.g.length,v.g.length),p=[],m=0;m<d;m++)p[m]=this.i(m)^v.i(m);return new u(p,this.h^v.h)};function Zt(v){for(var d=v.g.length+1,p=[],m=0;m<d;m++)p[m]=v.i(m)<<1|v.i(m-1)>>>31;return new u(p,v.h)}function Re(v,d){var p=d>>5;d%=32;for(var m=v.g.length-p,_=[],w=0;w<m;w++)_[w]=0<d?v.i(w+p)>>>d|v.i(w+p+1)<<32-d:v.i(w+p);return new u(_,v.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Qh=Hh.Md5=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=T,u.fromString=A,ha=Hh.Integer=u}).apply(typeof Kh<"u"?Kh:typeof self<"u"?self:typeof window<"u"?window:{});var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wt={};var Yh,gv,Jh,Xh,Zh,ed,td,nd,id;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,o,c){return r==Array.prototype||r==Object.prototype||(r[o]=c.value),r};function n(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gr=="object"&&Gr];for(var o=0;o<r.length;++o){var c=r[o];if(c&&c.Math==Math)return c}throw Error("Cannot find global object")}var i=n(this);function s(r,o){if(o)e:{var c=i;r=r.split(".");for(var l=0;l<r.length-1;l++){var y=r[l];if(!(y in c))break e;c=c[y]}r=r[r.length-1],l=c[r],o=o(l),o!=l&&o!=null&&e(c,r,{configurable:!0,writable:!0,value:o})}}function a(r,o){r instanceof String&&(r+="");var c=0,l=!1,y={next:function(){if(!l&&c<r.length){var E=c++;return{value:o(E,r[E]),done:!1}}return l=!0,{done:!0,value:void 0}}};return y[Symbol.iterator]=function(){return y},y}s("Array.prototype.values",function(r){return r||function(){return a(this,function(o,c){return c})}});var u=u||{},h=this||self;function I(r){var o=typeof r;return o=o!="object"?o:r?Array.isArray(r)?"array":o:"null",o=="array"||o=="object"&&typeof r.length=="number"}function T(r){var o=typeof r;return o=="object"&&r!=null||o=="function"}function A(r,o,c){return r.call.apply(r.bind,arguments)}function D(r,o,c){if(!r)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(y,l),r.apply(o,y)}}return function(){return r.apply(o,arguments)}}function M(r,o,c){return M=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:D,M.apply(null,arguments)}function ne(r,o){var c=Array.prototype.slice.call(arguments,1);return function(){var l=c.slice();return l.push.apply(l,arguments),r.apply(this,l)}}function q(r,o){function c(){}c.prototype=o.prototype,r.aa=o.prototype,r.prototype=new c,r.prototype.constructor=r,r.Qb=function(l,y,E){for(var C=Array(arguments.length-2),K=2;K<arguments.length;K++)C[K-2]=arguments[K];return o.prototype[y].apply(l,C)}}function re(r){let o=r.length;if(0<o){let c=Array(o);for(let l=0;l<o;l++)c[l]=r[l];return c}return[]}function J(r,o){for(let c=1;c<arguments.length;c++){let l=arguments[c];if(I(l)){let y=r.length||0,E=l.length||0;r.length=y+E;for(let C=0;C<E;C++)r[y+C]=l[C]}else r.push(l)}}class rt{constructor(o,c){this.i=o,this.j=c,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}function Me(r){return/^[\s\xa0]*$/.test(r)}function pe(){var r=h.navigator;return r&&(r=r.userAgent)?r:""}function Be(r){return Be[" "](r),r}Be[" "]=function(){};var Zt=pe().indexOf("Gecko")!=-1&&!(pe().toLowerCase().indexOf("webkit")!=-1&&pe().indexOf("Edge")==-1)&&!(pe().indexOf("Trident")!=-1||pe().indexOf("MSIE")!=-1)&&pe().indexOf("Edge")==-1;function Re(r,o,c){for(let l in r)o.call(c,r[l],l,r)}function v(r,o){for(let c in r)o.call(void 0,r[c],c,r)}function d(r){let o={};for(let c in r)o[c]=r[c];return o}let p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function m(r,o){let c,l;for(let y=1;y<arguments.length;y++){l=arguments[y];for(c in l)r[c]=l[c];for(let E=0;E<p.length;E++)c=p[E],Object.prototype.hasOwnProperty.call(l,c)&&(r[c]=l[c])}}function _(r){var o=1;r=r.split(":");let c=[];for(;0<o&&r.length;)c.push(r.shift()),o--;return r.length&&c.push(r.join(":")),c}function w(r){h.setTimeout(()=>{throw r},0)}function f(){var r=es;let o=null;return r.g&&(o=r.g,r.g=r.g.next,r.g||(r.h=null),o.next=null),o}class st{constructor(){this.h=this.g=null}add(o,c){let l=Kn.get();l.set(o,c),this.h?this.h.next=l:this.g=l,this.h=l}}var Kn=new rt(()=>new Td,r=>r.reset());class Td{constructor(){this.next=this.g=this.h=null}set(o,c){this.h=o,this.g=c,this.next=null}reset(){this.next=this.g=this.h=null}}let Hn,Qn=!1,es=new st,ka=()=>{let r=h.Promise.resolve(void 0);Hn=()=>{r.then(bd)}};var bd=()=>{for(var r;r=f();){try{r.h.call(r.g)}catch(c){w(c)}var o=Kn;o.j(r),100>o.h&&(o.h++,r.next=o.g,o.g=r)}Qn=!1};function It(){this.s=this.s,this.C=this.C}It.prototype.s=!1,It.prototype.ma=function(){this.s||(this.s=!0,this.N())},It.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(r,o){this.type=r,this.g=this.target=o,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ad=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var r=!1,o=Object.defineProperty({},"passive",{get:function(){r=!0}});try{let c=()=>{};h.addEventListener("test",c,o),h.removeEventListener("test",c,o)}catch{}return r}();function Yn(r,o){if(me.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var c=this.type=r.type,l=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=o,o=r.relatedTarget){if(Zt){e:{try{Be(o.nodeName);var y=!0;break e}catch{}y=!1}y||(o=null)}}else c=="mouseover"?o=r.fromElement:c=="mouseout"&&(o=r.toElement);this.relatedTarget=o,l?(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:Sd[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Yn.aa.h.call(this)}}q(Yn,me);var Sd={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.aa.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Jn="closure_listenable_"+(1e6*Math.random()|0),Cd=0;function Pd(r,o,c,l,y){this.listener=r,this.proxy=null,this.src=o,this.type=c,this.capture=!!l,this.ha=y,this.key=++Cd,this.da=this.fa=!1}function Li(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Fi(r){this.src=r,this.g={},this.h=0}Fi.prototype.add=function(r,o,c,l,y){var E=r.toString();r=this.g[E],r||(r=this.g[E]=[],this.h++);var C=ns(r,o,l,y);return-1<C?(o=r[C],c||(o.fa=!1)):(o=new Pd(o,this.src,E,!!l,y),o.fa=c,r.push(o)),o};function ts(r,o){var c=o.type;if(c in r.g){var l=r.g[c],y=Array.prototype.indexOf.call(l,o,void 0),E;(E=0<=y)&&Array.prototype.splice.call(l,y,1),E&&(Li(o),r.g[c].length==0&&(delete r.g[c],r.h--))}}function ns(r,o,c,l){for(var y=0;y<r.length;++y){var E=r[y];if(!E.da&&E.listener==o&&E.capture==!!c&&E.ha==l)return y}return-1}var is="closure_lm_"+(1e6*Math.random()|0),rs={};function Na(r,o,c,l,y){if(l&&l.once)return Oa(r,o,c,l,y);if(Array.isArray(o)){for(var E=0;E<o.length;E++)Na(r,o[E],c,l,y);return null}return c=cs(c),r&&r[Jn]?r.K(o,c,T(l)?!!l.capture:!!l,y):Da(r,o,c,!1,l,y)}function Da(r,o,c,l,y,E){if(!o)throw Error("Invalid event type");var C=T(y)?!!y.capture:!!y,K=os(r);if(K||(r[is]=K=new Fi(r)),c=K.add(o,c,l,C,E),c.proxy)return c;if(l=Rd(),c.proxy=l,l.src=r,l.listener=c,r.addEventListener)Ad||(y=C),y===void 0&&(y=!1),r.addEventListener(o.toString(),l,y);else if(r.attachEvent)r.attachEvent(Ma(o.toString()),l);else if(r.addListener&&r.removeListener)r.addListener(l);else throw Error("addEventListener and attachEvent are unavailable.");return c}function Rd(){function r(c){return o.call(r.src,r.listener,c)}let o=kd;return r}function Oa(r,o,c,l,y){if(Array.isArray(o)){for(var E=0;E<o.length;E++)Oa(r,o[E],c,l,y);return null}return c=cs(c),r&&r[Jn]?r.L(o,c,T(l)?!!l.capture:!!l,y):Da(r,o,c,!0,l,y)}function xa(r,o,c,l,y){if(Array.isArray(o))for(var E=0;E<o.length;E++)xa(r,o[E],c,l,y);else l=T(l)?!!l.capture:!!l,c=cs(c),r&&r[Jn]?(r=r.i,o=String(o).toString(),o in r.g&&(E=r.g[o],c=ns(E,c,l,y),-1<c&&(Li(E[c]),Array.prototype.splice.call(E,c,1),E.length==0&&(delete r.g[o],r.h--)))):r&&(r=os(r))&&(o=r.g[o.toString()],r=-1,o&&(r=ns(o,c,l,y)),(c=-1<r?o[r]:null)&&ss(c))}function ss(r){if(typeof r!="number"&&r&&!r.da){var o=r.src;if(o&&o[Jn])ts(o.i,r);else{var c=r.type,l=r.proxy;o.removeEventListener?o.removeEventListener(c,l,r.capture):o.detachEvent?o.detachEvent(Ma(c),l):o.addListener&&o.removeListener&&o.removeListener(l),(c=os(o))?(ts(c,r),c.h==0&&(c.src=null,o[is]=null)):Li(r)}}}function Ma(r){return r in rs?rs[r]:rs[r]="on"+r}function kd(r,o){if(r.da)r=!0;else{o=new Yn(o,this);var c=r.listener,l=r.ha||r.src;r.fa&&ss(r),r=c.call(l,o)}return r}function os(r){return r=r[is],r instanceof Fi?r:null}var as="__closure_events_fn_"+(1e9*Math.random()>>>0);function cs(r){return typeof r=="function"?r:(r[as]||(r[as]=function(o){return r.handleEvent(o)}),r[as])}function ge(){It.call(this),this.i=new Fi(this),this.M=this,this.F=null}q(ge,It),ge.prototype[Jn]=!0,ge.prototype.removeEventListener=function(r,o,c,l){xa(this,r,o,c,l)};function Ee(r,o){var c,l=r.F;if(l)for(c=[];l;l=l.F)c.push(l);if(r=r.M,l=o.type||o,typeof o=="string")o=new me(o,r);else if(o instanceof me)o.target=o.target||r;else{var y=o;o=new me(l,r),m(o,y)}if(y=!0,c)for(var E=c.length-1;0<=E;E--){var C=o.g=c[E];y=Ui(C,l,!0,o)&&y}if(C=o.g=r,y=Ui(C,l,!0,o)&&y,y=Ui(C,l,!1,o)&&y,c)for(E=0;E<c.length;E++)C=o.g=c[E],y=Ui(C,l,!1,o)&&y}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var r=this.i,o;for(o in r.g){for(var c=r.g[o],l=0;l<c.length;l++)Li(c[l]);delete r.g[o],r.h--}}this.F=null},ge.prototype.K=function(r,o,c,l){return this.i.add(String(r),o,!1,c,l)},ge.prototype.L=function(r,o,c,l){return this.i.add(String(r),o,!0,c,l)};function Ui(r,o,c,l){if(o=r.i.g[String(o)],!o)return!0;o=o.concat();for(var y=!0,E=0;E<o.length;++E){var C=o[E];if(C&&!C.da&&C.capture==c){var K=C.listener,le=C.ha||C.src;C.fa&&ts(r.i,C),y=K.call(le,l)!==!1&&y}}return y&&!l.defaultPrevented}function Va(r,o,c){if(typeof r=="function")c&&(r=M(r,c));else if(r&&typeof r.handleEvent=="function")r=M(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(o)?-1:h.setTimeout(r,o||0)}function La(r){r.g=Va(()=>{r.g=null,r.i&&(r.i=!1,La(r))},r.l);let o=r.h;r.h=null,r.m.apply(null,o)}class Nd extends It{constructor(o,c){super(),this.m=o,this.l=c,this.h=null,this.i=!1,this.g=null}j(o){this.h=arguments,this.g?this.i=!0:La(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xn(r){It.call(this),this.h=r,this.g={}}q(Xn,It);var Fa=[];function Ua(r){Re(r.g,function(o,c){this.g.hasOwnProperty(c)&&ss(o)},r),r.g={}}Xn.prototype.N=function(){Xn.aa.N.call(this),Ua(this)},Xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=h.JSON.stringify,Dd=h.JSON.parse,Od=class{stringify(r){return h.JSON.stringify(r,void 0)}parse(r){return h.JSON.parse(r,void 0)}};function ls(){}ls.prototype.h=null;function qa(r){return r.h||(r.h=r.i())}function Ba(){}var Zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hs(){me.call(this,"d")}q(hs,me);function ds(){me.call(this,"c")}q(ds,me);var en={},ja=null;function qi(){return ja=ja||new ge}en.La="serverreachability";function $a(r){me.call(this,en.La,r)}q($a,me);function ei(r){let o=qi();Ee(o,new $a(o))}en.STAT_EVENT="statevent";function za(r,o){me.call(this,en.STAT_EVENT,r),this.stat=o}q(za,me);function Te(r){let o=qi();Ee(o,new za(o,r))}en.Ma="timingevent";function Ga(r,o){me.call(this,en.Ma,r),this.size=o}q(Ga,me);function ti(r,o){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){r()},o)}function ni(){this.g=!0}ni.prototype.xa=function(){this.g=!1};function xd(r,o,c,l,y,E){r.info(function(){if(r.g)if(E)for(var C="",K=E.split("&"),le=0;le<K.length;le++){var B=K[le].split("=");if(1<B.length){var _e=B[0];B=B[1];var ye=_e.split("_");C=2<=ye.length&&ye[1]=="type"?C+(_e+"="+B+"&"):C+(_e+"=redacted&")}}else C=null;else C=E;return"XMLHTTP REQ ("+l+") [attempt "+y+"]: "+o+`
`+c+`
`+C})}function Md(r,o,c,l,y,E,C){r.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+y+"]: "+o+`
`+c+`
`+E+" "+C})}function An(r,o,c,l){r.info(function(){return"XMLHTTP TEXT ("+o+"): "+Ld(r,c)+(l?" "+l:"")})}function Vd(r,o){r.info(function(){return"TIMEOUT: "+o})}ni.prototype.info=function(){};function Ld(r,o){if(!r.g)return o;if(!o)return null;try{var c=JSON.parse(o);if(c){for(r=0;r<c.length;r++)if(Array.isArray(c[r])){var l=c[r];if(!(2>l.length)){var y=l[1];if(Array.isArray(y)&&!(1>y.length)){var E=y[0];if(E!="noop"&&E!="stop"&&E!="close")for(var C=1;C<y.length;C++)y[C]=""}}}}return us(c)}catch{return o}}var Bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fs;function ji(){}q(ji,ls),ji.prototype.g=function(){return new XMLHttpRequest},ji.prototype.i=function(){return{}},fs=new ji;function Et(r,o,c,l){this.j=r,this.i=o,this.l=c,this.R=l||1,this.U=new Xn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ka}function Ka(){this.i=null,this.g="",this.h=!1}var Ha={},ps={};function ms(r,o,c){r.L=1,r.v=Wi(ot(o)),r.m=c,r.P=!0,Qa(r,null)}function Qa(r,o){r.F=Date.now(),$i(r),r.A=ot(r.v);var c=r.A,l=r.R;Array.isArray(l)||(l=[String(l)]),uc(c.i,"t",l),r.C=0,c=r.j.J,r.h=new Ka,r.g=Cc(r.j,c?o:null,!r.m),0<r.O&&(r.M=new Nd(M(r.Y,r,r.g),r.O)),o=r.U,c=r.g,l=r.ca;var y="readystatechange";Array.isArray(y)||(y&&(Fa[0]=y.toString()),y=Fa);for(var E=0;E<y.length;E++){var C=Na(c,y[E],l||o.handleEvent,!1,o.h||o);if(!C)break;o.g[C.key]=C}o=r.H?d(r.H):{},r.m?(r.u||(r.u="POST"),o["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.m,o)):(r.u="GET",r.g.ea(r.A,r.u,null,o)),ei(),xd(r.i,r.u,r.A,r.l,r.R,r.m)}Et.prototype.ca=function(r){r=r.target;let o=this.M;o&&at(r)==3?o.j():this.Y(r)},Et.prototype.Y=function(r){try{if(r==this.g)e:{let ye=at(this.g);var o=this.g.Ba();let Pn=this.g.Z();if(!(3>ye)&&(ye!=3||this.g&&(this.h.h||this.g.oa()||gc(this.g)))){this.J||ye!=4||o==7||(o==8||0>=Pn?ei(3):ei(2)),gs(this);var c=this.g.Z();this.X=c;t:if(Ya(this)){var l=gc(this.g);r="";var y=l.length,E=at(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),ii(this);var C="";break t}this.h.i=new h.TextDecoder}for(o=0;o<y;o++)this.h.h=!0,r+=this.h.i.decode(l[o],{stream:!(E&&o==y-1)});l.length=0,this.h.g+=r,this.C=0,C=this.h.g}else C=this.g.oa();if(this.o=c==200,Md(this.i,this.u,this.A,this.l,this.R,ye,c),this.o){if(this.T&&!this.K){t:{if(this.g){var K,le=this.g;if((K=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Me(K)){var B=K;break t}}B=null}if(c=B)An(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_s(this,c);else{this.o=!1,this.s=3,Te(12),tn(this),ii(this);break e}}if(this.P){c=!0;let je;for(;!this.J&&this.C<C.length;)if(je=Fd(this,C),je==ps){ye==4&&(this.s=4,Te(14),c=!1),An(this.i,this.l,null,"[Incomplete Response]");break}else if(je==Ha){this.s=4,Te(15),An(this.i,this.l,C,"[Invalid Chunk]"),c=!1;break}else An(this.i,this.l,je,null),_s(this,je);if(Ya(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||C.length!=0||this.h.h||(this.s=1,Te(16),c=!1),this.o=this.o&&c,!c)An(this.i,this.l,C,"[Invalid Chunked Response]"),tn(this),ii(this);else if(0<C.length&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.ba&&!_e.M&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Ts(_e),_e.M=!0,Te(11))}}else An(this.i,this.l,C,null),_s(this,C);ye==4&&tn(this),this.o&&!this.J&&(ye==4?Tc(this.j,this):(this.o=!1,$i(this)))}else tf(this.g),c==400&&0<C.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),tn(this),ii(this)}}}catch{}finally{}};function Ya(r){return r.g?r.u=="GET"&&r.L!=2&&r.j.Ca:!1}function Fd(r,o){var c=r.C,l=o.indexOf(`
`,c);return l==-1?ps:(c=Number(o.substring(c,l)),isNaN(c)?Ha:(l+=1,l+c>o.length?ps:(o=o.slice(l,l+c),r.C=l+c,o)))}Et.prototype.cancel=function(){this.J=!0,tn(this)};function $i(r){r.S=Date.now()+r.I,Ja(r,r.I)}function Ja(r,o){if(r.B!=null)throw Error("WatchDog timer not null");r.B=ti(M(r.ba,r),o)}function gs(r){r.B&&(h.clearTimeout(r.B),r.B=null)}Et.prototype.ba=function(){this.B=null;let r=Date.now();0<=r-this.S?(Vd(this.i,this.A),this.L!=2&&(ei(),Te(17)),tn(this),this.s=2,ii(this)):Ja(this,this.S-r)};function ii(r){r.j.G==0||r.J||Tc(r.j,r)}function tn(r){gs(r);var o=r.M;o&&typeof o.ma=="function"&&o.ma(),r.M=null,Ua(r.U),r.g&&(o=r.g,r.g=null,o.abort(),o.ma())}function _s(r,o){try{var c=r.j;if(c.G!=0&&(c.g==r||ys(c.h,r))){if(!r.K&&ys(c.h,r)&&c.G==3){try{var l=c.Da.g.parse(o)}catch{l=null}if(Array.isArray(l)&&l.length==3){var y=l;if(y[0]==0){e:if(!c.u){if(c.g)if(c.g.F+3e3<r.F)Ji(c),Qi(c);else break e;Es(c),Te(18)}}else c.za=y[1],0<c.za-c.T&&37500>y[2]&&c.F&&c.v==0&&!c.C&&(c.C=ti(M(c.Za,c),6e3));if(1>=ec(c.h)&&c.ca){try{c.ca()}catch{}c.ca=void 0}}else rn(c,11)}else if((r.K||c.g==r)&&Ji(c),!Me(o))for(y=c.Da.g.parse(o),o=0;o<y.length;o++){let B=y[o];if(c.T=B[0],B=B[1],c.G==2)if(B[0]=="c"){c.K=B[1],c.ia=B[2];let _e=B[3];_e!=null&&(c.la=_e,c.j.info("VER="+c.la));let ye=B[4];ye!=null&&(c.Aa=ye,c.j.info("SVER="+c.Aa));let Pn=B[5];Pn!=null&&typeof Pn=="number"&&0<Pn&&(l=1.5*Pn,c.L=l,c.j.info("backChannelRequestTimeoutMs_="+l)),l=c;let je=r.g;if(je){let Zi=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zi){var E=l.h;E.g||Zi.indexOf("spdy")==-1&&Zi.indexOf("quic")==-1&&Zi.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(vs(E,E.h),E.h=null))}if(l.D){let bs=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;bs&&(l.ya=bs,Y(l.I,l.D,bs))}}c.G=3,c.l&&c.l.ua(),c.ba&&(c.R=Date.now()-r.F,c.j.info("Handshake RTT: "+c.R+"ms")),l=c;var C=r;if(l.qa=Sc(l,l.J?l.ia:null,l.W),C.K){tc(l.h,C);var K=C,le=l.L;le&&(K.I=le),K.B&&(gs(K),$i(K)),l.g=C}else Ic(l);0<c.i.length&&Yi(c)}else B[0]!="stop"&&B[0]!="close"||rn(c,7);else c.G==3&&(B[0]=="stop"||B[0]=="close"?B[0]=="stop"?rn(c,7):Is(c):B[0]!="noop"&&c.l&&c.l.ta(B),c.v=0)}}ei(4)}catch{}}var Ud=class{constructor(r,o){this.g=r,this.map=o}};function Xa(r){this.l=r||10,h.PerformanceNavigationTiming?(r=h.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Za(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function ec(r){return r.h?1:r.g?r.g.size:0}function ys(r,o){return r.h?r.h==o:r.g?r.g.has(o):!1}function vs(r,o){r.g?r.g.add(o):r.h=o}function tc(r,o){r.h&&r.h==o?r.h=null:r.g&&r.g.has(o)&&r.g.delete(o)}Xa.prototype.cancel=function(){if(this.i=nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let r of this.g.values())r.cancel();this.g.clear()}};function nc(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let o=r.i;for(let c of r.g.values())o=o.concat(c.D);return o}return re(r.i)}function qd(r){if(r.V&&typeof r.V=="function")return r.V();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(I(r)){for(var o=[],c=r.length,l=0;l<c;l++)o.push(r[l]);return o}o=[],c=0;for(l in r)o[c++]=r[l];return o}function Bd(r){if(r.na&&typeof r.na=="function")return r.na();if(!r.V||typeof r.V!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(I(r)||typeof r=="string"){var o=[];r=r.length;for(var c=0;c<r;c++)o.push(c);return o}o=[],c=0;for(let l in r)o[c++]=l;return o}}}function ic(r,o){if(r.forEach&&typeof r.forEach=="function")r.forEach(o,void 0);else if(I(r)||typeof r=="string")Array.prototype.forEach.call(r,o,void 0);else for(var c=Bd(r),l=qd(r),y=l.length,E=0;E<y;E++)o.call(void 0,l[E],c&&c[E],r)}var rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jd(r,o){if(r){r=r.split("&");for(var c=0;c<r.length;c++){var l=r[c].indexOf("="),y=null;if(0<=l){var E=r[c].substring(0,l);y=r[c].substring(l+1)}else E=r[c];o(E,y?decodeURIComponent(y.replace(/\+/g," ")):"")}}}function nn(r){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,r instanceof nn){this.h=r.h,zi(this,r.j),this.o=r.o,this.g=r.g,Gi(this,r.s),this.l=r.l;var o=r.i,c=new oi;c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),sc(this,c),this.m=r.m}else r&&(o=String(r).match(rc))?(this.h=!1,zi(this,o[1]||"",!0),this.o=ri(o[2]||""),this.g=ri(o[3]||"",!0),Gi(this,o[4]),this.l=ri(o[5]||"",!0),sc(this,o[6]||"",!0),this.m=ri(o[7]||"")):(this.h=!1,this.i=new oi(null,this.h))}nn.prototype.toString=function(){var r=[],o=this.j;o&&r.push(si(o,oc,!0),":");var c=this.g;return(c||o=="file")&&(r.push("//"),(o=this.o)&&r.push(si(o,oc,!0),"@"),r.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.s,c!=null&&r.push(":",String(c))),(c=this.l)&&(this.g&&c.charAt(0)!="/"&&r.push("/"),r.push(si(c,c.charAt(0)=="/"?Gd:zd,!0))),(c=this.i.toString())&&r.push("?",c),(c=this.m)&&r.push("#",si(c,Kd)),r.join("")};function ot(r){return new nn(r)}function zi(r,o,c){r.j=c?ri(o,!0):o,r.j&&(r.j=r.j.replace(/:$/,""))}function Gi(r,o){if(o){if(o=Number(o),isNaN(o)||0>o)throw Error("Bad port number "+o);r.s=o}else r.s=null}function sc(r,o,c){o instanceof oi?(r.i=o,Hd(r.i,r.h)):(c||(o=si(o,Wd)),r.i=new oi(o,r.h))}function Y(r,o,c){r.i.set(o,c)}function Wi(r){return Y(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function ri(r,o){return r?o?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function si(r,o,c){return typeof r=="string"?(r=encodeURI(r).replace(o,$d),c&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function $d(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var oc=/[#\/\?@]/g,zd=/[#\?:]/g,Gd=/[#\?]/g,Wd=/[#\?@]/g,Kd=/#/g;function oi(r,o){this.h=this.g=null,this.i=r||null,this.j=!!o}function Tt(r){r.g||(r.g=new Map,r.h=0,r.i&&jd(r.i,function(o,c){r.add(decodeURIComponent(o.replace(/\+/g," ")),c)}))}t=oi.prototype,t.add=function(r,o){Tt(this),this.i=null,r=Sn(this,r);var c=this.g.get(r);return c||this.g.set(r,c=[]),c.push(o),this.h+=1,this};function ac(r,o){Tt(r),o=Sn(r,o),r.g.has(o)&&(r.i=null,r.h-=r.g.get(o).length,r.g.delete(o))}function cc(r,o){return Tt(r),o=Sn(r,o),r.g.has(o)}t.forEach=function(r,o){Tt(this),this.g.forEach(function(c,l){c.forEach(function(y){r.call(o,y,l,this)},this)},this)},t.na=function(){Tt(this);let r=Array.from(this.g.values()),o=Array.from(this.g.keys()),c=[];for(let l=0;l<o.length;l++){let y=r[l];for(let E=0;E<y.length;E++)c.push(o[l])}return c},t.V=function(r){Tt(this);let o=[];if(typeof r=="string")cc(this,r)&&(o=o.concat(this.g.get(Sn(this,r))));else{r=Array.from(this.g.values());for(let c=0;c<r.length;c++)o=o.concat(r[c])}return o},t.set=function(r,o){return Tt(this),this.i=null,r=Sn(this,r),cc(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[o]),this.h+=1,this},t.get=function(r,o){return r?(r=this.V(r),0<r.length?String(r[0]):o):o};function uc(r,o,c){ac(r,o),0<c.length&&(r.i=null,r.g.set(Sn(r,o),re(c)),r.h+=c.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let r=[],o=Array.from(this.g.keys());for(var c=0;c<o.length;c++){var l=o[c];let E=encodeURIComponent(String(l)),C=this.V(l);for(l=0;l<C.length;l++){var y=E;C[l]!==""&&(y+="="+encodeURIComponent(String(C[l]))),r.push(y)}}return this.i=r.join("&")};function Sn(r,o){return o=String(o),r.j&&(o=o.toLowerCase()),o}function Hd(r,o){o&&!r.j&&(Tt(r),r.i=null,r.g.forEach(function(c,l){var y=l.toLowerCase();l!=y&&(ac(this,l),uc(this,y,c))},r)),r.j=o}function Qd(r,o){let c=new ni;if(h.Image){let l=new Image;l.onload=ne(bt,c,"TestLoadImage: loaded",!0,o,l),l.onerror=ne(bt,c,"TestLoadImage: error",!1,o,l),l.onabort=ne(bt,c,"TestLoadImage: abort",!1,o,l),l.ontimeout=ne(bt,c,"TestLoadImage: timeout",!1,o,l),h.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=r}else o(!1)}function Yd(r,o){let c=new ni,l=new AbortController,y=setTimeout(()=>{l.abort(),bt(c,"TestPingServer: timeout",!1,o)},1e4);fetch(r,{signal:l.signal}).then(E=>{clearTimeout(y),E.ok?bt(c,"TestPingServer: ok",!0,o):bt(c,"TestPingServer: server error",!1,o)}).catch(()=>{clearTimeout(y),bt(c,"TestPingServer: error",!1,o)})}function bt(r,o,c,l,y){try{y&&(y.onload=null,y.onerror=null,y.onabort=null,y.ontimeout=null),l(c)}catch{}}function Jd(){this.g=new Od}function Xd(r,o,c){let l=c||"";try{ic(r,function(y,E){let C=y;T(y)&&(C=us(y)),o.push(l+E+"="+encodeURIComponent(C))})}catch(y){throw o.push(l+"type="+encodeURIComponent("_badmap")),y}}function ai(r){this.l=r.Ub||null,this.j=r.eb||!1}q(ai,ls),ai.prototype.g=function(){return new Ki(this.l,this.j)},ai.prototype.i=function(r){return function(){return r}}({});function Ki(r,o){ge.call(this),this.D=r,this.o=o,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}q(Ki,ge),t=Ki.prototype,t.open=function(r,o){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=r,this.A=o,this.readyState=1,ui(this)},t.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let o={headers:this.u,method:this.B,credentials:this.m,cache:void 0};r&&(o.body=r),(this.D||h).fetch(new Request(this.A,o)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},t.Sa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lc(this)}else r.text().then(this.Ra.bind(this),this.ga.bind(this))};function lc(r){r.j.read().then(r.Pa.bind(r)).catch(r.ga.bind(r))}t.Pa=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var o=r.value?r.value:new Uint8Array(0);(o=this.v.decode(o,{stream:!r.done}))&&(this.response=this.responseText+=o)}r.done?ci(this):ui(this),this.readyState==3&&lc(this)}},t.Ra=function(r){this.g&&(this.response=this.responseText=r,ci(this))},t.Qa=function(r){this.g&&(this.response=r,ci(this))},t.ga=function(){this.g&&ci(this)};function ci(r){r.readyState=4,r.l=null,r.j=null,r.v=null,ui(r)}t.setRequestHeader=function(r,o){this.u.append(r,o)},t.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let r=[],o=this.h.entries();for(var c=o.next();!c.done;)c=c.value,r.push(c[0]+": "+c[1]),c=o.next();return r.join(`\r
`)};function ui(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function hc(r){let o="";return Re(r,function(c,l){o+=l,o+=":",o+=c,o+=`\r
`}),o}function ws(r,o,c){e:{for(l in c){var l=!1;break e}l=!0}l||(c=hc(c),typeof r=="string"?c!=null&&encodeURIComponent(String(c)):Y(r,o,c))}function X(r){ge.call(this),this.headers=new Map,this.o=r||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}q(X,ge);var Zd=/^https?$/i,ef=["POST","PUT"];t=X.prototype,t.Ha=function(r){this.J=r},t.ea=function(r,o,c,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);o=o?o.toUpperCase():"GET",this.D=r,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fs.g(),this.v=this.o?qa(this.o):qa(fs),this.g.onreadystatechange=M(this.Ea,this);try{this.B=!0,this.g.open(o,String(r),!0),this.B=!1}catch(E){dc(this,E);return}if(r=c||"",c=new Map(this.headers),l)if(Object.getPrototypeOf(l)===Object.prototype)for(var y in l)c.set(y,l[y]);else if(typeof l.keys=="function"&&typeof l.get=="function")for(let E of l.keys())c.set(E,l.get(E));else throw Error("Unknown input type for opt_headers: "+String(l));l=Array.from(c.keys()).find(E=>E.toLowerCase()=="content-type"),y=h.FormData&&r instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ef,o,void 0))||l||y||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,C]of c)this.g.setRequestHeader(E,C);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mc(this),this.u=!0,this.g.send(r),this.u=!1}catch(E){dc(this,E)}};function dc(r,o){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=o,r.m=5,fc(r),Hi(r)}function fc(r){r.A||(r.A=!0,Ee(r,"complete"),Ee(r,"error"))}t.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=r||7,Ee(this,"complete"),Ee(this,"abort"),Hi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),X.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pc(this):this.bb())},t.bb=function(){pc(this)};function pc(r){if(r.h&&typeof u<"u"&&(!r.v[1]||at(r)!=4||r.Z()!=2)){if(r.u&&at(r)==4)Va(r.Ea,0,r);else if(Ee(r,"readystatechange"),at(r)==4){r.h=!1;try{let C=r.Z();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break e;default:o=!1}var c;if(!(c=o)){var l;if(l=C===0){var y=String(r.D).match(rc)[1]||null;!y&&h.self&&h.self.location&&(y=h.self.location.protocol.slice(0,-1)),l=!Zd.test(y?y.toLowerCase():"")}c=l}if(c)Ee(r,"complete"),Ee(r,"success");else{r.m=6;try{var E=2<at(r)?r.g.statusText:""}catch{E=""}r.l=E+" ["+r.Z()+"]",fc(r)}}finally{Hi(r)}}}}function Hi(r,o){if(r.g){mc(r);let c=r.g,l=r.v[0]?()=>{}:null;r.g=null,r.v=null,o||Ee(r,"ready");try{c.onreadystatechange=l}catch{}}}function mc(r){r.I&&(h.clearTimeout(r.I),r.I=null)}t.isActive=function(){return!!this.g};function at(r){return r.g?r.g.readyState:0}t.Z=function(){try{return 2<at(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(r){if(this.g){var o=this.g.responseText;return r&&o.indexOf(r)==0&&(o=o.substring(r.length)),Dd(o)}};function gc(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.H){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function tf(r){let o={};r=(r.g&&2<=at(r)&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let l=0;l<r.length;l++){if(Me(r[l]))continue;var c=_(r[l]);let y=c[0];if(c=c[1],typeof c!="string")continue;c=c.trim();let E=o[y]||[];o[y]=E,E.push(c)}v(o,function(l){return l.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(r,o,c){return c&&c.internalChannelParams&&c.internalChannelParams[r]||o}function _c(r){this.Aa=0,this.i=[],this.j=new ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=li("failFast",!1,r),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=li("baseRetryDelayMs",5e3,r),this.cb=li("retryDelaySeedMs",1e4,r),this.Wa=li("forwardChannelMaxRetries",2,r),this.wa=li("forwardChannelRequestTimeoutMs",2e4,r),this.pa=r&&r.xmlHttpFactory||void 0,this.Xa=r&&r.Tb||void 0,this.Ca=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.h=new Xa(r&&r.concurrentRequestLimit),this.Da=new Jd,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=r&&r.Rb||!1,r&&r.xa&&this.j.xa(),r&&r.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&r&&r.detectBufferingProxy||!1,this.ja=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.ja=r.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_c.prototype,t.la=8,t.G=1,t.connect=function(r,o,c,l){Te(0),this.W=r,this.H=o||{},c&&l!==void 0&&(this.H.OSID=c,this.H.OAID=l),this.F=this.X,this.I=Sc(this,null,this.W),Yi(this)};function Is(r){if(yc(r),r.G==3){var o=r.U++,c=ot(r.I);if(Y(c,"SID",r.K),Y(c,"RID",o),Y(c,"TYPE","terminate"),hi(r,c),o=new Et(r,r.j,o),o.L=2,o.v=Wi(ot(c)),c=!1,h.navigator&&h.navigator.sendBeacon)try{c=h.navigator.sendBeacon(o.v.toString(),"")}catch{}!c&&h.Image&&(new Image().src=o.v,c=!0),c||(o.g=Cc(o.j,null),o.g.ea(o.v)),o.F=Date.now(),$i(o)}Ac(r)}function Qi(r){r.g&&(Ts(r),r.g.cancel(),r.g=null)}function yc(r){Qi(r),r.u&&(h.clearTimeout(r.u),r.u=null),Ji(r),r.h.cancel(),r.s&&(typeof r.s=="number"&&h.clearTimeout(r.s),r.s=null)}function Yi(r){if(!Za(r.h)&&!r.s){r.s=!0;var o=r.Ga;Hn||ka(),Qn||(Hn(),Qn=!0),es.add(o,r),r.B=0}}function nf(r,o){return ec(r.h)>=r.h.j-(r.s?1:0)?!1:r.s?(r.i=o.D.concat(r.i),!0):r.G==1||r.G==2||r.B>=(r.Va?0:r.Wa)?!1:(r.s=ti(M(r.Ga,r,o),bc(r,r.B)),r.B++,!0)}t.Ga=function(r){if(this.s)if(this.s=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;let y=new Et(this,this.j,r),E=this.o;if(this.S&&(E?(E=d(E),m(E,this.S)):E=this.S),this.m!==null||this.O||(y.H=E,E=null),this.P)e:{for(var o=0,c=0;c<this.i.length;c++){t:{var l=this.i[c];if("__data__"in l.map&&(l=l.map.__data__,typeof l=="string")){l=l.length;break t}l=void 0}if(l===void 0)break;if(o+=l,4096<o){o=c;break e}if(o===4096||c===this.i.length-1){o=c+1;break e}}o=1e3}else o=1e3;o=wc(this,y,o),c=ot(this.I),Y(c,"RID",r),Y(c,"CVER",22),this.D&&Y(c,"X-HTTP-Session-Id",this.D),hi(this,c),E&&(this.O?o="headers="+encodeURIComponent(String(hc(E)))+"&"+o:this.m&&ws(c,this.m,E)),vs(this.h,y),this.Ua&&Y(c,"TYPE","init"),this.P?(Y(c,"$req",o),Y(c,"SID","null"),y.T=!0,ms(y,c,null)):ms(y,c,o),this.G=2}}else this.G==3&&(r?vc(this,r):this.i.length==0||Za(this.h)||vc(this))};function vc(r,o){var c;o?c=o.l:c=r.U++;let l=ot(r.I);Y(l,"SID",r.K),Y(l,"RID",c),Y(l,"AID",r.T),hi(r,l),r.m&&r.o&&ws(l,r.m,r.o),c=new Et(r,r.j,c,r.B+1),r.m===null&&(c.H=r.o),o&&(r.i=o.D.concat(r.i)),o=wc(r,c,1e3),c.I=Math.round(.5*r.wa)+Math.round(.5*r.wa*Math.random()),vs(r.h,c),ms(c,l,o)}function hi(r,o){r.H&&Re(r.H,function(c,l){Y(o,l,c)}),r.l&&ic({},function(c,l){Y(o,l,c)})}function wc(r,o,c){c=Math.min(r.i.length,c);var l=r.l?M(r.l.Na,r.l,r):null;e:{var y=r.i;let E=-1;for(;;){let C=["count="+c];E==-1?0<c?(E=y[0].g,C.push("ofs="+E)):E=0:C.push("ofs="+E);let K=!0;for(let le=0;le<c;le++){let B=y[le].g,_e=y[le].map;if(B-=E,0>B)E=Math.max(0,y[le].g-100),K=!1;else try{Xd(_e,C,"req"+B+"_")}catch{l&&l(_e)}}if(K){l=C.join("&");break e}}}return r=r.i.splice(0,c),o.D=r,l}function Ic(r){if(!r.g&&!r.u){r.Y=1;var o=r.Fa;Hn||ka(),Qn||(Hn(),Qn=!0),es.add(o,r),r.v=0}}function Es(r){return r.g||r.u||3<=r.v?!1:(r.Y++,r.u=ti(M(r.Fa,r),bc(r,r.v)),r.v++,!0)}t.Fa=function(){if(this.u=null,Ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var r=2*this.R;this.j.info("BP detection timer enabled: "+r),this.A=ti(M(this.ab,this),r)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Qi(this),Ec(this))};function Ts(r){r.A!=null&&(h.clearTimeout(r.A),r.A=null)}function Ec(r){r.g=new Et(r,r.j,"rpc",r.Y),r.m===null&&(r.g.H=r.o),r.g.O=0;var o=ot(r.qa);Y(o,"RID","rpc"),Y(o,"SID",r.K),Y(o,"AID",r.T),Y(o,"CI",r.F?"0":"1"),!r.F&&r.ja&&Y(o,"TO",r.ja),Y(o,"TYPE","xmlhttp"),hi(r,o),r.m&&r.o&&ws(o,r.m,r.o),r.L&&(r.g.I=r.L);var c=r.g;r=r.ia,c.L=1,c.v=Wi(ot(o)),c.m=null,c.P=!0,Qa(c,r)}t.Za=function(){this.C!=null&&(this.C=null,Qi(this),Es(this),Te(19))};function Ji(r){r.C!=null&&(h.clearTimeout(r.C),r.C=null)}function Tc(r,o){var c=null;if(r.g==o){Ji(r),Ts(r),r.g=null;var l=2}else if(ys(r.h,o))c=o.D,tc(r.h,o),l=1;else return;if(r.G!=0){if(o.o)if(l==1){c=o.m?o.m.length:0,o=Date.now()-o.F;var y=r.B;l=qi(),Ee(l,new Ga(l,c)),Yi(r)}else Ic(r);else if(y=o.s,y==3||y==0&&0<o.X||!(l==1&&nf(r,o)||l==2&&Es(r)))switch(c&&0<c.length&&(o=r.h,o.i=o.i.concat(c)),y){case 1:rn(r,5);break;case 4:rn(r,10);break;case 3:rn(r,6);break;default:rn(r,2)}}}function bc(r,o){let c=r.Ta+Math.floor(Math.random()*r.cb);return r.isActive()||(c*=2),c*o}function rn(r,o){if(r.j.info("Error code "+o),o==2){var c=M(r.fb,r),l=r.Xa;let y=!l;l=new nn(l||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||zi(l,"https"),Wi(l),y?Qd(l.toString(),c):Yd(l.toString(),c)}else Te(2);r.G=0,r.l&&r.l.sa(o),Ac(r),yc(r)}t.fb=function(r){r?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function Ac(r){if(r.G=0,r.ka=[],r.l){let o=nc(r.h);(o.length!=0||r.i.length!=0)&&(J(r.ka,o),J(r.ka,r.i),r.h.i.length=0,re(r.i),r.i.length=0),r.l.ra()}}function Sc(r,o,c){var l=c instanceof nn?ot(c):new nn(c);if(l.g!="")o&&(l.g=o+"."+l.g),Gi(l,l.s);else{var y=h.location;l=y.protocol,o=o?o+"."+y.hostname:y.hostname,y=+y.port;var E=new nn(null);l&&zi(E,l),o&&(E.g=o),y&&Gi(E,y),c&&(E.l=c),l=E}return c=r.D,o=r.ya,c&&o&&Y(l,c,o),Y(l,"VER",r.la),hi(r,l),l}function Cc(r,o,c){if(o&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return o=r.Ca&&!r.pa?new X(new ai({eb:c})):new X(r.pa),o.Ha(r.J),o}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Pc(){}t=Pc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xi(){}Xi.prototype.g=function(r,o){return new Ve(r,o)};function Ve(r,o){ge.call(this),this.g=new _c(o),this.l=r,this.h=o&&o.messageUrlParams||null,r=o&&o.messageHeaders||null,o&&o.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=o&&o.initMessageHeaders||null,o&&o.messageContentType&&(r?r["X-WebChannel-Content-Type"]=o.messageContentType:r={"X-WebChannel-Content-Type":o.messageContentType}),o&&o.va&&(r?r["X-WebChannel-Client-Profile"]=o.va:r={"X-WebChannel-Client-Profile":o.va}),this.g.S=r,(r=o&&o.Sb)&&!Me(r)&&(this.g.m=r),this.v=o&&o.supportsCrossDomainXhr||!1,this.u=o&&o.sendRawJson||!1,(o=o&&o.httpSessionIdParam)&&!Me(o)&&(this.g.D=o,r=this.h,r!==null&&o in r&&(r=this.h,o in r&&delete r[o])),this.j=new Cn(this)}q(Ve,ge),Ve.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ve.prototype.close=function(){Is(this.g)},Ve.prototype.o=function(r){var o=this.g;if(typeof r=="string"){var c={};c.__data__=r,r=c}else this.u&&(c={},c.__data__=us(r),r=c);o.i.push(new Ud(o.Ya++,r)),o.G==3&&Yi(o)},Ve.prototype.N=function(){this.g.l=null,delete this.j,Is(this.g),delete this.g,Ve.aa.N.call(this)};function Rc(r){hs.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var o=r.__sm__;if(o){e:{for(let c in o){r=c;break e}r=void 0}(this.i=r)&&(r=this.i,o=o!==null&&r in o?o[r]:void 0),this.data=o}else this.data=r}q(Rc,hs);function kc(){ds.call(this),this.status=1}q(kc,ds);function Cn(r){this.g=r}q(Cn,Pc),Cn.prototype.ua=function(){Ee(this.g,"a")},Cn.prototype.ta=function(r){Ee(this.g,new Rc(r))},Cn.prototype.sa=function(r){Ee(this.g,new kc)},Cn.prototype.ra=function(){Ee(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,Ve.prototype.send=Ve.prototype.o,Ve.prototype.open=Ve.prototype.m,Ve.prototype.close=Ve.prototype.close,id=wt.createWebChannelTransport=function(){return new Xi},nd=wt.getStatEventTarget=function(){return qi()},td=wt.Event=en,ed=wt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,Zh=wt.ErrorCode=Bi,Wa.COMPLETE="complete",Xh=wt.EventType=Wa,Ba.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",ge.prototype.listen=ge.prototype.K,Jh=wt.WebChannel=Ba,gv=wt.FetchXmlHttpFactory=ai,X.prototype.listenOnce=X.prototype.L,X.prototype.getLastError=X.prototype.Ka,X.prototype.getLastErrorCode=X.prototype.Ba,X.prototype.getStatus=X.prototype.Z,X.prototype.getResponseJson=X.prototype.Oa,X.prototype.getResponseText=X.prototype.oa,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Ha,Yh=wt.XhrIo=X}).apply(typeof Gr<"u"?Gr:typeof self<"u"?self:typeof window<"u"?window:{});var rd="@firebase/firestore";var de=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};de.UNAUTHENTICATED=new de(null),de.GOOGLE_CREDENTIALS=new de("google-credentials-uid"),de.FIRST_PARTY=new de("first-party-uid"),de.MOCK_USER=new de("mock-user");var Mi="10.14.0";var zn=new jt("@firebase/firestore");function We(t,...e){if(zn.logLevel<=G.DEBUG){let n=e.map(Ca);zn.debug(`Firestore (${Mi}): ${t}`,...n)}}function ud(t,...e){if(zn.logLevel<=G.ERROR){let n=e.map(Ca);zn.error(`Firestore (${Mi}): ${t}`,...n)}}function _v(t,...e){if(zn.logLevel<=G.WARN){let n=e.map(Ca);zn.warn(`Firestore (${Mi}): ${t}`,...n)}}function Ca(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function xe(t="Unexpected state"){let e=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: `+t;throw ud(e),new Error(e)}function En(t,e){t||xe()}var Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fe=class extends Ce{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wr=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fa=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(de.UNAUTHENTICATED))}shutdown(){}},pa=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ma=class{constructor(e){this.t=e,this.currentUser=de.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){En(this.o===void 0);let i=this.i,s=I=>this.i!==i?(i=this.i,n(I)):Promise.resolve(),a=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Tn,e.enqueueRetryable(()=>s(this.currentUser))};let u=()=>{let I=a;e.enqueueRetryable(()=>g(this,null,function*(){yield I.promise,yield s(this.currentUser)}))},h=I=>{We("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(I=>h(I)),setTimeout(()=>{if(!this.auth){let I=this.t.getImmediate({optional:!0});I?h(I):(We("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Tn)}},0),u()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(We("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(En(typeof i.accessToken=="string"),new Wr(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return En(e===null||typeof e=="string"),new de(e)}},ga=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=de.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_a=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new ga(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(de.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ya=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},va=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){En(this.o===void 0);let i=a=>{a.error!=null&&We("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);let u=a.token!==this.R;return this.R=a.token,We("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};let s=a=>{We("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){let a=this.A.getImmediate({optional:!0});a?s(a):We("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(En(typeof n.token=="string"),this.R=n.token,new ya(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function ld(t,e){return t<e?-1:t>e?1:0}var wa=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(),i===void 0?i=e.length-n:i>e.length-n&&xe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let s=0;s<i;s++){let a=e.get(s),u=n.get(s);if(a<u)return-1;if(a>u)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Xt=class t extends wa{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new fe(Pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new t(n)}static emptyPath(){return new t([])}};var bn=class t{constructor(e){this.path=e}static fromPath(e){return new t(Xt.fromString(e))}static fromName(e){return new t(Xt.fromString(e).popFirst(5))}static empty(){return new t(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Xt(e.slice()))}};var Ia=class{constructor(e,n,i,s){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=s}};Ia.UNKNOWN_ID=-1;function yv(t){return t.name==="IndexedDbTransactionError"}function vv(t){return t===0&&1/t==-1/0}var wv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aE=[...wv,"documentOverlays"],Iv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ev=Iv,Tv=[...Ev,"indexConfiguration","indexState","indexEntries"];var cE=[...Tv,"globals"];var Gn=class t{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $n(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $n(this.root,e,this.comparator,!1)}getReverseIterator(){return new $n(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $n(this.root,e,this.comparator,!0)}},$n=class{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},it=class t{constructor(e,n,i,s,a){this.key=e,this.value=n,this.color=i??t.RED,this.left=s??t.EMPTY,this.right=a??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,a){return new t(e??this.key,n??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this,a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,i),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return t.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();let e=this.left.check();if(e!==this.right.check())throw xe();return e+(this.isRed()?0:1)}};it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(e,n,i,s,a){return this}insert(e,n,i){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Kr=class t{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hr(this.data.getIterator())}getIteratorFrom(e){return new Hr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let s=n.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Hr=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ea=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Wn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Ea("Invalid base64 string: "+a):a}}(e);return new t(n)}static fromUint8Array(e){let n=function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ld(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Wn.EMPTY_BYTE_STRING=new Wn("");var bv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Av(t){if(En(!!t),typeof t=="string"){let e=0,n=bv.exec(t);if(En(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:xi(t.seconds),nanos:xi(t.nanos)}}function xi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sv(t){return typeof t=="string"?Wn.fromBase64String(t):Wn.fromUint8Array(t)}var Ta=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function Cv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Pv(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var lE=new Gn(bn.comparator);var hE=new Gn(bn.comparator);var dE=new Gn(bn.comparator),fE=new Kr(bn.comparator);var pE=new Kr(ld);var sd,U;(U=sd||(sd={}))[U.OK=0]="OK",U[U.CANCELLED=1]="CANCELLED",U[U.UNKNOWN=2]="UNKNOWN",U[U.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",U[U.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",U[U.NOT_FOUND=5]="NOT_FOUND",U[U.ALREADY_EXISTS=6]="ALREADY_EXISTS",U[U.PERMISSION_DENIED=7]="PERMISSION_DENIED",U[U.UNAUTHENTICATED=16]="UNAUTHENTICATED",U[U.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",U[U.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",U[U.ABORTED=10]="ABORTED",U[U.OUT_OF_RANGE=11]="OUT_OF_RANGE",U[U.UNIMPLEMENTED=12]="UNIMPLEMENTED",U[U.INTERNAL=13]="INTERNAL",U[U.UNAVAILABLE=14]="UNAVAILABLE",U[U.DATA_LOSS=15]="DATA_LOSS";var mE=new ha([4294967295,4294967295],0);var Qr=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(xi(e.integerValue));else if("doubleValue"in e){let i=xi(e.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),vv(i)?n.At(0):n.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(n,20),typeof i=="string"&&(i=Av(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Sv(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in e?Pv(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Cv(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):xe()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let i=e.fields||{};this.dt(n,55);for(let s of Object.keys(i))this.Vt(s,n),this.Tt(i[s],n)}wt(e,n){var i,s;let a=e.fields||{};this.dt(n,53);let u="value",h=((s=(i=a[u].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(xi(h)),this.Vt(u,n),this.Tt(a[u],n)}bt(e,n){let i=e.values||[];this.dt(n,50);for(let s of i)this.Tt(s,n)}yt(e,n){this.dt(n,37),bn.fromName(e).path.forEach(i=>{this.dt(n,60),this.Dt(i,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Qr.vt=new Qr;var gE=new Uint8Array(0);var nt=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nt.DEFAULT_COLLECTION_PERCENTILE=10,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nt.DEFAULT=new nt(41943040,nt.DEFAULT_COLLECTION_PERCENTILE,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nt.DISABLED=new nt(-1,0,0);function da(){return typeof document<"u"?document:null}var ba=class{constructor(e,n,i=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&We("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Aa=class t{constructor(e,n,i,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,a){let u=Date.now()+i,h=new t(e,n,u,s,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var od,ad;(ad=od||(od={})).ea="default",ad.Cache="cache";function Rv(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var cd=new Map;function kv(t,e,n,i){if(e===!0&&i===!0)throw new fe(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe()}function Dv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Nv(t);throw new fe(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Yr=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new fe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new fe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new fe(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Jr=class{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yr({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yr(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fa;switch(i.type){case"firstParty":return new _a(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return g(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=cd.get(n);i&&(We("ComponentProvider","Removing Datastore"),cd.delete(n),i.terminate())}(this),Promise.resolve()}};function hd(t,e,n,i={}){var s;let a=(t=Dv(t,Jr))._getSettings(),u=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==u&&_v("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:u,ssl:!1})),i.mockUserToken){let h,I;if(typeof i.mockUserToken=="string")h=i.mockUserToken,I=de.MOCK_USER;else{h=Su(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);let T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new fe(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new de(T)}t._authCredentials=new pa(new Wr(h,I))}}var Xr=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ba(this,"async_queue_retry"),this.Vu=()=>{let i=da();i&&We("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;let n=da();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=da();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Tn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return g(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yv(e))throw e;We("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;let s=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(i);throw ud("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let s=Aa.createAndSchedule(this,e,n,i,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&xe()}verifyOperationInProgress(){}wu(){return g(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var Sa=class extends Jr{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new Xr,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return g(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Xr(e),this._firestoreClient=void 0,yield e}})}};function dd(t,e){let n=typeof t=="object"?t:ft(),i=typeof t=="string"?t:e||"(default)",s=et(n,"firestore").getImmediate({identifier:i});if(!s._initialized){let a=Au("firestore");a&&hd(s,...a)}return s}var _E=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(s){Mi=s})(zt),Oe(new ue("firestore",(i,{instanceIdentifier:s,options:a})=>{let u=i.getProvider("app").getImmediate(),h=new Sa(new ma(i.getProvider("auth-internal")),new va(i.getProvider("app-check-internal")),function(T,A){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new fe(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(T.options.projectId,A)}(u,s),u);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),Q(rd,"4.7.3",e),Q(rd,"4.7.3","esm2017")})();var Vi=class{constructor(e){return e}},fd="firestore",Pa=class{constructor(){return _n(fd)}};var Ra=new He("angularfire2.firestore-instances");function Ov(t,e){let n=Ln(fd,t,e);return n&&new Vi(n)}function xv(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Vi(i)}}var Mv={provide:Pa,deps:[[new be,Ra]]},Vv={provide:Vi,useFactory:Ov,deps:[[new be,Ra],Ge]},Lv=(()=>{class t{constructor(){Q("angularfire",mt.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$({type:t});static \u0275inj=j({providers:[Vv,Mv]})}return t})();function pd(t,...e){return{ngModule:Lv,providers:[{provide:Ra,useFactory:xv(t),multi:!0,deps:[Qe,St,Gt,gt,[new be,Oi],[new be,Vn],...e]}]}}var md=Wt(dd,!0);var Zr=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[Cl(()=>Pl(xn.firebase)),pd(()=>md()),Gh(()=>Wh()),Nl(()=>Dl())]});let t=e;return t})();var gd=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[De]});let t=e;return t})();var _d=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[cn,Zr,De]});let t=e;return t})();var yd=(()=>{let e=class e{constructor(i){this.loadingService=i}intercept(i,s){let a=i.headers.get("X-Background-Request");return a&&a==="true"?s.handle(i):(this.loadingService.loadingOn(),s.handle(i).pipe(Fc(()=>this.loadingService.loadingOff())))}};e.\u0275fac=function(s){return new(s||e)(H(Cr))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();var vd=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[cn]});let t=e;return t})();var wd=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[De]});let t=e;return t})();var Id=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e}),e.\u0275inj=j({imports:[De]});let t=e;return t})();var Ed=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=$({type:e,bootstrap:[Bl]}),e.\u0275inj=j({providers:[qe,Ht,{provide:qn,useValue:qn},{provide:kn,useClass:th,multi:!0},{provide:kn,useClass:eh,multi:!0},{provide:kn,useClass:yd,multi:!0},Kt],imports:[nu,Xl,cn,jl,Zl,gd,Iu,wd,Id,vu,_d,Wl,Zr,vd,cn,su]});let t=e;return t})();iu().bootstrapModule(Ed).catch(t=>console.error(t));
